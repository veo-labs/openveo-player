/* openveo-player v7.0.0 */
"use strict";!function(){var e=angular.module("ov.player",["ngCookies"]);e.constant("oplI18nTranslations",{en:{LOADING:"Loading...",MEDIA_ERR_NO_SOURCE:"A network error caused the video download to fail part-way.",MEDIA_ERR_NETWORK:"A network error caused the video download to fail part-way.",MEDIA_ERR_DECODE:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",MEDIA_ERR_SRC_NOT_SUPPORTED:"The video could not be loaded, either because the server or network failed or because the format is not supported.",MEDIA_ERR_PERMISSION:"Video not available or private.",MEDIA_ERR_DEFAULT:"An unknown error occurred.",PREVIEW_IMAGE_PRELOAD_ERROR:"Image not available",TILE_MORE_INFO_BUTTON_LABEL:"More info",TILE_CLOSE_BUTTON_LABEL:"Close",TILE_IMAGE_PRELOAD_ERROR:"Image not available",CONTROLS_VOLUME_MUTE_ARIA_LABEL:"Mute",CONTROLS_VOLUME_UNMUTE_ARIA_LABEL:"Mute",CONTROLS_VOLUME_CURSOR_ARIA_LABEL:"Change volume",CONTROLS_VOLUME_TEXT_ARIA_LABEL:"Volume %value%%",CONTROLS_TEMPLATE_SPLIT_50_50_ARIA_LABEL:"Mode 50/50",CONTROLS_TEMPLATE_FULL_1_ARIA_LABEL:"Mode video only",CONTROLS_TEMPLATE_FULL_2_ARIA_LABEL:"Mode presentation only",CONTROLS_TEMPLATE_SPLIT_25_75_ARIA_LABEL:"Mode with priority on presentation",CONTROLS_SETTINGS_ARIA_LABEL:"Settings",CONTROLS_SETTINGS_QUALITIES_TITLE:"Quality",CONTROLS_SETTINGS_SOURCES_TITLE:"Source",CONTROLS_SETTINGS_SOURCE_LABEL:"Source %source%",CONTROLS_PLAY_ARIA_LABEL:"Play",CONTROLS_PAUSE_ARIA_LABEL:"Pause",CONTROLS_TEMPLATES_SELECTOR_ARIA_LABEL:"Choose player template",CONTROLS_TIME_BAR_ARIA_LABEL:"Navigate in the video",CONTROLS_TIME_BAR_ARIA_VALUE_TEXT:"%value%% seen",CONTROLS_FULLSCREEN_ARIA_LABEL:"Fullscreen",CONTROLS_FULLSCREEN_EXIT_ARIA_LABEL:"Exit fullscreen",CONTROLS_VEO_LABS_ARIA_LABEL:"Go to Veo-Labs web site",TABS_CHAPTERS_ARIA_LABEL:"Display chapters",TABS_TIMECODES_ARIA_LABEL:"Display images",TABS_TAGS_ARIA_LABEL:"Display tags"},fr:{LOADING:"Chargement...",MEDIA_ERR_NO_SOURCE:"Une erreur réseau à causé l'échec du téléchargement de la vidéo.",MEDIA_ERR_NETWORK:"Une erreur réseau à causé l'échec du téléchargement de la vidéo.",MEDIA_ERR_DECODE:"La lecture de la vidéo a été abandonnée en raison d' un problème de corruption ou parce que la vidéo utilise des fonctionnalités que votre navigateur ne supporte pas.",MEDIA_ERR_SRC_NOT_SUPPORTED:"La vidéo ne peut être chargée , soit parce que le serveur ou le réseau à échoué ou parce que le format ne sont pas supportées.",MEDIA_ERR_PERMISSION:"Vidéo indisponible ou privée.",MEDIA_ERR_DEFAULT:"Une erreur inconnue est survenue.",PREVIEW_IMAGE_PRELOAD_ERROR:"Image non disponible",TILE_MORE_INFO_BUTTON_LABEL:"Plus d'info",TILE_CLOSE_BUTTON_LABEL:"Fermer",TILE_IMAGE_PRELOAD_ERROR:"Image non disponible",CONTROLS_VOLUME_MUTE_ARIA_LABEL:"Désactiver le son",CONTROLS_VOLUME_UNMUTE_ARIA_LABEL:"Activer le son",CONTROLS_VOLUME_CURSOR_ARIA_LABEL:"Modifier le volume",CONTROLS_VOLUME_TEXT_ARIA_LABEL:"Volume à %value%%",CONTROLS_TEMPLATE_SPLIT_50_50_ARIA_LABEL:"Mode 50/50",CONTROLS_TEMPLATE_FULL_1_ARIA_LABEL:"Mode vidéo seule",CONTROLS_TEMPLATE_FULL_2_ARIA_LABEL:"Mode présentation seule",CONTROLS_TEMPLATE_SPLIT_25_75_ARIA_LABEL:"Mode avec priorité sur la présentation",CONTROLS_SETTINGS_ARIA_LABEL:"Paramètres",CONTROLS_SETTINGS_QUALITIES_TITLE:"Qualité",CONTROLS_SETTINGS_SOURCES_TITLE:"Source",CONTROLS_SETTINGS_SOURCE_LABEL:"Source %source%",CONTROLS_PLAY_ARIA_LABEL:"Lire",CONTROLS_PAUSE_ARIA_LABEL:"Pause",CONTROLS_TEMPLATES_SELECTOR_ARIA_LABEL:"Choisir un modèle de player",CONTROLS_TIME_BAR_ARIA_LABEL:"Se déplacer dans la vidéo",CONTROLS_TIME_BAR_ARIA_VALUE_TEXT:"%value%% vu",CONTROLS_FULLSCREEN_ARIA_LABEL:"Plein écran",CONTROLS_FULLSCREEN_EXIT_ARIA_LABEL:"Quitter le plein écran",CONTROLS_VEO_LABS_ARIA_LABEL:"Aller sur le site de Veo-Labs",TABS_CHAPTERS_ARIA_LABEL:"Afficher les chapitres",TABS_TIMECODES_ARIA_LABEL:"Afficher les indexes",TABS_TAGS_ARIA_LABEL:"Afficher les tags"}}),e.constant("oplPlayerErrors",{MEDIA_ERR_NO_SOURCE:0,MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4,MEDIA_ERR_PERMISSION:5,MEDIA_ERR_UNKNOWN:6}),e.config(function(){"undefined"!=typeof videojs&&videojs.Html5DashJS&&videojs.Html5DashJS.hook&&videojs.Html5DashJS.hook("beforeinitialize",function(e,t){videojs&&videojs.log&&t.updateSettings({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE}})})})}(),function(){function e(o){var n=navigator.language||navigator.browserLanguage;function t(e){return 0<=Object.keys(o).indexOf(e)}return{translate:function(e,t){var l=o[n]&&o[n][e]||e;return l===e&&(l=o.en[e]||e),t&&(e=new RegExp(Object.keys(t).join("|"),"gi"),l=l.replace(e,function(e){return t[e]})),l},isLanguageSupported:t,setLanguage:function(e){n=t(e)?e:"en"},getLanguage:function(){return n}}}angular.module("ov.player").service("oplI18nService",e),e.$inject=["oplI18nTranslations"]}(angular),function(){function e(r,a){function i(e,t){t=t||50;function l(){if(e())return r.when();var t=r.defer();return n=a(function(){return e()?t.resolve():void l().then(function(){t.resolve()}).catch(function(e){t.reject(e)})},10),t.promise}var o=r.defer(),n=null;return r.race([a(function(){return 0},t),l()]).then(function(e){0===e?o.reject("Timed out"):o.resolve()}).catch(function(e){o.reject(e)}).finally(function(){n&&a.cancel(n)}),o.promise}return{waitForElement:function(e,t,l){if(l=l||50,!e||!t)return r.reject("Parent element or selector not specified");var o=r.defer();return i(function(){return!!e.querySelector(t)},l).then(function(){o.resolve()}).catch(function(e){o.reject(e)}),o.promise},waitForElementDimension:function(o,n,e){if(e=e||50,!o)return r.reject("Element not specified");var t=r.defer(),a=null;return i(function(){var e=o.getBoundingClientRect();a={bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width,clientWidth:o.clientWidth,clientHeight:o.clientHeight};for(var t=0;t<n.length;t++){var l=n[t];if(void 0!==l.notEqual&&a[l.property]===l.notEqual||void 0!==l.equal&&a[l.property]!==l.equal)return!1}return!0},e).then(function(){t.resolve(a)}).catch(function(e){t.reject(e)}),t.promise},waitForController:function(e,t,l){if(l=l||50,!e)return r.reject("Element not specified");var o=r.defer(),n=null;return i(function(){return!!(n=angular.element(e).controller(t))},l).then(function(){o.resolve(n)}).catch(function(e){o.reject(e)}),o.promise}}}angular.module("ov.player").factory("oplDomFactory",e),e.$inject=["$q","$timeout"]}(),function(){function e(e){var t={};return e.PointerEvent?(t.UP="pointerup",t.DOWN="pointerdown",t.MOVE="pointermove",t.OVER="pointerover",t.OUT="pointerout"):e.TouchEvent?(t.UP="touchend",t.DOWN="touchstart",t.MOVE="touchmove"):(t.UP="mouseup",t.DOWN="mousedown",t.MOVE="mousemove",t.OVER="mouseover",t.OUT="mouseout"),{EVENTS:t,getUiEventCoordinates:function(e){var t={};return e.targetTouches&&0<e.targetTouches.length?(t.x=e.targetTouches[0].pageX,t.y=e.targetTouches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t}}}angular.module("ov.player").factory("oplEventsFactory",e),e.$inject=["$window"]}(),angular.module("ov.player").factory("OplPlayer",function(){function e(){}return e.prototype.init=function(e,t){if(!e)throw new Error("A player JQLite Element is expected as Player argument");this.jPlayerElement=e,this.selectedSourceIndex=0,this.playerId=t},e.prototype.setMediaSource=function(e){this.selectedSourceIndex=e},e.prototype.getSourceIndex=function(){return this.selectedSourceIndex},e.prototype.getMediaIds=function(){return this.media.mediaId},e.prototype.getId=function(){return this.playerId},e.prototype.setMedia=function(e){if(!e)throw new Error("Player needs a valid media");this.media=e},e.prototype.getSourceUrl=function(){return null},e.prototype.getMediaMIME=function(e){return e&&e.mimeType?e.mimeType:"video/mp4"},e.prototype.getAvailableDefinitions=function(){throw new Error("getAvailableDefinitions method not implemented for this player")},e.prototype.getMediaThumbnail=function(){throw new Error("getMediaThumbnail method not implemented for this player")},e.prototype.initialize=function(){throw new Error("initialize method not implemented for this player")},e.prototype.load=function(){throw new Error("load method not implemented for this player")},e.prototype.isPaused=function(){throw new Error("isPaused method not implemented for this player")},e.prototype.isPlaying=function(){throw new Error("isPlaying method not implemented for this player")},e.prototype.playPause=function(){throw new Error("play method not implemented for this player")},e.prototype.setVolume=function(){throw new Error("setVolume method not implemented for this player")},e.prototype.setTime=function(){throw new Error("setTime method not implemented for this player")},e.prototype.getPlayerType=function(){throw new Error("getPlayerType method not implemented for this player")},e.prototype.destroy=function(){throw new Error("destroy method not implemented for this player")},e.prototype.getDefinition=function(){throw new Error("getDefinition method not implemented for this player")},e.prototype.setDefinition=function(e){throw new Error("setDefinition method not implemented for this player")},e.prototype.isOverlayPlayPauseSupported=function(){throw new Error("isOverlayPlayPauseSupported method not implemented for this player")},e}),function(){function e(l,e,o){var n=this,a=[];l.url=null,l.position={x:0,y:0},Object.defineProperties(n,{preloading:{value:!1,writable:!0},preloaded:{value:!1,writable:!0},error:{value:!1,writable:!0},$onChanges:{value:function(e){var t;e.oplImage&&e.oplImage.currentValue&&(n.error=!1,-1===a.indexOf(n.oplImage.url||n.oplImage)&&(n.preloaded=!1,n.preloading=!1,!(t=n.oplImage.url||n.oplImage)||n.preloading||n.preloaded||(n.preloading=!0,o.get(t).then(function(){n.preloading=!1,n.preloaded=!0,a.push(t)}).catch(function(){n.preloading=!1,n.preloaded=!0,n.error=!0}))),l.url=n.oplImage.url||n.oplImage,l.position.x=n.oplImage.x||0,l.position.y=n.oplImage.y||0)}}})}angular.module("ov.player").controller("OplPreviewController",e),e.$inject=["$scope","$element","$http"]}(),function(){function e(e,t,l,o){var n,a,r,i=this,s=!1;function u(e){for(var t=0,l=0;l<r.length;l++)if(angular.element(r[l]).controller("oplButton").isFocused()){t=l;break}e=e?t+1:t-1;(e=e>=r.length?0:e)<0&&(e=r.length-1),angular.element(r[e]).controller("oplButton").focus()}function c(){o(function(){r=angular.element(l[0].querySelectorAll(".opl-tabs opl-button"))})}function p(e){if("Tab"!==e.key&&9!==e.keyCode||!e.shiftKey){if("ArrowLeft"===e.key||37===e.keyCode||"ArrowUp"===e.key||38===e.keyCode)u(!1);else{if("ArrowRight"!==e.key&&39!==e.keyCode&&"ArrowDown"!==e.key&&40!==e.keyCode)return;u(!0)}e.preventDefault()}else s=!0}function d(e){a.addClass("opl-focus"),s?s=!1:angular.element(r[0]).controller("oplButton").focus()}function f(e){s=!1,a.removeClass("opl-focus")}Object.defineProperties(i,{views:{value:[]},selectViewById:{value:function(e){e=t("filter")(i.views,{oplViewId:e},!0);0!=e.length&&i.select(e[0])}},addView:{value:function(e){i.views.length||i.select(e),i.views.push(e),c()}},removeView:{value:function(e){e=i.views.indexOf(e);-1!==e&&i.views.splice(e,1),c()}},select:{value:function(e){angular.forEach(i.views,function(e){e.selected=!1}),e.selected=!0}},getSelectedView:{value:function(e){for(var t=0;t<i.views.length;t++)if(i.views[t].selected)return i.views[t];return null}},$onInit:{value:function(){a=angular.element(l[0].querySelector(".opl-tabs-wrapper")),(n=angular.element(l[0].querySelector(".opl-tabs ul"))).on("keydown",p),n.on("focus",d),n.on("blur",f)}},$postLink:{value:function(){c()}},$onDestroy:{value:function(){n.off("keydown focus blur")}}}),e.handleButtonAction=function(e){i.oplOnSelect&&i.oplOnSelect({view:e})}}angular.module("ov.player").controller("OplTabsController",e),e.$inject=["$scope","$filter","$element","$timeout"]}(),function(){function e(e){var t,l,o=this;function n(e){t.addClass("opl-focus"),o.oplOnFocus&&o.oplOnFocus()}function a(e){t.removeClass("opl-focus")}Object.defineProperties(o,{$onInit:{value:function(){t=angular.element(e[0].querySelector(".opl-veo-labs-button")),(l=angular.element(e[0].querySelector("a"))).on("focus",n),l.on("blur",a)}},$onDestroy:{value:function(){l.off("focus blur")}}})}angular.module("ov.player").controller("OplVeoLabsButtonController",e),e.$inject=["$element"]}(),function(){function e(e,t){var l=this,o=t.controller("oplTabs");Object.defineProperties(l,{selected:{value:!1,writable:!0}}),o.addView(l),e.$watch("$ctrl.selected",function(e,t){e&&l.oplOnSelect&&l.oplOnSelect({id:l.oplViewId})}),e.$on("$destroy",function(){o.removeView(l)})}angular.module("ov.player").controller("OplViewController",e),e.$inject=["$scope","$element"]}(),function(e){function t(){this.media=null,this.cutStart=0,this.cutEnd=null,this.realDuration=null,this.cutsActivated=!1}function l(e,l){e.sort(function(e,t){return e[l]-t[l]})}t.prototype.setMedia=function(e){if(this.media=e,this.cutsActivated=!1,this.cutStart=0,this.cutEnd=null,this.hasCuts()){this.cutsActivated=!0;for(var t=0;t<this.media.cut.length;t++)"begin"===this.media.cut[t].type?this.cutStart=this.media.cut[t].value:"end"===this.media.cut[t].type&&(this.cutEnd=this.media.cut[t].value);this.cutStart<0&&(this.cutStart=0),null!==this.cutEnd&&this.cutStart>=this.cutEnd&&(this.cutStart=0,this.cutEnd=null)}this.media.timecodes&&l(this.media.timecodes,"timecode"),this.media.chapters&&l(this.media.chapters,"value"),this.media.tags&&l(this.media.tags,"value")},t.prototype.getMediaTimecodesByTime=function(){var e={},t=this.getMediaPointsOfInterest("timecodes");if(t)for(var l=0;l<t.length;l++){var o=t[l];e[o.timecode]={image:{small:o.image.small,large:o.image.large}}}return e},t.prototype.getMediaPointsOfInterest=function(e){var t="timecodes"===e?"timecode":"value";if(!this.media[e])return[];if(this.cutsActivated&&this.getRealDuration()){for(var l,o=[],n=this.getCutStart(),a=this.getCutEnd(),r=0;r<this.media[e].length;r++){var i=this.media[e][r][t],s=angular.copy(this.media[e][r]);if(s[t]=s[t]-this.cutStart,i<n)l=s;else{if(a<i)break;o.push(s)}}return void 0===l||0!==o.length&&0==o[0][t]||(l[t]=0,o.unshift(l)),o}return angular.copy(this.media[e])},t.prototype.getCutStart=function(){return this.cutsActivated&&this.cutStart||0},t.prototype.getCutEnd=function(){return this.cutsActivated?this.cutEnd||this.getRealDuration():0},t.prototype.getRealTime=function(e){return e+this.getCutStart()},t.prototype.getCutTime=function(e){return Math.max(e-this.getCutStart(),0)},t.prototype.getCutDuration=function(){return this.getRealDuration()?this.getCutEnd()-this.getCutStart():0},t.prototype.getCutPercent=function(e){if(this.getRealDuration()){var t=this.getRealDuration()*(e/100);return Math.min(Math.max((t-this.getCutStart())/this.getCutDuration()*100,0),100)}return e},t.prototype.getCutDurationPercent=function(e){if(this.getRealDuration()){var t=this.getRealDuration()*(e/100);return Math.min(t/this.getCutDuration()*100,100)}return e},t.prototype.setRealDuration=function(e){(this.cutStart>=e||this.cutEnd>e)&&(this.cutStart=0,this.cutEnd=null),this.realDuration=e},t.prototype.getRealDuration=function(){return this.realDuration},t.prototype.getDuration=function(){return this.cutsActivated?this.getCutDuration():this.getRealDuration()},t.prototype.getTime=function(e){return this.cutsActivated?this.getCutTime(e):e},t.prototype.setCutsStatus=function(e){this.cutsActivated=e},t.prototype.hasCuts=function(){return this.media&&this.media.cut&&this.media.cut.length},t.prototype.getPercent=function(e){e=e/this.getRealDuration()*100;return this.cutsActivated?this.getCutPercent(e):e},t.prototype.getTimeFromPercent=function(e){return this.getDuration()*(e/100)},t.prototype.getDurationPercent=function(e){return this.cutsActivated?this.getCutDurationPercent(e):e},t.prototype.findPointOfInterest=function(e,t){var l=this.getMediaPointsOfInterest(e),o="timecodes"===e?"timecode":"value";if(!l.length)return null;if(t<l[0][o])return null;for(var n=0;n<l.length;n++)if(t>=l[n][o]&&l[n+1]&&t<l[n+1][o])return l[n];return l[l.length-1]},e.value("oplPlayerService",t)}(angular.module("ov.player")),angular.module("ov.player").filter("oplMillisecondsToTime",function(){return function(e){if(e<0||isNaN(e))return"";e=parseInt(e);var t=parseInt(e/1e3%60),l=parseInt(e/6e4%60),e=parseInt(e/36e5%24);return("00"!==(e=e<10?"0"+e:e)?e+":":"")+(l=l<10?"0"+l:l)+":"+(t=t<10?"0"+t:t)}}),function(){function e(l){return function(e,t){return l.translate(e,t)}}angular.module("ov.player").filter("oplTranslate",e),e.$inject=["oplI18nService"]}(),function(re){function e(n,e,o,l,a,r,i,s,u,c,p,t){var d,f,m,g,h,v,y,E,T,S,O,b,I,A,w=this,_=e[0],C=i.children()[0],L=!1,P=!1,R=!0,D=null,V=null;function $(){return C.requestFullScreen||C.mozRequestFullScreen||C.webkitRequestFullScreen||C.msRequestFullscreen}function N(){return 1==("ontouchstart"in window||window.DocumentTouch&&_ instanceof DocumentTouch)}function k(e,t){return void 0===w[e]?t:JSON.parse(w[e])}function M(t){l(function(){var e=r.$root.$$phase;"$apply"===e||"$digest"===e?t():r.$apply(t)},1)}function F(e){var t;return"chapters"===e?t=i[0].querySelector(".opl-chapters-view opl-tiles"):"timecodes"===e?t=i[0].querySelector(".opl-timecodes-view opl-tiles"):"tags"===e&&(t=i[0].querySelector(".opl-tags-view opl-tiles")),re.element(t).controller("oplTiles")}function U(){if(f.hasClass("opl-masked"))return s.when();var t=s.defer();return requestAnimationFrame(function(){!function(){if(v)return s.when();var e=s.defer();return f.addClass("opl-masking"),v=l(function(){v=null,f.addClass("opl-masked"),f.removeClass("opl-masking"),e.resolve()},225),e.promise}().then(function(){t.resolve()}).catch(function(e){t.reject(e)})}),t.promise}function q(){if(!f.hasClass("opl-masking")&&!f.hasClass("opl-masked"))return s.when();var t=s.defer();return requestAnimationFrame(function(){!function(){if(v)return s.when();var e=s.defer();return f.removeClass("opl-masked"),f.addClass("opl-posting"),v=l(function(){v=null,f.removeClass("opl-posting"),e.resolve()},525),e.promise}().then(function(){t.resolve()}).catch(function(e){t.reject(e)})}),t.promise}function x(){if(!m.hasClass("opl-light-controls-posting")&&!m.hasClass("opl-light-controls-posted"))return s.when();var t=s.defer();return requestAnimationFrame(function(){!function(){if(y)return s.when();var e=s.defer();return m.removeClass("opl-light-controls-posted"),m.addClass("opl-light-controls-masking"),y=l(function(){y=null,m.removeClass("opl-light-controls-masking"),e.resolve()},150),e.promise}().then(function(){t.resolve()}).catch(function(e){t.reject(e)})}),t.promise}function B(){if(m.hasClass("opl-light-controls-posted"))return s.when();var t=s.defer();return requestAnimationFrame(function(){!function(){if(y)return s.when();var e=s.defer();return m.addClass("opl-light-controls-posting"),y=l(function(){y=null,m.addClass("opl-light-controls-posted"),m.removeClass("opl-light-controls-posting"),e.resolve()},150),e.promise}().then(function(){t.resolve()}).catch(function(e){t.reject(e)})}),t.promise}function j(){r.indexesDisplayed=w.timecodes.length&&k("oplIndexes",!0),r.chaptersDisplayed=w.chapters.length&&k("oplChapters",!0),r.tagsDisplayed=w.tags.length&&k("oplTags",!0);var e=r.chaptersDisplayed+r.tagsDisplayed+r.indexesDisplayed;r.tabsHidden=1===e||0===e,r.hidePoi=0===e;var t=I.getSelectedView();t&&3!==e&&(e=r.indexesDisplayed?"timecodes":r.chaptersDisplayed?"chapters":"tags",(!r.indexesDisplayed&&"timecodes"===t.oplViewId||!r.chaptersDisplayed&&"chapters"===t.oplViewId||!r.tagsDisplayed&&"tags"===t.oplViewId)&&r.handleViewSelect({oplViewId:e}))}function H(e){var t=[];if(e)for(var l=0;l<e.length;l++){var o=e[l],n=o.value;Object.prototype.hasOwnProperty.call(o,"timecode")&&(n=o.timecode);n={id:l,type:Object.prototype.hasOwnProperty.call(o,"image")?"image":"text",title:o.name,time:n,description:o.description,file:o.file,abstract:!0};o.image&&(n.image={small:{url:o.image.small.url||o.image.small,x:o.image.small.x||0,y:o.image.small.y||0},large:o.image.large}),t.push(n)}return t}function z(){var e;T&&(w.chapters=H(T.getMediaPointsOfInterest("chapters")),w.tags=H(T.getMediaPointsOfInterest("tags")),w.timecodes=H(T.getMediaPointsOfInterest("timecodes")),w.timecodes.length&&(e=T.findPointOfInterest("timecodes",w.time),w.area2ImageUrl=e?e.image.large:null),j())}function W(){var e;w.player&&(e=w.player&&w.player.getAvailableDefinitions()||null,r.settingsIconDisplayed=!!(e||w.mediaSources&&1<w.mediaSources.length)&&r.settingsIconDisplayed,r.volumeIconDisplayed=r.volumeIconDisplayed&&!N(),r.templateSelectorDisplayed=k("oplTemplateIcon",!0)&&r.indexesDisplayed)}function G(){var e,t;T&&(e=!1,D=re.copy(w.oplData)||{},(t=D)&&(t.mediaId&&!Array.isArray(t.mediaId)&&(t.mediaId=[t.mediaId]),t.sources&&!Array.isArray(t.sources)&&(t.sources=[t.sources])),T.setMedia(D),T.setCutsStatus(R),w.player?w.player.setMedia(D):(e=!0,function(){if(D.mediaId&&D.mediaId.length){var e=w.oplPlayerType||"html",t="player_"+(new Date).getUTCMilliseconds();switch(r.mediaTemplate="opl-"+e+".html",D.language=w.language,e.toLowerCase()){case"youtube":var l=n.get("OplYoutubePlayer");w.player=new l(i,D,t);break;case"vimeo":var o=n.get("OplVimeoPlayer");w.player=new o(i,D,t);break;case"html":o=n.get("OplHtmlPlayer");w.player=new o(i,D,t);break;default:throw new Error("Player "+e+" is not supported")}}}()),w.player&&(w.timecodes=[],w.chapters=[],w.tags=[],w.area2ImageUrl=null,w.playerId=w.player.getId(),w.selectedTemplate=A.FULL_1,w.playing=!1,w.fullscreenEnabled=!1,w.loading=!0,w.initializing=!0,w.error=null,w.volume=100,w.loadedStart=0,w.loadedPercent=0,w.seenPercent=0,w.time=0,w.duration=0,r.lightVolume=100,r.overlayPlayPauseSupported=w.player.isOverlayPlayPauseSupported(),!P||(t=a.getObject("videoStopped_"+D.mediaId))&&(w.seenPercent=t.percent,w.time=t.time,h=w.time),null!==V&&(w.time=V,h=w.time),w.mediaDefinitions=w.player.getAvailableDefinitions(),w.sourceUrl=w.player.getSourceUrl(),w.mediaSources=function(e){for(var t=[],l=0;l<e.length;l++)t.push({id:e[l],label:o("oplTranslate")("CONTROLS_SETTINGS_SOURCE_LABEL",{"%source%":l+1})});return t}(D.mediaId),w.mediaQualities=re.copy(w.mediaDefinitions),w.selectedSource=w.mediaSources[w.player.getSourceIndex()].id,w.selectedDefinition=w.player.getDefinition(),j(),W(),r.fullViewportActivated&&!$()&&(w.fullscreenEnabled=!0,E=!0),c.setLanguage(w.language),e||(h=0,w.player.load())))}function Q(e){return e.stopImmediatePropagation(),M(function(){r.updateVolume(),w.error=null,w.loading=!1,w.initializing=!1,w.setTime(h),w.selectedDefinition=w.player.getDefinition(),i.triggerHandler("ready"),!L&&!S||w.player.isPlaying()||(S=!1,w.playPause())}),!1}function X(e){return e.stopImmediatePropagation(),M(function(){w.loading=!0,i.triggerHandler("waiting")}),!1}function Y(e){return e.stopImmediatePropagation(),M(function(){w.loading=!1,w.playing=!0,i.triggerHandler("playing")}),!1}function K(e,t){e.stopImmediatePropagation(),M(function(){T.setRealDuration(t),w.duration=T.getDuration(),!0===D.needPointsOfInterestUnitConversion?i.triggerHandler("needPoiConversion",t):(w.setTime(h),w.seenPercent=T.getPercent(h),z(),w.selectTemplate(w.oplTemplate),W(),O.reset(),i.triggerHandler("durationChange",w.duration))})}function J(e){return e.stopImmediatePropagation(),M(function(){w.mediaDefinitions=w.player.getAvailableDefinitions(),w.selectedDefinition=w.player.getDefinition(),w.mediaQualities=re.copy(w.mediaDefinitions),W(),w.loading=!1,w.playing=!0,i.triggerHandler("play")}),!1}function Z(e){return e.stopImmediatePropagation(),M(function(){w.playing=!1,i.triggerHandler("pause")}),!1}function ee(e,t){return e.stopImmediatePropagation(),M(function(){w.loadedStart=T.getTime(t.loadedStart),w.loadedPercent=T.getDurationPercent(t.loadedPercent),i.triggerHandler("loadProgress",{loadedStart:w.loadedStart,loadedPercent:w.loadedPercent})}),!1}function te(e,l){if(e.stopImmediatePropagation(),!w.initializing)return w.loading=!1,w.duration&&T.getTime(l.time)>=T.getDuration()?(w.setTime(0),P&&a.remove("videoStopped_"+D.mediaId),h=0,w.player.playPause(),i.triggerHandler("end")):M(function(){w.time=T.getTime(l.time),w.seenPercent=T.getPercent(l.time);var e=T.findPointOfInterest("timecodes",w.time);w.area2ImageUrl=e?e.image.large:null;var t={time:w.time,percent:w.seenPercent};i.triggerHandler("playProgress",t);e=new Date;e.setDate(e.getDate()+1),P&&a.putObject("videoStopped_"+D.mediaId,t,{expires:e})}),!1}function le(e){return e.stopImmediatePropagation(),M(function(){P&&a.remove("videoStopped_"+D.mediaId),w.time=w.seenPercent=0,h=0,w.playing=!1;var e=T.findPointOfInterest("timecodes",w.time);w.area2ImageUrl=e?e.image.large:null,T.hasCuts()&&w.setTime(0),i.triggerHandler("end")}),!1}function oe(e,t){M(function(){switch(w.loading=!1,w.initializing=!1,t.code){case p.MEDIA_ERR_NO_SOURCE:w.error=o("oplTranslate")("MEDIA_ERR_NO_SOURCE");break;case p.MEDIA_ERR_NETWORK:w.error=o("oplTranslate")("MEDIA_ERR_NETWORK");break;case p.MEDIA_ERR_DECODE:w.error=o("oplTranslate")("MEDIA_ERR_DECODE");break;case p.MEDIA_ERR_SRC_NOT_SUPPORTED:w.error=o("oplTranslate")("MEDIA_ERR_SRC_NOT_SUPPORTED");break;case p.MEDIA_ERR_PERMISSION:w.error=o("oplTranslate")("MEDIA_ERR_PERMISSION");break;default:w.error=o("oplTranslate")("MEDIA_ERR_DEFAULT")}i.triggerHandler("error",{code:t.code,message:w.error})})}function ne(e){w.controlsDisplayed&&!function e(t){return!!t&&(!!(t=re.element(t)).hasClass("opl-media-wrapper")||e(t.parent()[0]))}(e.relatedTarget)&&M(function(){w.controlsDisplayed=!1})}function ae(e){d&&l.cancel(d),w.controlsDisplayed||M(function(){w.controlsDisplayed=!0}),d=l(function(){M(function(){w.controlsDisplayed=!1})},5e3)}r.volumeIconDisplayed=!0,r.timeDisplayed=!0,r.indexesDisplayed=!1,r.chaptersDisplayed=!1,r.tagsDisplayed=!1,r.mediaTemplate=null,r.settingsIconDisplayed=!0,r.veoLabsIconDisplayed=!0,r.fullViewportActivated=!1,r.templateSelectorDisplayed=!0,r.fullscreenIconDisplayed=!0,r.overlayPlayPauseSupported=!1,Object.defineProperties(w,{language:{value:null,writable:!0},timecodes:{value:[],writable:!0},chapters:{value:[],writable:!0},tags:{value:[],writable:!0},volume:{value:100,writable:!0},player:{value:null,writable:!0},duration:{value:0,writable:!0},time:{value:0,writable:!0},seenPercent:{value:0,writable:!0},loadedStart:{value:0,writable:!0},loadedPercent:{value:0,writable:!0},selectedTemplate:{value:"split_50_50",writable:!0},area2ImageUrl:{value:null,writable:!0},fullscreenEnabled:{value:!1,writable:!0},playing:{value:!1,writable:!0},playerId:{value:null,writable:!0},mediaDefinitions:{value:[],writable:!0},selectedDefinition:{value:null,writable:!0},selectedSource:{value:null,writable:!0},sourceUrl:{value:null,writable:!0},loading:{value:!1,writable:!0},initializing:{value:!1,writable:!0},error:{value:null,writable:!0},mediaSources:{value:[],writable:!0},mediaQualities:{value:[],writable:!0},controlsDisplayed:{value:!0,writable:!0},$onInit:{value:function(){f=re.element(i[0].querySelector(".opl-media-wrapper")),g=re.element(i[0].querySelector(".opl-index-preview")),h=0,E=!1,r.previewDisplayed=!1,r.touchDevice=N(),f.on("mousemove "+t.EVENTS.DOWN,ae),f.on("mouseout",ne),i.on("oplReady",Q),i.on("oplWaiting",X),i.on("oplPlaying",Y),i.on("oplDurationChange",K),i.on("oplPlay",J),i.on("oplPause",Z),i.on("oplLoadProgress",ee),i.on("oplPlayProgress",te),i.on("oplEnd",le),i.on("oplError",oe)}},$postLink:{value:function(){l(function(){T=new u,m=re.element(i[0].querySelector(".opl-light-controls")),I=re.element(i[0].querySelector(".opl-tabs")).controller("oplTabs");var e=re.element(i[0].querySelector(".opl-template-selector")),t=re.element(i[0].querySelector(".opl-controls .opl-time-bar .opl-slider")),l=re.element(m[0].querySelector(".opl-time-bar .opl-slider"));O=t.controller("oplSlider"),b=l.controller("oplSlider"),A=e.controller("oplTemplateSelector").TEMPLATES,G()})}},$onDestroy:{value:function(){w.player&&w.player.destroy(),f.off(t.EVENTS.OUT+" "+t.EVENTS.MOVE+" "+t.EVENTS.DOWN),i.off("oplReady oplWaiting oplPlaying oplDurationChange oplPlay oplPause oplLoadProgress oplPlayProgress oplEnd oplError")}},$onChanges:{value:function(e){var t;(e.oplFullscreenIcon&&e.oplFullscreenIcon.currentValue||e.oplVolumeIcon&&e.oplVolumeIcon.currentValue||e.oplTemplateIcon&&e.oplTemplateIcon.currentValue||e.oplSettingsIcon&&e.oplSettingsIcon.currentValue||e.oplVeoLabsIcon&&e.oplVeoLabsIcon.currentValue||e.oplFullViewport&&e.oplFullViewport.currentValue)&&(e.oplFullscreenIcon&&e.oplFullscreenIcon.currentValue&&(r.fullscreenIconDisplayed=$()&&k("oplFullscreenIcon",!0)),e.oplVolumeIcon&&e.oplVolumeIcon.currentValue&&(r.volumeIconDisplayed=k("oplVolumeIcon",!0)),e.oplTemplateIcon&&e.oplTemplateIcon.currentValue&&(r.templateSelectorDisplayed=k("oplTemplateIcon",!0)),e.oplSettingsIcon&&e.oplSettingsIcon.currentValue&&(r.settingsIconDisplayed=k("oplSettingsIcon",!0)),e.oplVeoLabsIcon&&e.oplVeoLabsIcon.currentValue&&(r.veoLabsIconDisplayed=k("oplVeoLabsIcon",!0)),e.oplFullViewport&&e.oplFullViewport.currentValue&&(r.fullViewportActivated=k("oplFullViewport",!1),r.fullViewportActivated&&!$()&&(w.fullscreenEnabled=!0,E=!0)),W()),e.oplTime&&e.oplTime.currentValue&&(r.timeDisplayed=k("oplTime",!0)),e.oplRememberPosition&&e.oplRememberPosition.currentValue&&(P=k("oplRememberPosition",!1)),e.oplStartTime&&e.oplStartTime.currentValue&&(t=e.oplStartTime.currentValue,V=void 0===t?null:Number(t)),e.oplLanguage&&e.oplLanguage.currentValue&&(t=e.oplLanguage.currentValue,w.language=void 0===t?"en":t,c.setLanguage(w.language)),e.oplAutoPlay&&e.oplAutoPlay.currentValue&&(L=k("oplAutoPlay",!1)),(e.oplChapters&&e.oplChapters.currentValue||e.oplIndexes&&e.oplIndexes.currentValue||e.oplTags&&e.oplTags.currentValue)&&z(),e.oplTemplate&&e.oplTemplate.currentValue&&w.selectTemplate(e.oplTemplate.currentValue),e.oplCuts&&e.oplCuts.currentValue&&(R=k("oplCuts",!0),!w.duration||e.oplData&&e.oplData.currentValue||(G(),w.duration=T.getDuration(),z(),w.selectTemplate(w.oplTemplate),W(),i.triggerHandler("durationChange",w.duration),w.setTime(0))),e.oplData&&e.oplData.currentValue&&(e=e.oplData,w.player&&w.player.setMediaSource(0),G(),e.previousValue&&!0===e.previousValue.needPointsOfInterestUnitConversion&&!e.currentValue.needPointsOfInterestUnitConversion&&(w.setTime(h),z(),w.selectTemplate(w.oplTemplate),W(),i.triggerHandler("durationChange",w.duration)))}},selectTemplate:{value:function(e){A&&(r.indexesDisplayed?w.selectedTemplate=e&&-1<Object.values(A).indexOf(e)?e:A.SPLIT_50_50:w.selectedTemplate=A.FULL_1)}},playPause:{value:function(e){w.loading||w.error||!w.player||w.player.playPause()}},setVolume:{value:function(e){w.volume=e,r.updateVolume()}},setTime:{value:function(e){w.player.setTime(T.getRealTime(e))}},setDefinition:{value:function(e){e&&e!==w.selectedDefinition&&(h=w.time,S=!w.player.isPaused(),w.loading=!0,w.initializing=!0,M(function(){w.player.setDefinition(e)}))}},setSource:{value:function(e){e!=w.player.getSourceIndex()&&(h=w.time,S=!w.player.isPaused(),w.player.setMediaSource(e),w.selectedSource=w.mediaSources[e].id,w.loading=!0,w.initializing=!0,M(function(){w.sourceUrl=w.player.getSourceUrl(),w.player.load(),w.mediaDefinitions=w.player.getAvailableDefinitions(),w.selectedDefinition=w.player.getDefinition(),w.mediaQualities=re.copy(w.mediaDefinitions)}))}}}),r.updateVolume=function(){w.player&&w.player.setVolume(w.volume)},r.handleTimeBarUpdate=function(e){w.setTime(e*w.duration/100)},r.toggleFullscreen=function(){$()?"undefined"!==_.fullScreenElement&&null===_.fullScreenElement||"undefined"!==_.msFullscreenElement&&null===_.msFullscreenElement||"undefined"!==_.mozFullScreen&&!1===_.mozFullScreen||"undefined"!==_.webkitFullscreenElement&&null===_.webkitFullscreenElement?(C.requestFullScreen?C.requestFullScreen():C.mozRequestFullScreen?C.mozRequestFullScreen():C.webkitRequestFullScreen?C.webkitRequestFullScreen():C.msRequestFullscreen&&C.msRequestFullscreen(),w.fullscreenEnabled=!0):(_.exitFullscreen?_.exitFullscreen():_.mozCancelFullScreen?_.mozCancelFullScreen():_.webkitExitFullscreen?_.webkitExitFullscreen():_.msExitFullscreen&&_.msExitFullscreen(),w.fullscreenEnabled=!1):(E=r.fullViewportActivated=!E,w.fullscreenEnabled=E)},r.handleSettingsUpdate=function(e,t){var l;if(e)return w.setDefinition(e);if(t)for(l=0;l<w.mediaSources.length;l++)if(w.mediaSources[l].id===t)return w.setSource(l)},r.handleViewSelect=function(e){var t=I.getSelectedView();if(!t)return I.selectViewById(e.oplViewId);F(t.oplViewId).reduceTile().then(function(){return x(),q()}).then(function(){I.selectViewById(e.oplViewId)})},r.handleViewSelected=function(e){l(function(){F(e).reset()})},r.handleControlFocus=function(){M(function(){w.controlsDisplayed=!0})},r.handleTimeBarOver=function(){w.timecodes.length&&M(function(){r.previewDisplayed=!0})},r.handleTimeBarOut=function(){w.timecodes.length&&M(function(){r.previewDisplayed=!1})},r.handleTimeBarMove=function(o,e,t){var n;w.timecodes.length&&(n=Math.max(t.width*(o/100),0),M(function(){var e,t,l;e=T.getTimeFromPercent(o),t=n,w.timecodes.length&&(l=T.findPointOfInterest("timecodes",e),r.previewTime=e,r.previewImage=l.image&&l.image.small,g.attr("style","transform: translateX("+(t-71)+"px);"))}))},r.handleTileSelect=function(e){w.setTime(e.time)},r.handleTileInfo=function(e,t){t=F(t);U().then(function(){B()}),t.enlargeTile(e.id)},r.handleTileClose=function(e,t){F(t).reduceTile(e.id),x(),q()},r.handleLightVolumeToggle=function(){b.reset()},r.$on("$includeContentLoaded",function(){l(function(){w.player.initialize()},1)})}angular.module("ov.player").controller("OplPlayerController",e),e.$inject=["$injector","$document","$filter","$timeout","$cookies","$scope","$element","$q","oplPlayerService","oplI18nService","oplPlayerErrors","oplEventsFactory"]}(angular),function(e){var B={FULL_1:"split_1",SPLIT_50_50:"split_50_50",SPLIT_25_75:"split_25_75",FULL_2:"split_2"};function t(e,r,n,t,i,l,a){var s,u,c,o,p=this,d=!1,f=!1,m=!1,g=!1,h=!1,v=!1,y=!1,E=[],T=[{id:B.SPLIT_50_50,label:t("oplTranslate")("CONTROLS_TEMPLATE_SPLIT_50_50_ARIA_LABEL"),hidden:!0},{id:B.FULL_1,label:t("oplTranslate")("CONTROLS_TEMPLATE_FULL_1_ARIA_LABEL"),hidden:!0},{id:B.FULL_2,label:t("oplTranslate")("CONTROLS_TEMPLATE_FULL_2_ARIA_LABEL"),hidden:!0},{id:B.SPLIT_25_75,label:t("oplTranslate")("CONTROLS_TEMPLATE_SPLIT_25_75_ARIA_LABEL"),hidden:!0}];function S(e){if(!c)return null;for(var t=0;t<c.length;t++)if(angular.element(c[t]).attr("data-id")===e)return c[t];return null}function O(t){T.forEach(function(e){e.id===t&&(e.hidden=!1)})}function b(t){T.forEach(function(e){e.id===t&&(e.hidden=!0)})}function I(){E.forEach(function(e){e=S(e);e&&(e=angular.element(e),angular.element(e[0]).attr("data-id")===r.selectedTemplate?(e.addClass("opl-selected"),e.attr("style","opacity: 1;transform: translateX(0px);"),O(angular.element(e).attr("data-id"))):(e.removeClass("opl-selected"),e.attr("style","opacity: 0;transform: translateX(0px);"),b(angular.element(e).attr("data-id"))))})}function A(){E.splice(0,E.length),T.forEach(function(e){e.id!==r.selectedTemplate&&E.push(e.id)}),E.unshift(r.selectedTemplate)}function w(e,t,l){return"transition-property: "+e+";-moz-transition-property: "+e+";-o-transition-property: "+e+";-webkit-transition-property: "+e+";transition-timing-function: "+t+";-moz-transition-timing-function: "+t+";-o-transition-timing-function: "+t+";-webkit-transition-timing-function: "+t+";transition-duration: "+l+";-moz-transition-duration: "+l+";-o-transition-duration: "+l+";-webkit-transition-duration: "+l+";"}function _(e){var t=S(e);if(!t.deactivationAnimationRequested||t.activationTimer)return i.when();var l=i.defer();return t.deactivationAnimationRequested=!1,t.activated=!1,angular.element(t).removeClass("opl-template-activation"),angular.element(t).addClass("opl-template-deactivation"),t.deactivationTimer=n(function(){angular.element(t).removeClass("opl-template-deactivation"),l.resolve()},150),l.promise}function C(){if(f||u.hasClass("opl-posted"))return i.when();var l=i.defer(),o=0,n=0;return f=!0,E.forEach(function(e){var t=S(e);t&&(t=angular.element(t)).attr("data-id")!==r.selectedTemplate&&(t.attr("style",w("transform, opacity","cubic-bezier(0.4, 0, 0.2, 1), cubic-bezier(0.4, 0, 0.2, 1)","150ms, 150ms")+"opacity: 0.60;transform: translateX(-"+32*++o+"px);"),t.on("transitionend",function(){t.off("transitionend"),O(t.attr("data-id")),++n==E.length-1&&(u.addClass("opl-posted"),f=!1,r.$apply(),l.resolve())}))}),l.promise}function L(){if(m||!u.hasClass("opl-posted"))return i.when();var l=i.defer(),o=0;return m=!0,E.forEach(function(e){var t=S(e);t&&(t=angular.element(t)).attr("data-id")!==r.selectedTemplate&&(t.attr("style",w("transform, opacity","linear, linear","75ms, 75ms")+"opacity: 0;transform: translateX(0);"),t.on("transitionend",function(){t.off("transitionend"),b(t.attr("data-id")),++o==E.length-1&&(u.removeClass("opl-posted"),m=!1,r.$apply(),l.resolve())}))}),l.promise}function P(e){for(var t=0;t<c.length;t++)if(angular.element(c[t]).attr("data-id")===e){c[t].focus();break}}function R(e){for(var t,l=0;l<c.length;l++)if(angular.element(c[l]).hasClass("opl-template-focus")){t=angular.element(c[l]).attr("data-id");break}var o=E.indexOf(t),o=e?o+1:o-1;(o=o>=E.length?0:o)<0&&(o=E.length-1),P(E[o])}function D(){u.removeClass("opl-focus"),c.forEach(function(e){angular.element(e).removeClass("opl-template-focus")}),requestAnimationFrame(function(){L()})}function V(e){p.oplOnUpdate&&e!==r.selectedTemplate&&p.oplOnUpdate({template:e})}function $(){d||requestAnimationFrame(function(){C().then(function(){o=n(function(){d||(o&&n.cancel(o),requestAnimationFrame(function(){L()}))},5e3)})})}function N(e){if("ArrowLeft"!==e.key&&37!==e.keyCode&&"ArrowDown"!==e.key&&40!==e.keyCode||d)if("ArrowUp"!==e.key&&38!==e.keyCode&&"ArrowRight"!==e.key&&39!==e.keyCode||d){if("Enter"!==e.key&&13!==e.keyCode)return"Tab"===e.key||9===e.keyCode?(h=!(g=!1),void((y=!!e.shiftKey)&&v&&(g=!0))):void 0;r.$apply(function(){V(angular.element(e.target).attr("data-id"))})}else requestAnimationFrame(function(){C()}),R(!1);else requestAnimationFrame(function(){C()}),R(!0);e.preventDefault()}function k(e){g?g=!1:(g=!0,u.addClass("opl-focus"),P(r.selectedTemplate),requestAnimationFrame(function(){C()}),p.oplOnFocus&&p.oplOnFocus())}function M(e){g||(D(),h=!1)}function F(e){angular.element(e.target).addClass("opl-template-focus"),v=!0}function U(e){!1===y&&h&&(h=g=!1,D()),v=!1,angular.element(e.target).removeClass("opl-template-focus")}function q(e){d||(e=angular.element(e.target).attr("data-id")?e.target:e.target.parentNode,s.off(a.EVENTS.UP,q),c.forEach(function(e){requestAnimationFrame(function(){e.deactivationAnimationRequested=!0,_(angular.element(e).attr("data-id"))}),e.activated=!1}),V(angular.element(e).attr("data-id")))}function x(e){var o;d||((o=angular.element(e.target).attr("data-id")?e.target:e.target.parentNode).activated||(u.hasClass("opl-posted")||$(),s.on(a.EVENTS.UP,q),o.activated=!0,requestAnimationFrame(function(){var e,t,l;e=angular.element(o).attr("data-id"),t=i.defer(),l=S(e),angular.element(l).removeClass("opl-template-deactivation"),l.activationTimer&&n.cancel(l.activationTimer),l.deactivationTimer&&n.cancel(l.deactivationTimer),angular.element(l).addClass("opl-template-activation"),l.activationTimer=n(function(){l.activationTimer=null,requestAnimationFrame(function(){_(angular.element(l).attr("data-id")).then(function(){t.resolve()})})},225),t.promise})))}r.selectedTemplate=B.SPLIT_50_50,r.templates=T,Object.defineProperties(p,{TEMPLATES:{value:B},$onInit:{value:function(){s=angular.element(l.document.body),u=angular.element(e[0].querySelector(".opl-template-selector")),n(function(){c=e[0].querySelectorAll("button"),I(),angular.element(c).on("focus",F),angular.element(c).on("blur",U)}),u.on("keydown",N),u.on("focus",k),u.on("blur",M),u.on(a.EVENTS.DOWN,x)}},$onDestroy:{value:function(){u.off(a.EVENTS.DOWN+" focus blur keydown"),c&&angular.element(c).off("focus blur transitionend"),s.off(a.EVENTS.UP,q)}},$onChanges:{value:function(e){if(e.oplTemplate&&e.oplTemplate.currentValue){r.selectedTemplate;for(var t=0;t<T.length&&e.oplTemplate.currentValue!==T[t].id;t++);r.selectedTemplate=-1===t?T[0].id:e.oplTemplate.currentValue,u&&u.hasClass("opl-posted")?(o&&n.cancel(o),requestAnimationFrame(function(){!function(l){if(d||!u.hasClass("opl-posted"))return i.when();var o=i.defer(),n=0,a=0;return d=!0,E.forEach(function(e){var t=S(e);t&&((t=angular.element(t)).attr("data-id")===l?(t.addClass("opl-selected"),t.attr("style",w("transform, opacity","linear, linear","150ms, 150ms")+"opacity: 1;transform: translateX(0);")):(t.removeClass("opl-selected"),t.attr("style",w("transform, opacity","linear, linear","50ms, 50ms")+"opacity: 0;transform: translateX(-"+32*n+"px) translateY(32px);")),n++,t.on("transitionend",function(){t.off("transitionend"),(t.attr("data-id")===l?O:b)(t.attr("data-id")),++a===E.length&&(u.removeClass("opl-posted"),d=!1,r.$apply(),o.resolve())}))}),o.promise}(r.selectedTemplate).then(function(){I(),A(),P(r.selectedTemplate)})})):(A(),I())}}}})}e.controller("OplTemplateSelectorController",t),t.$inject=["$element","$scope","$timeout","$filter","$q","$window","oplEventsFactory"]}(angular.module("ov.player")),angular.module("ov.player").component("oplPlayer",{templateUrl:"opl-player.html",controller:"OplPlayerController",bindings:{oplData:"<",oplFullscreenIcon:"@?",oplVolumeIcon:"@?",oplTemplate:"@?",oplTemplateIcon:"@?",oplSettingsIcon:"@?",oplVeoLabsIcon:"@?",oplTime:"@?",oplFullViewport:"@?",oplLanguage:"@?",oplPlayerType:"@?",oplAutoPlay:"@?",oplRememberPosition:"@?",oplChapters:"@?",oplIndexes:"@?",oplTags:"@?",oplCuts:"@?",oplStartTime:"@?"}}),angular.module("ov.player").component("oplTemplateSelector",{templateUrl:"opl-templateSelector.html",controller:"OplTemplateSelectorController",bindings:{oplTemplate:"@?",oplLabel:"@?",oplOnUpdate:"&",oplOnFocus:"&"}}),function(){function e(o,l,t,e,n,a,r,i,s){var u,c,p,d,f,m,g,h,v,y,E,T,S,O,b,I,A,w,_,C,L,P,R=this,D=!1,V=!1,$=!1,N=!1,k=!1;function M(){if(!C||I)return a.when();var e=a.defer();return O=C=!1,c.removeClass("opl-activation"),c.addClass("opl-deactivation"),w=t(function(){c.removeClass("opl-deactivation"),e.resolve()},150),e.promise}function F(){if(!L||A)return a.when();var e=a.defer();return b=L=!1,E.removeClass("opl-attachment-activation"),E.addClass("opl-attachment-deactivation"),_=t(function(){E.removeClass("opl-attachment-deactivation"),e.resolve()},150),e.promise}function U(){return g&&g.length?g[0].clientHeight:0}function q(){return y&&y.length?y[0].clientHeight:0}function x(e){u.off(s.EVENTS.UP,x),requestAnimationFrame(function(){C=!0,M()}),O=!1,R.oplOnSelect&&R.oplOnSelect({tile:R.oplData})}function B(e){O||(O=!0,requestAnimationFrame(function(){var e;e=a.defer(),c.removeClass("opl-deactivation"),I&&t.cancel(I),w&&t.cancel(w),c.addClass("opl-activation"),I=t(function(){I=null,requestAnimationFrame(function(){M().then(function(){e.resolve()})})},225),e.promise}),u.on(s.EVENTS.UP,x))}function j(e){u.off(s.EVENTS.UP,j),requestAnimationFrame(function(){L=!0,F()}),b=!1}function H(e){b||(b=!0,requestAnimationFrame(function(){var e;e=a.defer(),E.removeClass("opl-attachment-deactivation"),A&&t.cancel(A),_&&t.cancel(_),E.addClass("opl-attachment-activation"),A=t(function(){A=null,requestAnimationFrame(function(){F().then(function(){e.resolve()})})},225),e.promise}),u.on(s.EVENTS.UP,j))}function z(e){(R.oplAbstract?function(e){if("Enter"===e.key||13===e.keyCode)R.oplOnSelect&&R.oplOnSelect({tile:R.oplData});else{if("ArrowUp"!==e.key&&38!==e.keyCode&&"ArrowDown"!==e.key&&40!==e.keyCode)return;var t=p.controller("oplButton");(t.isFocused()?R:t).focus()}e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}:function(e){if("ArrowUp"===e.key||38===e.keyCode||"ArrowLeft"===e.key||37===e.keyCode)if(S.isFocused())E?E[0].focus():v&&v.focus();else if(v&&v.isFocused())S.focus();else{if(!E||!E.hasClass("opl-focus"))return;(v||S).focus()}else if("ArrowDown"===e.key||40===e.keyCode||"ArrowRight"===e.key||39===e.keyCode)if(S.isFocused())v?v.focus():E&&E[0].focus();else if(v&&v.isFocused())(E?E[0]:S).focus();else{if(!E||!E.hasClass("opl-focus"))return;S.focus()}else{if(("Enter"!==e.key&&13!==e.keyCode||!S.isFocused())&&"Escape"!==e.key&&27!==e.keyCode)return;R.oplOnClose&&R.oplOnClose()}e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()})(e)}function W(e){c.addClass("opl-focus")}function G(e){c.removeClass("opl-focus")}function Q(e){E.addClass("opl-focus")}function X(e){E.removeClass("opl-focus")}function Y(e){c.hasClass("opl-over")||c.addClass("opl-over")}function K(e){c.hasClass("opl-over")&&c.removeClass("opl-over")}function J(){c.off(s.EVENTS.DOWN+" focus blur keydown"),s.EVENTS.OVER&&(d&&d.off(s.EVENTS.OVER+" "+s.EVENTS.OUT),f&&f.off(s.EVENTS.OVER+" "+s.EVENTS.OUT),m&&m.off(s.EVENTS.OVER+" "+s.EVENTS.OUT)),E&&E.off(s.EVENTS.DOWN+" focus blur"),u.off(s.EVENTS.UP,x),u.off(s.EVENTS.UP,j)}Object.defineProperties(R,{smallImagePreloading:{value:!1,writable:!0},smallImageError:{value:!1,writable:!0},largeImagePreloading:{value:!1,writable:!0},smallImagePreloaded:{value:!1,writable:!0},largeImageSize:{value:null,writable:!0},largeImageError:{value:!1,writable:!0},fileName:{value:null,writable:!0},focus:{value:function(){c&&c.length&&(R.oplAbstract?c[0].focus():S&&S.focus())}},isFocused:{value:function(){return c.hasClass("opl-focus")}},preload:{value:function(){"image"!==R.oplData.type||R.smallImagePreloaded||R.oplData.image&&R.oplData.image.small&&!R.smallImagePreloading&&(R.smallImagePreloading=!0,e.get(R.oplData.image.small.url).then(function(){R.smallImagePreloading=!1,R.smallImageError=!1,R.smallImagePreloaded=!0}).catch(function(){R.smallImagePreloading=!1,R.smallImagePreloaded=!0,R.smallImageError=!0}))}},getTileHeight:{value:function(){return U()+o.descriptionHeight+q()+16}},reset:{value:function(){var e;k&&($?N=!0:($=!(D=!(e=[])),V=!R.oplData.description,c=angular.element(l[0].querySelector(".opl-tile")),R.oplAbstract?e.push(i.waitForElement(l[0],".opl-abstract")):e.push(i.waitForElement(l[0],".opl-full")),a.all(e).then(function(){var e,t;return R.oplAbstract?(d=angular.element(l[0].querySelector(".opl-abstract .opl-title")),m=angular.element(l[0].querySelector(".opl-abstract .opl-access-time")),p=angular.element(l[0].querySelector(".opl-abstract opl-button")),f=angular.element(l[0].querySelector(".opl-abstract .opl-access-time-icon"))):(R.oplData.title&&(g=angular.element(l[0].querySelector(".opl-full .opl-title"))),R.oplData.description&&(h=angular.element(l[0].querySelector(".opl-full opl-scroller"))),R.oplData.file&&(y=angular.element(l[0].querySelector(".opl-full .opl-attachment")),E=angular.element(y[0].querySelector("a"))),T=angular.element(l[0].querySelector(".opl-close-button opl-button"))),J(),R.oplAbstract?(s.EVENTS.OVER&&(d.on(s.EVENTS.OVER,Y),d.on(s.EVENTS.OUT,K),f.on(s.EVENTS.OVER,Y),f.on(s.EVENTS.OUT,K),m.on(s.EVENTS.OVER,Y),m.on(s.EVENTS.OUT,K)),c.on(s.EVENTS.DOWN,B)):E&&(E.on(s.EVENTS.DOWN,H),E.on("focus",Q),E.on("blur",X)),c.on("focus",W),c.on("blur",G),c.on("keydown",z),R.oplData.file&&(e=R.oplData.file.url.match(/.*\/([^#?]*)/),R.fileName=e[1]),t=a.defer(),i.waitForElementDimension(c[0],[{property:"clientHeight",notEqual:0}]).then(function(e){t.resolve(e.clientHeight)},function(){t.resolve(c[0].clientHeight)}),t.promise}).then(function(e){P=e;var t,l=[];R.oplAbstract?R.oplOnReady&&($=!(D=!0),R.oplOnReady&&R.oplOnReady(),N&&(N=!1,R.reset())):(o.descriptionHeight=P&&R.oplData.description?P-U()-q()-16:0,R.oplData.description&&(e=i.waitForController(h[0],"oplScroller"),l.push(e),e.then(function(e){(v=e).reset()})),R.oplData.image&&R.oplData.image&&R.oplData.image.large&&!R.largeImagePreloading&&(R.largeImagePreloading=!0,(t=new Image).onload=function(){R.largeImagePreloading=!1,R.largeImageError=!1,R.largeImageSize={width:this.naturalWidth,height:this.naturalHeight},R.oplOnImagePreloaded&&R.oplOnImagePreloaded({tile:R.oplData,size:R.largeImageSize})},t.onerror=function(){R.largeImagePreloading=!1,R.largeImageError=!0,R.oplOnImageError&&R.oplOnImageError({tile:R.oplData})},t.src=R.oplData.image.large),t=i.waitForController(T[0],"oplButton"),l.push(t),t.then(function(e){S=e}),a.all(l).then(function(){$=!(D=!0),R.oplOnReady&&V&&R.oplOnReady(),N&&(N=!1,R.reset())}))})))}},$onInit:{value:function(){u=angular.element(r.document.body),o.descriptionHeight=0}},$postLink:{value:function(){k=!0,R.reset()}},$onChanges:{value:function(e){e.oplAbstract&&void 0!==e.oplAbstract.currentValue?t(function(){R.reset()}):e.oplData&&e.oplData.currentValue&&R.reset()}},$onDestroy:{value:function(){J()}}}),o.getTrustedHtml=function(e){return n.trustAsHtml(e)},o.handleMoreInfoAction=function(){R.oplOnMore&&R.oplOnMore({tile:R.oplData})},o.handleCloseAction=function(){R.oplOnClose&&R.oplOnClose({tile:R.oplData})},o.handleDescriptionScrollerOnReady=function(){V=!0,D&&R.oplOnReady&&R.oplOnReady()}}angular.module("ov.player").controller("OplTileController",e),e.$inject=["$scope","$element","$timeout","$http","$sce","$q","$window","oplDomFactory","oplEventsFactory"]}(),function(){function e(e,l,i,o,t,s,u,c,p){var d,f,m,n,g,h,v,y,a,E,r,T,S,O,b=this,I=null,A=null,w=8,_=40,C=t[0],L=0,P=!1,R=!1,D=!1,V=!1;function $(e,t){e=e||0,t=t||0;var l=h.controller("oplScroller").getScrollValue(),o=v&&v.height||0,n=v&&v.width||0,a=y.height-2*w-_,r=y.width-2*w;d.attr("style","--opl-tiles-enlarged-height: "+o+"px;--opl-tiles-enlarged-width: "+n+"px;--opl-tiles-enlarged-xpos: "+(l+w+(r-n)/2)+"px;--opl-tiles-enlarged-ypos: "+-(a-o)/2+"px;--opl-tiles-resized-height: "+t+"px;--opl-tiles-resized-width: "+e+"px;--opl-tiles-resized-xpos: "+(l+w+(r-e)/2)+"px;--opl-tiles-resized-ypos: "+-(a-t)/2+"px;")}function N(e){angular.element(f[e]).controller("oplTile").focus()}function k(e){for(var t=0,l=0;l<f.length;l++)if(angular.element(f[l]).controller("oplTile").isFocused()){t=l;break}e=e?t+1:t-1;N(e=(e=e>=f.length?0:e)<0?f.length-1:e)}function M(e){var t,l;m&&m.length&&(l=a.width,t=m[e],l=(e+1)*w+e*l,angular.element(t).attr("style","transform: translateX("+(I===e?"var(--opl-tiles-enlarged-xpos)":l+"px")+") translateY("+(I===e?"var(--opl-tiles-enlarged-ypos)":"0")+");--opl-tiles-reduced-xpos: "+l+"px;--opl-tiles-reduced-ypos: 0px;"))}function F(){var e=function(){if(y&&a){var e=h.controller("oplScroller").getScrollValue(),t=Math.round(m.length-(E-e)/(w+a.width)),e=Math.round(y.width/(w+a.width));return m.slice(t,t+e).map(function(e){return e.querySelector("opl-tile")})}}();e&&e.forEach(function(e){angular.element(e).controller("oplTile")&&angular.element(e).controller("oplTile").preload()})}function U(e){if(b.oplData&&f)for(var t,l=function(e){for(var t=0,l=0;l<f.length;l++){var o=angular.element(f[l]).controller("oplTile");if(o&&o.oplData.time>e)break;t=l}return t}(e),o=0;o<m.length;o++){var n=angular.element(m[o]);o<l?(n.removeClass("opl-selected"),n.addClass("opl-past")):o===l?(n.removeClass("opl-past"),n.addClass("opl-selected"),t=o,m&&m.length&&b.automaticScrollActivated&&h.controller("oplScroller").setScrollValue((w+a.width)*t)):n.removeClass("opl-past opl-selected")}}function q(e){if("Tab"!==e.key&&9!==e.keyCode||!e.shiftKey){if("ArrowLeft"===e.key||37===e.keyCode||"ArrowUp"===e.key||38===e.keyCode)null!==I?N(I):(k(!1),F());else if("ArrowRight"===e.key||39===e.keyCode||"ArrowDown"===e.key||40===e.keyCode)null!==I?N(I):(k(!0),F());else if("Home"===e.key||36===e.keyCode)N(null!==I?I:0);else{if("End"!==e.key&&35!==e.keyCode)return;null!==I?N(I):(N(f.length-1),F())}e.preventDefault()}else r=!0}function x(e){d.addClass("opl-focus"),r?r=!1:N(null!==I?I:0)}function B(e){r=!1,d.removeClass("opl-focus")}function j(e){b.reset()}function H(){d&&d.off("focus blur keydown"),angular.element(o).off("resize",j)}function z(e){if(!m||!m.length)return c.reject("Component not initialized");var t=c.defer();return $(),requestAnimationFrame(function(){!function(l){if(S)return c.when();for(var o=c.defer(),e=0;e<m.length;e++)e!==l&&angular.element(m[e]).addClass("opl-masking");return S=i(function(){S=null;for(var e,t=0;t<m.length;t++)t!==l&&((e=angular.element(m[t])).addClass("opl-masked"),e.removeClass("opl-masking"));o.resolve()},50),o.promise}(e).then(function(){return function(e){if(O)return c.when();var t=c.defer(),l=angular.element(m[e]);return l.addClass("opl-enlarging"),O=i(function(){O=null,l.addClass("opl-enlarged"),l.removeClass("opl-enlarging"),t.resolve()},600),t.promise}(e)}).then(function(){b.oplData[e].abstract=!1,M(I=e),A=I,b.scrollerDeactivated=!0,t.resolve()}).catch(function(e){t.reject(e)})}),t.promise}function W(){if(!m||!m.length)return c.reject("Component is not initialized");var t=c.defer();return requestAnimationFrame(function(){!function(t){if(S)return c.when();for(var e,l=c.defer(),o=0;o<m.length;o++)o!==t&&((e=angular.element(m[o])).removeClass("opl-masked"),e.addClass("opl-posting"));return S=i(function(){S=null;for(var e=0;e<m.length;e++)e!==t&&angular.element(m[e]).removeClass("opl-posting");l.resolve()},50),l.promise}(I).then(function(){return function(e){if(O)return c.when();var t=c.defer(),l=angular.element(m[e]);return l.addClass("opl-reducing"),l.removeClass("opl-enlarged opl-resized"),O=i(function(){O=null,l.removeClass("opl-reducing"),t.resolve()},500),t.promise}(I)}).then(function(){b.oplData[I].abstract=!0,A=I,I=null,M(A),b.scrollerDeactivated=!1,t.resolve()}).catch(function(e){t.reject(e)})}),t.promise}e.scrollerValue=0,Object.defineProperties(b,{automaticScrollActivated:{value:!1,writable:!0},scrollerDeactivated:{value:!1,writable:!0},enlargeTile:{value:function(e){if(!m||!m.length)return c.reject("Component not initialized");var t=c.defer();b.automaticScrollActivated=!1;var l=function(e){for(var t=0;t<m.length;t++)if(angular.element(m[t]).attr("data-id")===String(e))return t;return null}(e);return function(e){if(!y)return c.reject();var l=y.height-_-2*w,t=y.width-2*w,o=angular.element(f[e]);if("image"===b.oplData[e].type){var n=o.controller("oplTile").largeImageSize;return c.when({width:n?n.width:t,height:n?n.height:l})}var a=c.defer(),t=u.$new(!0),n=Math.max(y.width+w,E+w);t.ghostTile=angular.copy(b.oplData[e]),t.ghostTile.abstract=!1,t.handleReady=function(){var t=r.find("opl-tile").controller("oplTile").getTileHeight(l);p.waitForElementDimension(r[0],[{property:"height",notEqual:0}]).then(function(e){e.height=Math.min(l,t),e.width=y.width-2*w,r.remove(),a.resolve(e)})};var r,e=angular.element(C.createElement("opl-tile"));return(r=angular.element(C.createElement("li"))).addClass("opl-tile-wrapper opl-ghost-tile"),r.attr("style","transform: translateX("+n+"px);width: var(--opl-tiles-enlarged-width);height: auto;"),e.attr("opl-data","ghostTile"),e.attr("opl-abstract","ghostTile.abstract"),e.attr("opl-on-ready","handleReady()"),r.append(e),g.append(r),s(e)(t),a.promise}(l).then(function(e){v=e,z(l).then(function(){t.resolve()}).catch(function(e){t.reject(e)})}),t.promise}},reduceTile:{value:function(){return m&&m.length?null===I?c.when():W():c.reject("Component not initialized or no enlarged tile")}},reset:{value:function(){var t;D&&(P?R=!0:(P=!0,d=angular.element(l[0].querySelector(".opl-tiles")),g=angular.element(l[0].querySelector("ul")),f=l[0].querySelectorAll("opl-tile"),m=Array.prototype.slice.call(l[0].querySelectorAll("li")),h=angular.element(l[0].querySelector("opl-scroller")),n=angular.element(l[0].querySelector(".opl-tiles-content")),c.all([(t=c.defer(),p.waitForElementDimension(d[0],[{property:"clientWidth",notEqual:0},{property:"clientHeight",notEqual:0}]).then(function(e){t.resolve({width:e.clientWidth,height:e.clientHeight})},function(){t.resolve({width:d[0].clientWidth,height:d[0].clientHeight})}),t.promise),function(){if(!m.length)return c.when({width:0,height:0});var t=c.defer();return p.waitForElementDimension(m[0],[{property:"clientWidth",notEqual:0}]).then(function(e){t.resolve({width:e.clientWidth,height:e.clientHeight})},function(){t.resolve({width:m[0].clientWidth,height:m[0].clientHeight})}),t.promise}(),p.waitForController(h[0],"oplScroller")]).then(function(e){y=e[0],a=e[1],H(),d.on("focus",x),d.on("blur",B),d.on("keydown",q),angular.element(o).on("resize",j),f&&f.length&&f.forEach(function(e){e=angular.element(e).controller("oplTile");e&&e.reset()}),function(){if(m&&m.length){for(var e=a.width,t=0;t<m.length;t++)M(t);E=e*m.length+m.length*w+w,n.attr("style","width: "+E+"px;")}}(),h.controller("oplScroller").reset(),F(),U(b.oplTime),P=!1,R&&(R=!1,b.reset())})))}},$postLink:{value:function(){D=!0,i(function(){b.reset()})}},$onChanges:{value:function(e){e.oplData&&e.oplData.currentValue?b.reset():e.oplTime&&e.oplTime.currentValue&&1e3<=Math.abs(L-e.oplTime.currentValue)&&(L=e.oplTime.currentValue,U(b.oplTime))}},$onDestroy:{value:function(){H()}}}),e.handleTileSelect=function(e){b.oplOnTileSelect&&b.oplOnTileSelect({tile:e})},e.handleTileMoreInfo=function(e){b.oplOnTileInfo&&b.oplOnTileInfo({tile:e})},e.handleTileClose=function(e){b.oplOnTileClose&&b.oplOnTileClose({tile:e})},e.handleScrollerChange=function(){T?V=!0:(V=!1,F(),T=i(function(){T=null,V&&e.handleScrollerChange()},100))},e.handleScrollTouch=function(){b.automaticScrollActivated=!1},e.handleTileReady=function(e){null!==A&&e.id===b.oplData[A].id&&(N(A),A=null)},e.handleTileImageError=function(e){N(I)},e.handleTileImagePreload=function(e,t){var l,o,n=y.height-_-2*w,a=y.width-2*w,r=t.width/t.height;1<r&&1<a/n?(l=Math.min(a,t.width),n<(o=l/r)&&(o=Math.min(n,t.height),l=o*r)):(o=Math.min(n,t.height),a<(l=o*r)&&(l=Math.min(a,t.width),o=l/r)),$(l,o),requestAnimationFrame(function(){!function(){if(O)return c.when();var e=c.defer(),t=angular.element(m[I]);return t.removeClass("opl-enlarged"),t.addClass("opl-resizing"),O=i(function(){O=null,t.removeClass("opl-resizing"),t.addClass("opl-resized"),e.resolve()},50),e.promise}().then(function(){v.height=o,$(v.width=l,o),M(I),N(I)})})}}angular.module("ov.player").controller("OplTilesController",e),e.$inject=["$scope","$element","$timeout","$window","$document","$compile","$rootScope","$q","oplDomFactory"]}(),function(){function e(u,c,p,e,d,f,m){var g,h,v,y,E,l,n,a,r,o,T,S,O,b=this,i=p.controller("ngModel"),I=!1,A=!1,w=!1,_=!1;function C(){return 1==("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}function L(){var e,t,l,o;S&&T&&(e=c.value/100,t="horizontal"===b.oplOrientation?"scaleY":"scaleX",l="horizontal"===b.oplOrientation?"translateX":"translateY",o="horizontal"===b.oplOrientation?"width":"height",r=0,S<T&&(r=Math.max(S/T*S,32)),g.attr("style","transform: "+l+"("+e*(S-r)+"px)"+(a||n?" "+t+"(1.5)":"")+"; "+o+": "+r+"px;"))}function s(){var e;L(),T&&(e="horizontal"===b.oplOrientation?"scrollLeft":"scrollTop",S<T&&(v[0][e]=c.value*(T-S)/100))}function P(e){e=m.getUiEventCoordinates(e);return"horizontal"===b.oplOrientation?e.x:e.y}function R(e,t){e===c.value&&!t||(c.value=Math.min(100,Math.max(0,e||0)),i.$setViewValue(c.value),i.$validate(),s())}function D(e){y.hasClass("opl-scroller-over")||y.addClass("opl-scroller-over")}function V(e){y.hasClass("opl-scroller-over")&&y.removeClass("opl-scroller-over")}function $(e){g.hasClass("opl-thumb-over")||(g.addClass("opl-thumb-over"),n=!0,L())}function N(e){g.hasClass("opl-thumb-over")&&(g.removeClass("opl-thumb-over"),n=!1,L())}function k(e){e.preventDefault(),R((e=P(e=e)-O-o,Math.max(0,Math.min(100,e/(S-r)*100))))}function M(e){e.preventDefault(),l.off(m.EVENTS.UP,M),l.off(m.EVENTS.MOVE,k),g.removeClass("opl-thumb-active"),a=!1,L()}function F(e){var t;C()||(e.preventDefault(),g.addClass("opl-thumb-active"),a=!0,b.oplOnTouch&&b.oplOnTouch(),e=P(t=e),t=c.value*(S-r)/100,o=e-O-t,L(),l.on(m.EVENTS.UP,M),l.on(m.EVENTS.MOVE,k))}function U(e){b.reset()}function q(e){y.addClass("opl-scroller-focus")}function x(e){y.removeClass("opl-scroller-focus")}function B(e){var t=c.value;if("horizontal"===b.oplOrientation&&("ArrowLeft"===e.key||37===e.keyCode)||"vertical"===b.oplOrientation&&("ArrowUp"===e.key||38===e.keyCode))t=Math.max(0,t-(Number(b.oplStep)||1));else if("horizontal"===b.oplOrientation&&("ArrowRight"===e.key||39===e.keyCode)||"vertical"===b.oplOrientation&&("ArrowDown"===e.key||40===e.keyCode))t=Math.min(100,t+(Number(b.oplStep)||1));else if("Home"===e.key||36===e.keyCode)t=0;else{if("End"!==e.key&&35!==e.keyCode)return;t=100}e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),b.oplOnTouch&&b.oplOnTouch(),R(t)}function j(e){var t=b.getScrollValue();t+=e.deltaY,e.preventDefault(),b.oplOnTouch&&b.oplOnTouch(),b.setScrollValue(t)}function H(){E.off("keydown focus blur"),m.EVENTS.OVER&&y.off(m.EVENTS.OVER+" "+m.EVENTS.OUT),y.off("wheel"),g.off(m.EVENTS.DOWN),m.EVENTS.OVER&&g.off(m.EVENTS.OVER+" "+m.EVENTS.OUT),l.off(m.EVENTS.UP+" "+m.EVENTS.MOVE),angular.element(u).off("resize",U)}c.value=0,Object.defineProperties(b,{focus:{value:function(){E[0].focus()}},isFocused:{value:function(){return y.hasClass("opl-scroller-focus")}},getScrollValue:{value:function(){var e="horizontal"===b.oplOrientation?"scrollLeft":"scrollTop";return v[0][e]}},setScrollValue:{value:function(e){T&&S&&R(e/(T-S)*100)}},getContentSize:{value:function(){return T}},$onInit:{value:function(){var e;v=angular.element(p[0].querySelector(".opl-scroller-content")),l=angular.element(u.document.body),y=angular.element(p[0].querySelector(".opl-scroller")),E=angular.element(p[0].querySelector(".opl-scrollbar")),g=angular.element(p[0].querySelector(".opl-thumb")),C()&&(e="horizontal"===b.oplOrientation?"overflow-x":"overflow-y",v.attr("style",e+": scroll;"),I=!0,b.oplOnReady&&b.oplOnReady())}},$postLink:{value:function(){_=!0,e(function(){b.reset()})}},$onChanges:{value:function(e){e.oplDeactivated&&b.reset()}},$onDestroy:{value:function(){H()}},reset:{value:function(){var t,l,o,n,a,r,i,s;!C()&&_&&(A?w=!0:(A=!0,h=angular.element(p[0].querySelector(".opl-scroller-content > div")),d.all([(s=d.defer(),f.waitForElementDimension(h[0],[{property:"clientWidth",notEqual:h[0].clientWidth},{property:"clientHeight",notEqual:h[0].clientHeight}]).then(function(e){r=e.clientWidth,i=e.clientHeight,s.resolve("horizontal"===b.oplOrientation?r:i)},function(){r=h[0].clientWidth,i=h[0].clientHeight,s.resolve("horizontal"===b.oplOrientation?r:i)}),s.promise),(a=d.defer(),f.waitForElementDimension(v[0],[{property:"clientWidth",notEqual:v[0].clientWidth},{property:"clientHeight",notEqual:v[0].clientHeight}]).then(function(e){t=e.left,l=e.top,o=e.clientWidth,n=e.clientHeight,a.resolve({size:"horizontal"===b.oplOrientation?o:n,position:"horizontal"===b.oplOrientation?t:l})},function(){var e=v[0].getBoundingClientRect();t=e.left,l=e.top,o=v[0].clientWidth,n=v[0].clientHeight,a.resolve({size:"horizontal"===b.oplOrientation?o:n,position:"horizontal"===b.oplOrientation?t:l})}),a.promise)]).then(function(e){T=e[0],S=e[1].size,O=e[1].position,H(),b.oplDeactivated||(E.on("keydown",B),E.on("focus",q),E.on("blur",x),m.EVENTS.OVER&&(y.on(m.EVENTS.OVER,D),y.on(m.EVENTS.OUT,V)),y.on("wheel",j),g.on(m.EVENTS.DOWN,F),m.EVENTS.OVER&&(g.on(m.EVENTS.OVER,$),g.on(m.EVENTS.OUT,N)),angular.element(u).on("resize",U),L(),R(c.value,!0)),A=!1,I||(I=!0,b.oplOnReady&&b.oplOnReady()),w&&(w=!1,b.reset())})))}}}),i.$render=function(){R(i.$viewValue,!0)},i.$isEmpty=function(e){return!1}}angular.module("ov.player").controller("OplScrollerController",e),e.$inject=["$window","$scope","$element","$timeout","$q","oplDomFactory","oplEventsFactory"]}(),function(){function e(t,e,n,a,l,o,r){var i,s,u,c,p,d,f=this,m=!1,g=!1,h=!1;function v(e){if(!p)return null;for(var t=0;t<p.length;t++)if(angular.element(p[t]).attr("data-id")===e)return p[t];return null}function y(e){for(var t=0;t<p.length;t++)if(angular.element(p[t]).attr("data-id")===e){p[t].focus();break}}function E(e){for(var t=0;t<p.length&&!angular.element(p[t]).hasClass("opl-focus");t++);e=e?t+1:t-1;(e=e>=p.length?0:e)<0&&(e=p.length-1),y(angular.element(p[e]).attr("data-id"))}function T(e){var t=v(e);if(!t||!t.deactivationAnimationRequested||t.activationTimer)return a.when();var l=a.defer();return t.deactivationAnimationRequested=!1,t.activated=!1,angular.element(t).removeClass("opl-item-activation"),angular.element(t).addClass("opl-item-deactivation"),t.deactivationTimer=n(function(){angular.element(t).removeClass("opl-item-deactivation"),l.resolve()},150),l.promise}function S(e){f.settingsOpened||requestAnimationFrame(function(){!function(){if(d||f.settingsOpened)return a.when();var e=a.defer();c.addClass("opl-posting"),d=n(function(){d=null,c.addClass("opl-posted"),c.removeClass("opl-posting"),e.resolve()},250),e.promise}(),f.settingsOpened=!0,e||y(angular.element(p[0]).attr("data-id"))})}function O(e){f.settingsOpened&&requestAnimationFrame(function(){!function(){if(d||!f.settingsOpened)return a.when();var e=a.defer();c.addClass("opl-masking"),c.removeClass("opl-posted"),d=n(function(){d=null,c.removeClass("opl-masking"),e.resolve()},150),e.promise}(),f.settingsOpened=!1,s&&!e&&s[0].focus()})}function b(e,t){f.oplOnUpdate&&(e&&e!==f.oplQuality||t&&t!==f.oplSource)?f.oplOnUpdate({quality:e,source:t}):O()}function I(e){if("ArrowRight"===e.key||39===e.keyCode||"ArrowDown"===e.key||40===e.keyCode)E(!0);else if("ArrowUp"===e.key||38===e.keyCode||"ArrowLeft"===e.key||37===e.keyCode)E(!1);else if("Enter"===e.key||13===e.keyCode)t.$apply(function(){"quality"===angular.element(e.target).attr("data-type")?b(angular.element(e.target).attr("data-id")):b(null,angular.element(e.target).attr("data-id"))});else{if("Tab"===e.key||9===e.keyCode)return void(m=!0);if("Escape"!==e.key&&27!==e.keyCode)return;O()}e.preventDefault()}function A(e){e=angular.element(e.target).attr("data-id")?e.target:e.target.parentNode;i.off(r.EVENTS.UP,A),p.forEach(function(e){requestAnimationFrame(function(){e.deactivationAnimationRequested=!0,T(angular.element(e).attr("data-id"))}),e.activated=!1}),"quality"===angular.element(e).attr("data-type")?b(angular.element(e).attr("data-id")):b(null,angular.element(e).attr("data-id"))}function w(e){var o=angular.element(e.target).attr("data-id")?e.target:e.target.parentNode;o.activated||(o.activated=!0,i.on(r.EVENTS.UP,A),requestAnimationFrame(function(){var e,t,l;e=angular.element(o).attr("data-id"),t=a.defer(),(l=v(e))?(angular.element(l).removeClass("opl-item-deactivation"),l.activationTimer&&n.cancel(l.activationTimer),l.deactivationTimer&&n.cancel(l.deactivationTimer),angular.element(l).addClass("opl-item-activation"),l.activationTimer=n(function(){l.activationTimer=null,requestAnimationFrame(function(){T(e).then(function(){t.resolve()})})},225),t.promise):a.when()}))}function _(e){e=angular.element(e.target).attr("data-id")?e.target:e.target.parentNode;angular.element(e).addClass("opl-focus")}function C(e){e=angular.element(e.target).attr("data-id")?e.target:e.target.parentNode;angular.element(e).removeClass("opl-focus"),m&&(O(!0),m=!1)}function L(){O(!0)}function P(){p&&angular.element(p).off(r.EVENTS.DOWN+" keydown focus blur "+r.EVENTS.UP),i.off(r.EVENTS.UP,L),i.off(r.EVENTS.UP,A)}Object.defineProperties(f,{settingsOpened:{value:!1,writable:!0},reset:{value:function(){h&&(g=!0,p=c[0].querySelectorAll("li"),s=angular.element(e[0].querySelector(".opl-button")),u=angular.element(c[0].querySelector(".opl-dialog")),n(function(){c.attr("style","--opl-settings-dialog-height: "+u[0].clientHeight+"px;"),P(),angular.element(p).on("keydown",I),angular.element(p).on(r.EVENTS.DOWN,w),angular.element(p).on("focus",_),angular.element(p).on("blur",C),angular.element(i).on(r.EVENTS.UP,L),g=!1},500))}},$onInit:{value:function(){i=angular.element(l.document.body),c=angular.element(e[0].querySelector(".opl-settings"))}},$postLink:{value:function(){h=!0,n(function(){f.reset()})}},$onDestroy:{value:function(){P()}},$onChanges:{value:function(e){(e.oplQuality&&e.oplQuality.currentValue||e.oplSource&&e.oplSource.currentValue)&&O(),(e.oplQualities&&e.oplQualities.currentValue||e.oplSources&&e.oplSources.currentValue)&&f.reset()}},toggleSettings:{value:function(){g||(f.settingsOpened?O:S)()}}}),t.handleButtonFocus=function(){f.oplOnFocus&&f.oplOnFocus()}}angular.module("ov.player").controller("OplSettingsController",e),e.$inject=["$scope","$element","$timeout","$q","$window","oplDomFactory","oplEventsFactory"]}(),function(){function e(l,e,o,t,n,a,r){var i,s,u,c,p,d,f,m,g,h=this,v=e.controller("ngModel"),y=0;function E(){var e;i&&(e=l.value/100,g&&u.on("transitionend",function(){s.removeClass("opl-slider-in-transition"),u.off("transitionend"),g=!1}),requestAnimationFrame(function(){c.attr("style","transform: scaleX("+e+")"),u.attr("style","transform: translateX("+e*i.width+"px) translateX(-50%)")}))}function T(e){e!==l.value&&(e=Math.min(100,Math.max(0,e||0)),y&&(e=Math.round(e/y)*y),l.value=e,l.valueTextParameters={"%value%":l.value},v.$setViewValue(l.value),v.$validate(),E())}function S(e){e=r.getUiEventCoordinates(e).x-i.left;return Math.max(0,Math.min(100,e/i.width*100))}function O(e){var t=l.value;if("ArrowLeft"===e.key||37===e.keyCode||"ArrowDown"===e.key||40===e.keyCode)t=Math.max(0,t-(y||1));else if("ArrowUp"===e.key||38===e.keyCode||"ArrowRight"===e.key||39===e.keyCode)t=Math.min(100,t+(y||1));else if("Home"===e.key||36===e.keyCode)t=0;else{if("End"!==e.key&&35!==e.keyCode)return;t=100}e.preventDefault(),m=!1,s[0].focus(),T(t)}function b(e){m||(s.addClass("opl-slider-focus"),h.oplOnFocus&&h.oplOnFocus())}function I(e){m=!1,s.removeClass("opl-slider-focus")}function A(e){h.reset()}function w(e){e.preventDefault(),T(S(e))}function _(e){f.off(r.EVENTS.UP,_),f.off(r.EVENTS.MOVE,w),s.removeClass("opl-slider-active")}function C(e){g=m=!0,s.addClass("opl-slider-active"),s.addClass("opl-slider-in-transition"),f.on(r.EVENTS.UP,_),f.on(r.EVENTS.MOVE,w),T(S(e))}function L(e){var t;h.oplOnMove&&(e.preventDefault(),t=r.getUiEventCoordinates(e),h.oplOnMove({value:S(e),coordinates:t,sliderBoundingRectangle:i}))}function P(e){e.relatedTarget===s[0]||e.relatedTarget===u[0]||e.relatedTarget===c[0]||e.relatedTarget===p[0]||e.relatedTarget===d[0]||s.hasClass("opl-over")||(s.addClass("opl-over"),h.oplOnOver&&h.oplOnOver(),f.off(r.EVENTS.MOVE,L),f.on(r.EVENTS.MOVE,L))}function R(e){e.relatedTarget!==s[0]&&e.relatedTarget!==u[0]&&e.relatedTarget!==c[0]&&e.relatedTarget!==p[0]&&e.relatedTarget!==d[0]&&s.hasClass("opl-over")&&(s.removeClass("opl-over"),h.oplOnOut&&h.oplOnOut(),f.off(r.EVENTS.MOVE,L))}function D(){s.off("keydown focus blur "+r.EVENTS.DOWN),r.EVENTS.OVER&&s.off(r.EVENTS.OVER+" "+r.EVENTS.OUT),u.off("transitionend"),f.off(r.EVENTS.UP,_),f.off(r.EVENTS.MOVE,w),f.off(r.EVENTS.MOVE,L),angular.element(o).off("resize",A)}l.label="Select a value",l.valueText="",l.valueTextParameters=null,l.value=0,Object.defineProperties(h,{$onInit:{value:function(){f=angular.element(o.document.body),g=m=!1,s=angular.element(e[0].querySelector(".opl-slider")),u=angular.element(e[0].querySelector(".opl-slider-thumb-container")),c=angular.element(e[0].querySelector(".opl-slider-track")),d=angular.element(e[0].querySelector(".opl-slider-track-container")),p=angular.element(e[0].querySelector(".opl-slider-focus-ring")),h.reset()}},$onDestroy:{value:function(){D()}},$onChanges:{value:function(e){var t;e.oplStep&&e.oplStep.currentValue&&(t=e.oplStep.currentValue,y=t&&"undefined"!==t?parseInt(t):0),e.oplLabel&&e.oplLabel.currentValue&&(t=e.oplLabel.currentValue,l.label=void 0===t?"Select a value":t),e.oplValueText&&e.oplValueText.currentValue&&(t=e.oplValueText.currentValue,l.valueText=void 0===t?"":t)}},reset:{value:function(){if(g)return n.when();var t=n.defer();return D(),s.on("keydown",O),s.on("focus",b),s.on("blur",I),s.on(r.EVENTS.DOWN,C),r.EVENTS.OVER&&(s.on(r.EVENTS.OVER,P),s.on(r.EVENTS.OUT,R)),angular.element(o).on("resize",A),a.waitForElementDimension(s[0],[{property:"width",notEqual:0},{property:"width",notEqual:i?i.width:0}],50).then(function(e){i=e,E(),t.resolve()}).catch(function(e){i=s[0].getBoundingClientRect(),E(),t.resolve()}),t.promise}}}),v.$render=function(){h.reset().then(function(){T(v.$viewValue)})},v.$isEmpty=function(e){return!1}}angular.module("ov.player").controller("OplSliderController",e),e.$inject=["$scope","$element","$window","$timeout","$q","oplDomFactory","oplEventsFactory"]}(),angular.module("ov.player").component("oplTile",{templateUrl:"opl-tile.html",controller:"OplTileController",bindings:{oplData:"<",oplAbstract:"<",oplOnSelect:"&",oplOnMore:"&",oplOnClose:"&",oplOnReady:"&",oplOnImagePreloaded:"&",oplOnImageError:"&"}}),angular.module("ov.player").component("oplTiles",{templateUrl:"opl-tiles.html",controller:"OplTilesController",bindings:{oplData:"<",oplTime:"<",oplOnTileSelect:"&",oplOnTileInfo:"&",oplOnTileClose:"&"}}),angular.module("ov.player").component("oplScroller",{templateUrl:"opl-scroller.html",controller:"OplScrollerController",require:["?ngModel"],transclude:!0,bindings:{oplId:"@?",oplStep:"@?",oplNoSequentialFocus:"@?",oplDeactivated:"<",oplOrientation:"@?",oplOnTouch:"&",oplOnReady:"&"}}),angular.module("ov.player").component("oplSettings",{templateUrl:"opl-settings.html",controller:"OplSettingsController",bindings:{oplQualities:"<",oplSources:"<",oplQuality:"@?",oplSource:"@?",oplOnUpdate:"&",oplOnFocus:"&"}}),angular.module("ov.player").component("oplSlider",{templateUrl:"opl-slider.html",controller:"OplSliderController",require:["?ngModel"],bindings:{oplStep:"@?",oplLabel:"@?",oplValueText:"@?",oplNoSequentialFocus:"@?",oplOnFocus:"&",oplOnOver:"&",oplOnOut:"&",oplOnMove:"&"}}),function(){function e(e,t,l,o,n,a){var r,i,s,u,c,p,d=this;function f(){if(!c||s)return o.when();var e=o.defer();return p=c=!1,r.removeClass("opl-activation"),r.addClass("opl-deactivation"),u=t(function(){r.removeClass("opl-deactivation"),e.resolve()},150),e.promise}function m(){d.oplOnUpdate&&d.oplOnUpdate()}function g(e){"Enter"!==e.key&&13!==e.keyCode||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),l.$apply(m))}function h(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),i.off(a.EVENTS.UP,h),requestAnimationFrame(function(){c=!0,f()}),p=!1,d.focus(),m()}function v(e){p||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),p=!0,requestAnimationFrame(function(){var e;e=o.defer(),r.removeClass("opl-deactivation"),s&&t.cancel(s),u&&t.cancel(u),r.addClass("opl-activation"),s=t(function(){s=null,requestAnimationFrame(function(){f().then(function(){e.resolve()})})},225),e.promise}),i.on(a.EVENTS.UP,h))}function y(e){r.addClass("opl-focus"),d.oplOnFocus&&d.oplOnFocus()}function E(e){r.removeClass("opl-focus")}Object.defineProperties(d,{focus:{value:function(){r[0].focus()}},isFocused:{value:function(){return r.hasClass("opl-focus")}},$onInit:{value:function(){i=angular.element(n.document.body),(r=angular.element(e[0].querySelector(".opl-button"))).on("keydown",g),r.on("focus",y),r.on("blur",E),r.on(a.EVENTS.DOWN,v)}},$onDestroy:{value:function(){r.off(a.EVENTS.DOWN+" keydown focus blur"),i.off(a.EVENTS.UP,h),s&&t.cancel(s),u&&t.cancel(u)}}})}angular.module("ov.player").controller("OplButtonController",e),e.$inject=["$element","$timeout","$scope","$q","$window","oplEventsFactory"]}(),function(){function e(e,t,l,o,n,a){var r,i,s,u,c,p,d=this;function f(){if(!c||s)return o.when();var e=o.defer();return p=c=!1,i.removeClass("opl-activation"),i.addClass("opl-deactivation"),u=t(function(){i.removeClass("opl-deactivation"),e.resolve()},150),e.promise}function m(){d.oplOnUpdate&&d.oplOnUpdate({on:!l.on})}function g(e){"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),l.$apply(m))}function h(e){r.off(a.EVENTS.UP,h),d.oplOnIcon&&d.oplOffIcon&&requestAnimationFrame(function(){c=!0,f()}),p=!1,m()}function v(e){p||(p=!0,d.oplOnIcon&&d.oplOffIcon&&requestAnimationFrame(function(){var e;e=o.defer(),i.removeClass("opl-deactivation"),s&&t.cancel(s),u&&t.cancel(u),i.addClass("opl-activation"),s=t(function(){s=null,requestAnimationFrame(function(){f().then(function(){e.resolve()})})},225),e.promise}),r.on(a.EVENTS.UP,h))}function y(e){i.addClass("opl-focus"),d.oplOnFocus&&d.oplOnFocus()}function E(e){i.removeClass("opl-focus")}function T(){l.label=l.on?d.oplOnLabel:d.oplOffLabel}l.on=!1,l.onIcon=null,l.offIcon=null,l.label=null,Object.defineProperties(d,{$onInit:{value:function(){r=angular.element(n.document.body),(i=angular.element(e[0].querySelector(".opl-toggle-icon-button"))).on("keydown",g),i.on("focus",y),i.on("blur",E),i.on(a.EVENTS.DOWN,v)}},$onDestroy:{value:function(){i.off("keydown focus blur "+a.EVENTS.DOWN),r.off(a.EVENTS.UP,h),s&&t.cancel(s),u&&t.cancel(u)}},$onChanges:{value:function(e){var t;e.oplOn&&e.oplOn.currentValue&&(t=e.oplOn.currentValue,l.on=!(!t||"undefined"===t)&&JSON.parse(t),T()),e.oplOnIcon&&e.oplOnIcon.currentValue&&(t=e.oplOnIcon.currentValue,l.onIcon=t&&"undefined"!==t?t:null),e.oplOffIcon&&e.oplOffIcon.currentValue&&(t=e.oplOffIcon.currentValue,l.offIcon=t&&"undefined"!==t?t:null),(e.oplOffLabel&&e.oplOffLabel.currentValue||e.oplOnLabel&&e.oplOnLabel.currentValue)&&T()}}})}angular.module("ov.player").controller("OplToggleIconButtonController",e),e.$inject=["$element","$timeout","$scope","$q","$window","oplEventsFactory"]}(),function(){function e(l,e,t,o,n){var a,r,i,s,u,c,p=this,d=e.controller("ngModel"),f=!1;function m(e){return!!e&&(!!(e=angular.element(e)).hasClass("opl-volume")||m(e.parent()[0]))}function g(e,t){e===l.level&&t===p.muted||(l.level=Math.min(100,Math.max(0,e||0)),p.muted=!l.level||t||!1,l.sliderValue=p.muted?0:l.level,d.$setViewValue(p.muted?0:l.level),d.$validate())}function h(e){a.addClass("opl-volume-focus")}function v(e){a.removeClass("opl-volume-focus")}function y(e){u||c||f||m(e.relatedTarget)||(u=!0,requestAnimationFrame(function(){var e;e=o.defer(),a.addClass("opl-over"),s.on("transitionend",function(){s.off("transitionend"),e.resolve()}),e.promise.then(function(){f=!(u=!1),p.oplOnOpen&&p.oplOnOpen()})}))}function E(e){c||u||!f||m(e.relatedTarget)||(c=!0,requestAnimationFrame(function(){var e;e=o.defer(),a.removeClass("opl-over"),s.on("transitionend",function(){s.off("transitionend"),e.resolve()}),e.promise.then(function(){c=f=!1,p.oplOnClose&&p.oplOnClose()})}))}l.level=50,l.sliderValue=0,Object.defineProperties(p,{muted:{value:!1,writable:!0},$onInit:{value:function(){a=angular.element(e[0].querySelector(".opl-volume"))}},$postLink:{value:function(){t(function(){s=angular.element(e[0].querySelector(".opl-volume > div")),r=angular.element(e[0].querySelector(".opl-slider")),i=angular.element(e[0].querySelector(".opl-toggle-icon-button")),n.EVENTS.OVER&&(a.on(n.EVENTS.OVER,y),a.on(n.EVENTS.OUT,E)),r.on("focus",h),r.on("blur",v),i.on("focus",h),i.on("blur",v),s.on("transitionend",function(e){e.target===s[0]&&"width"===e.propertyName&&r.controller("oplSlider").reset()})})}},$onDestroy:{value:function(){n.EVENTS.OVER&&a.off(n.EVENTS.OVER+" "+n.EVENTS.OUT),r&&r.off("focus blur"),i&&i.off("focus blur"),s&&s.off("transitionend")}},toggleSound:{value:function(e){g(l.level,e)}},setLevel:{value:function(e){g(e,!1)}}}),d.$render=function(){g(d.$viewValue||0)},d.$isEmpty=function(e){return!1},l.handleFocus=function(){p.oplOnFocus&&p.oplOnFocus()}}angular.module("ov.player").controller("OplVolumeController",e),e.$inject=["$scope","$element","$timeout","$q","oplEventsFactory"]}(),angular.module("ov.player").component("oplButton",{templateUrl:"opl-button.html",controller:"OplButtonController",bindings:{oplIcon:"@?",oplLabel:"@?",oplNoSequentialFocus:"@?",oplOnUpdate:"&",oplOnFocus:"&"}}),angular.module("ov.player").component("oplToggleIconButton",{templateUrl:"opl-toggleIconButton.html",controller:"OplToggleIconButtonController",bindings:{oplOn:"@?",oplOffIcon:"@?",oplOnIcon:"@?",oplOffLabel:"@?",oplOnLabel:"@?",oplNoSequentialFocus:"@?",oplOnUpdate:"&",oplOnFocus:"&"}}),angular.module("ov.player").component("oplVolume",{templateUrl:"opl-volume.html",controller:"OplVolumeController",require:["?ngModel"],bindings:{oplNoSequentialFocus:"@?",oplOnFocus:"&",oplOnOpen:"&",oplOnClose:"&"}}),function(u){function e(o,e,t,l,n){function a(e){switch(e.type){case"progress":var t;1<=this.player.buffered().length&&(t=this.player.currentTime()/this.player.duration()||0,this.jPlayerElement.triggerHandler("oplLoadProgress",{loadedStart:100*Math.max(0,Math.min(t,1)),loadedPercent:100*this.player.bufferedPercent()}));break;case"durationchange":var l=this.player.duration()||this.media.metadata&&this.media.metadata.duration;this.jPlayerElement.triggerHandler("oplDurationChange",1e3*l);break;case"loadedmetadata":this.loaded=!0,this.jPlayerElement.triggerHandler("oplReady");break;case"play":this.jPlayerElement.triggerHandler("oplPlay");break;case"pause":this.jPlayerElement.triggerHandler("oplPause");break;case"ended":this.jPlayerElement.triggerHandler("oplEnd");break;case"waiting":this.jPlayerElement.triggerHandler("oplWaiting");break;case"playing":this.jPlayerElement.triggerHandler("oplPlaying");break;case"timeupdate":var l=this.player.currentTime(),o=l/this.player.duration()*100;this.jPlayerElement.triggerHandler("oplPlayProgress",{time:1e3*l,percent:o});break;case"error":o=this.player.error(),o=o&&o.code;this.player.networkState()==HTMLMediaElement.NETWORK_NO_SOURCE&&(o=n.MEDIA_ERR_NO_SOURCE),this.jPlayerElement.triggerHandler("oplError",{code:o})}}function r(){var e,t=this.media.sources[this.selectedSourceIndex].files,l=null;if(this.definition&&t)for(var o=0;o<t.length;o++)if(t[o].height===this.definition.height){l=t[o];break}e=(l=l||t&&t[0]||null)?[{src:l.link,type:"video/mp4"}]:this.media.sources[this.selectedSourceIndex].adaptive.map(function(e){var t={};return t.src=e.link,t.type=e.mimeType,t}),this.player.src(e),this.player.poster(this.media.thumbnail)}var i=["loadeddata","progress","playing","waiting","ended","durationchange","loadedmetadata","timeupdate","play","pause","error"];function s(e,t,l){o.prototype.init.call(this,e,l),this.setMedia(t),Object.defineProperties(this,{definition:{value:null,writable:!0}})}return((s.prototype=new o).constructor=s).prototype.getMediaThumbnail=function(){return this.media.thumbnail},s.prototype.initialize=function(){var e=this;this.loaded=!1,this.player=videojs(this.playerId,{techOrder:["html5"],autoplay:!1,preload:"metadata",playsinline:!0,html5:{nativeControlsForTouch:!1,nativeAudioTracks:!1,nativeVideoTracks:!1}}),this.handlePlayerEventsFn=u.bind(this,a);for(var t=0;t<i.length;t++)this.player.on(i[t],this.handlePlayerEventsFn);this.player.ready(function(){this.error_||e.load()})},s.prototype.load=function(){r.call(this)},s.prototype.getDefinition=function(){if(this.definition)return String(this.definition.height);var e=this.media.sources[this.selectedSourceIndex].files;return e&&e.length?String(e[0].height):void 0},s.prototype.setDefinition=function(e){for(var t=0;t<this.media.sources[this.selectedSourceIndex].files.length;t++)if(String(this.media.sources[this.selectedSourceIndex].files[t].height)===e){this.definition=this.media.sources[this.selectedSourceIndex].files[t],r.call(this);break}},s.prototype.isPaused=function(){return this.player.paused()},s.prototype.isPlaying=function(){return!this.isPaused()},s.prototype.playPause=function(){var e;this.player.paused()||this.player.ended()?void 0!==(e=this.player.play())&&e.then(function(){}).catch(function(){}):this.player.pause()},s.prototype.setVolume=function(e){this.player.volume(e/100)},s.prototype.setTime=function(e){e=parseInt(e)||.1,this.player.currentTime(e/1e3)},s.prototype.setMedia=function(e){o.prototype.setMedia.call(this,e);for(var t=0;t<this.media.sources.length;t++)this.media.sources[t].files&&this.media.sources[t].files.sort(function(e,t){return e.height<t.height?1:-1})},s.prototype.getPlayerType=function(){return"html"},s.prototype.getAvailableDefinitions=function(){var e=this.media.sources[this.selectedSourceIndex];if(e.adaptive&&e.adaptive.length)return null;var t=[];return e.files.forEach(function(e){t.push({id:String(e.height),label:e.height+"p",hd:720<=e.height})}),t},s.prototype.isOverlayPlayPauseSupported=function(){return!1},s.prototype.destroy=function(){this.handlePlayerEventsFn=u.bind(this,a);for(var e=u.element(this.player),t=0;t<i.length;t++)e.off(i[t],this.handlePlayerEventsFn);this.loaded=!1,this.player.dispose(),this.player=null},s}angular.module("ov.player").factory("OplHtmlPlayer",e),e.$inject=["OplPlayer","$window","$document","$sce","oplPlayerErrors"]}(angular),function(i){function e(o,e,l,t){function n(e,t){if(this.loaded){e={method:e};return t&&(e.value=t),this.player.contentWindow.postMessage(JSON.stringify(e),this.postMessageTargetOrigin)}return null}function a(e,t){if((t=e.data?JSON.parse(e.data):t).player_id===this.playerId){switch(t.event){case"ready":!function(){this.postMessageTargetOrigin="https://player.vimeo.com/video/"+this.media.mediaId[this.selectedSourceIndex],this.player=l[0].getElementById(this.playerId),this.loaded=!0,this.playing=0,n.call(this,"addEventListener","loadProgress"),n.call(this,"addEventListener","playProgress"),n.call(this,"addEventListener","play"),n.call(this,"addEventListener","pause"),n.call(this,"addEventListener","finish")}.call(this),n.call(this,"getDuration"),this.jPlayerElement.triggerHandler("oplReady");break;case"loadProgress":this.jPlayerElement.triggerHandler("oplLoadProgress",{loadedStart:0,loadedPercent:100*t.data.percent});break;case"playProgress":t.data.percent<=1&&this.jPlayerElement.triggerHandler("oplPlayProgress",{time:1e3*t.data.seconds,percent:100*t.data.percent});break;case"play":this.playing=1,this.jPlayerElement.triggerHandler("oplPlay");break;case"pause":this.playing=0,this.jPlayerElement.triggerHandler("oplPause");break;case"finish":this.playing=0,this.jPlayerElement.triggerHandler("oplEnd")}"getDuration"===t.method&&(this.duration=t.value,this.jPlayerElement.triggerHandler("oplDurationChange",1e3*this.duration))}}function r(e,t,l){o.prototype.init.call(this,e,l),this.setMedia(t)}return((r.prototype=new o).constructor=r).prototype.getSourceUrl=function(){return t.trustAsResourceUrl("//player.vimeo.com/video/"+this.media.mediaId[this.selectedSourceIndex]+"?api=1&player_id="+this.playerId)},r.prototype.getMediaThumbnail=function(){return null},r.prototype.initialize=function(){!function(){this.loaded=!1,this.handlePlayerEventsFn=i.bind(this,a),i.element(e).on("message",this.handlePlayerEventsFn)}.call(this)},r.prototype.load=function(){},r.prototype.isPaused=function(){return!this.playing},r.prototype.isPlaying=function(){return this.playing},r.prototype.playPause=function(){n.call(this,this.playing?"pause":"play")},r.prototype.setVolume=function(e){n.call(this,"setVolume",e/100)},r.prototype.setTime=function(e){e=parseInt(e)||0,n.call(this,"seekTo",String(e/1e3)),this.playing||this.jPlayerElement.triggerHandler("oplPlayProgress",{time:e,percent:e/this.duration*100})},r.prototype.getPlayerType=function(){return"vimeo"},r.prototype.getAvailableDefinitions=function(){return null},r.prototype.getDefinition=function(){},r.prototype.setDefinition=function(e){},r.prototype.isOverlayPlayPauseSupported=function(){return!0},r.prototype.destroy=function(){i.element(e).off("message",this.handlePlayerEventsFn),this.loaded=!1,this.playing=0,this.player=null},r}angular.module("ov.player").factory("OplVimeoPlayer",e),e.$inject=["OplPlayer","$window","$document","$sce"]}(angular),function(u){function e(a,r,o){function n(e,t){switch((t=e.data?JSON.parse(e.data):t).event){case"infoDelivery":void 0!==t.info.currentTime&&this.duration&&this.jPlayerElement.triggerHandler("oplPlayProgress",{time:1e3*t.info.currentTime,percent:t.info.currentTime/this.duration*100}),t.info.videoLoadedFraction&&this.jPlayerElement.triggerHandler("oplLoadProgress",{loadedStart:0,loadedPercent:100*t.info.videoLoadedFraction});break;case"onStateChange":var l;t.info!=YT.PlayerState.PLAYING?(this.playing=0,this.jPlayerElement.triggerHandler("oplPause"),t.info==YT.PlayerState.ENDED?this.jPlayerElement.triggerHandler("oplEnd"):-1==t.info&&this.jPlayerElement.triggerHandler("oplReady")):(this.playing=1,this.jPlayerElement.triggerHandler("oplPlay"),this.requestPause&&(this.requestPause=!1,this.player.pauseVideo()),l=this.player.getDuration(),!this.duration&&l&&(this.duration=l,this.jPlayerElement.triggerHandler("oplDurationChange",1e3*this.duration)))}}var i=["onStateChange","infoDelivery","infoDelivery","onPlaybackQualityChange","loadeddata","progress","playing","ended","timeupdate","error"];function s(){var l;this.ressourceLoaded&&this.apiLoaded&&((l=this).loaded=!1,this.player=new YT.Player(this.playerId,{playerVars:{fs:0,rel:0,autoplay:0,html5:1,theme:"light",modestbranding:1,color:"white",iv_load_policy:3,showinfo:0,controls:0,hl:this.media.language,enablejsapi:1},events:{onReady:function(){l.handlePlayerEventsFn=u.bind(l,n),u.element(r).on("message",l.handlePlayerEventsFn);for(var e=u.element(l.player),t=0;t<i.length;t++)e.on(i[t],l.handlePlayerEventsFn);l.loaded=!0,l.playing=0,l.load()},onError:function(e){var t;switch(e.data){case 100:case 101:case 150:t=o.MEDIA_ERR_PERMISSION;break;default:t=o.MEDIA_ERR_UNKNOWN}l.jPlayerElement.triggerHandler("oplError",{code:t})}},videoId:this.media.mediaId[this.selectedSourceIndex]}))}function e(e,t,l){var o=this,n="youtube-iframe-api";a.prototype.init.call(this,e,l),this.setMedia(t),this.requestPause=!1;t=document.createElement("script");t.setAttribute("id",n),t.src="https://www.youtube.com/iframe_api",r.onYouTubeIframeAPIReady=function(){o.apiLoaded=!0,s.call(o)},document.getElementById(n)?(this.apiLoaded=!0,s.call(o)):(n=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,n)}return((e.prototype=new a).constructor=e).prototype.getMediaThumbnail=function(){return null},e.prototype.initialize=function(){this.ressourceLoaded=!0,s.call(this)},e.prototype.playPause=function(){this.player.getPlayerState()===YT.PlayerState.PLAYING?this.player.pauseVideo():(this.requestPause=!1,this.player.playVideo())},e.prototype.setVolume=function(e){this.player.setVolume(e)},e.prototype.setTime=function(e){var t=this.player.getPlayerState();e=parseInt(e)||0,this.playing||t!==YT.PlayerState.CUED||(this.requestPause=!0),this.player.seekTo(e/1e3,!0),this.playing||this.jPlayerElement.triggerHandler("oplPlayProgress",{time:e,percent:e/this.duration*100})},e.prototype.getPlayerType=function(){return"youtube"},e.prototype.isPaused=function(){return this.player.getPlayerState()===YT.PlayerState.PAUSED},e.prototype.isPlaying=function(){return this.player.getPlayerState()===YT.PlayerState.PLAYING},e.prototype.load=function(){this.player.cueVideoById(this.media.mediaId[this.selectedSourceIndex])},e.prototype.getAvailableDefinitions=function(){var t=[];return this.player&&this.player.getAvailableQualityLevels().forEach(function(e){t.push({id:e,label:e,hd:"hd720"===e||"hd1080"===e||"highres"===e})}),t},e.prototype.setMedia=function(e){a.prototype.setMedia.call(this,e),this.duration=null},e.prototype.getDefinition=function(){return this.player?this.player.getPlaybackQuality():null},e.prototype.setDefinition=function(e){this.player.setPlaybackQuality(e),this.jPlayerElement.triggerHandler("oplReady")},e.prototype.isOverlayPlayPauseSupported=function(){return!0},e.prototype.destroy=function(){u.element(r).off("message",this.handlePlayerEventsFn),this.player.destroy(),this.loaded=!1,this.playing=0,this.player=null,this.duration=null},e}angular.module("ov.player").factory("OplYoutubePlayer",e),e.$inject=["OplPlayer","$window","oplPlayerErrors"]}(angular),angular.module("ov.player").component("oplPreview",{templateUrl:"opl-preview.html",controller:"OplPreviewController",bindings:{oplTime:"<",oplImage:"<"}}),angular.module("ov.player").component("oplTabs",{templateUrl:"opl-tabs.html",controller:"OplTabsController",transclude:!0,bindings:{oplNoTabs:"@?",oplOnSelect:"&"}}),angular.module("ov.player").component("oplVeoLabsButton",{templateUrl:"opl-veoLabsButton.html",controller:"OplVeoLabsButtonController",bindings:{oplLabel:"@?",oplOnFocus:"&"}}),angular.module("ov.player").component("oplView",{templateUrl:"opl-view.html",controller:"OplViewController",require:["^oplTabs"],transclude:!0,bindings:{oplLabel:"@?",oplClass:"@?",oplViewId:"@",oplIcon:"@",oplOnSelect:"&"}}),angular.module("ov.player").run(["$templateCache",function(e){e.put("opl-html.html",'<div class="opl-error" ng-if="$ctrl.error"><div><div ng-bind="$ctrl.error"></div></div></div><video id="{{$ctrl.playerId}}" class="opl-media-player video-js vjs-default-skin"><p>Your user agent does not support the HTML5 Video element.</p></video>'),e.put("opl-player.html",'<div ng-class="{\'opl-fullscreen\': fullViewportActivated}"><div class="opl-player" ng-class="{\'opl-no-poi\': hidePoi}"><div class="opl-media-wrapper opl-template-{{$ctrl.selectedTemplate}}"><div class="opl-overlay-play-button" ng-class="{\'opl-overlay-supported\': overlayPlayPauseSupported}"><opl-toggle-icon-button opl-on-update="$ctrl.playPause(on)"></opl-toggle-icon-button></div><div class="opl-media"><div class="opl-loader" ng-show="$ctrl.loading" ng-bind="\'LOADING\' | oplTranslate"></div><ng-include src="mediaTemplate"></ng-include></div><div class="opl-area-2"><div ng-style="{\'background-image\': $ctrl.area2ImageUrl ? \'url(\' + $ctrl.area2ImageUrl + \')\' : \'none\'}"></div></div><div class="opl-controls" ng-class="{\'opl-hidden\': !$ctrl.controlsDisplayed}"><div><div class="opl-time-bar"><div class="opl-index-preview" ng-show="previewDisplayed && !touchDevice"><opl-preview opl-time="previewTime" opl-image="previewImage"></opl-preview></div><opl-slider ng-model="$ctrl.seenPercent" ng-change="handleTimeBarUpdate($ctrl.seenPercent);" opl-label="{{\'CONTROLS_TIME_BAR_ARIA_LABEL\' | oplTranslate}}" opl-value-text="{{\'CONTROLS_TIME_BAR_ARIA_VALUE_TEXT\' | oplTranslate}}" opl-on-focus="handleControlFocus()" opl-on-over="handleTimeBarOver()" opl-on-out="handleTimeBarOut()" opl-on-move="handleTimeBarMove(value, coordinates, sliderBoundingRectangle)"></opl-slider></div><div class="opl-left-controls"><opl-toggle-icon-button opl-on="{{$ctrl.playing}}" opl-off-icon="play_arrow" opl-on-icon="pause" opl-off-label="{{\'CONTROLS_PLAY_ARIA_LABEL\' | oplTranslate}}" opl-on-label="{{\'CONTROLS_PAUSE_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.playPause(on)" opl-on-focus="handleControlFocus()"></opl-toggle-icon-button><opl-volume ng-model="$ctrl.volume" ng-change="updateVolume()" ng-show="volumeIconDisplayed" opl-on-focus="handleControlFocus()"></opl-volume><div class="opl-current-time" ng-show="timeDisplayed"><span>{{$ctrl.time | oplMillisecondsToTime}} / {{$ctrl.duration | oplMillisecondsToTime}}</span></div></div><div class="opl-right-controls"><opl-template-selector opl-template="{{$ctrl.selectedTemplate}}" opl-label="{{\'CONTROLS_TEMPLATES_SELECTOR_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.selectTemplate(template)" ng-show="templateSelectorDisplayed" opl-on-focus="handleControlFocus()"></opl-template-selector><opl-settings opl-qualities="$ctrl.mediaQualities" opl-sources="$ctrl.mediaSources" opl-quality="{{$ctrl.selectedDefinition}}" opl-source="{{$ctrl.selectedSource}}" opl-on-update="handleSettingsUpdate(quality, source)" opl-on-focus="handleControlFocus()" ng-show="settingsIconDisplayed"></opl-settings><opl-toggle-icon-button ng-show="fullscreenIconDisplayed" opl-on="{{$ctrl.fullscreenEnabled}}" opl-off-icon="fullscreen" opl-on-icon="fullscreen_exit" opl-off-label="{{\'CONTROLS_FULLSCREEN_ARIA_LABEL\' | oplTranslate}}" opl-on-label="{{\'CONTROLS_FULLSCREEN_EXIT_ARIA_LABEL\' | oplTranslate}}" opl-on-update="toggleFullscreen(on)" opl-on-focus="handleControlFocus()"></opl-toggle-icon-button><opl-veo-labs-button ng-show="veoLabsIconDisplayed" opl-label="{{\'CONTROLS_VEO_LABS_ARIA_LABEL\' | oplTranslate}}" opl-on-focus="handleControlFocus()"></opl-veo-labs-button></div></div></div></div><div class="opl-light-controls"><div><opl-toggle-icon-button opl-on="{{$ctrl.playing}}" opl-off-icon="play_arrow" opl-on-icon="pause" opl-off-label="{{\'CONTROLS_PLAY_ARIA_LABEL\' | oplTranslate}}" opl-on-label="{{\'CONTROLS_PAUSE_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.playPause(on)" opl-no-sequential-focus="true"></opl-toggle-icon-button><opl-volume ng-model="$ctrl.volume" ng-change="updateVolume()" ng-show="volumeIconDisplayed" opl-on-open="handleLightVolumeToggle()" opl-on-close="handleLightVolumeToggle()" opl-no-sequential-focus="true"></opl-volume><div class="opl-current-time" ng-show="timeDisplayed"><span>{{$ctrl.time | oplMillisecondsToTime}}</span></div><div class="opl-time-bar"><opl-slider ng-model="$ctrl.seenPercent" ng-change="handleTimeBarUpdate($ctrl.seenPercent);" opl-label="{{\'CONTROLS_TIME_BAR_ARIA_LABEL\' | oplTranslate}}" opl-value-text="{{\'CONTROLS_TIME_BAR_ARIA_VALUE_TEXT\' | oplTranslate}}" opl-no-sequential-focus="true"></opl-slider></div></div></div><opl-tabs opl-on-select="handleViewSelect(view)" opl-no-tabs="{{tabsHidden}}"><opl-view opl-label="{{\'TABS_CHAPTERS_ARIA_LABEL\' | oplTranslate}}" opl-class="opl-chapters-view" opl-view-id="chapters" opl-icon="book" opl-on-select="handleViewSelected(id)" ng-if="chaptersDisplayed"><opl-tiles opl-data="$ctrl.chapters" opl-time="$ctrl.time" opl-on-tile-select="handleTileSelect(tile)" opl-on-tile-info="handleTileInfo(tile, \'chapters\')" opl-on-tile-close="handleTileClose(tile, \'chapters\')"></opl-tiles></opl-view><opl-view opl-label="{{\'TABS_TIMECODES_ARIA_LABEL\' | oplTranslate}}" opl-class="opl-timecodes-view" opl-view-id="timecodes" opl-icon="image" opl-on-select="handleViewSelected(id)" ng-if="indexesDisplayed"><opl-tiles opl-data="$ctrl.timecodes" opl-time="$ctrl.time" opl-on-tile-select="handleTileSelect(tile)" opl-on-tile-info="handleTileInfo(tile, \'timecodes\')" opl-on-tile-close="handleTileClose(tile, \'timecodes\')"></opl-tiles></opl-view><opl-view opl-label="{{\'TABS_TAGS_ARIA_LABEL\' | oplTranslate}}" opl-class="opl-tags-view" opl-view-id="tags" opl-icon="note" opl-on-select="handleViewSelected(id)" ng-if="tagsDisplayed"><opl-tiles opl-data="$ctrl.tags" opl-time="$ctrl.time" opl-on-tile-select="handleTileSelect(tile)" opl-on-tile-info="handleTileInfo(tile, \'tags\')" opl-on-tile-close="handleTileClose(tile, \'tags\')"></opl-tiles></opl-view></opl-tabs></div></div>'),e.put("opl-vimeo.html",'<iframe ng-src="{{$ctrl.sourceUrl}}" id="{{$ctrl.playerId}}" class="opl-media-player" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),e.put("opl-youtube.html",'<div id="{{$ctrl.playerId}}" class="opl-media-player" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></div>'),e.put("opl-preview.html","<div class=\"opl-preview\" ng-style=\"{'background-image': (url && $ctrl.preloaded && !$ctrl.error) ? 'url(' + url + ')' : 'none', 'background-position': (url) ? '-' + position.x + 'px -' + position.y + 'px' : '0px 0px'}\"><div ng-if=\"$ctrl.preloading\" class=\"opl-loader\"></div><div class=\"opl-time\"><div ng-bind=\"$ctrl.oplTime | oplMillisecondsToTime\"></div></div><p ng-if=\"$ctrl.error\" class=\"opl-error-message\"><span ng-bind=\"'PREVIEW_IMAGE_PRELOAD_ERROR' | oplTranslate\"></span></p></div>"),e.put("opl-tile.html",'<div ng-class="{\'opl-type-image\': $ctrl.oplData.type === \'image\', \'opl-tile-abstract\': $ctrl.oplAbstract}" class="opl-tile" tabindex="-1"><div ng-if="$ctrl.smallImagePreloading || $ctrl.largeImagePreloading" class="opl-loader"></div><div class="opl-content" ng-style="{\'background-image\': ($ctrl.oplData.image && $ctrl.oplData.image.small && $ctrl.smallImagePreloaded && !$ctrl.smallImageError && $ctrl.oplAbstract) ? \'url(\' + $ctrl.oplData.image.small.url + \')\' : \'none\', \'background-position\': $ctrl.oplData.image.small ? \'-\' + $ctrl.oplData.image.small.x + \'px -\' + $ctrl.oplData.image.small.y + \'px\' : \'0px 0px\' }"><div class="opl-abstract" ng-if="$ctrl.oplAbstract"><p ng-if="$ctrl.smallImageError && $ctrl.oplData.type === \'image\'" class="opl-error-message"><span ng-bind="\'TILE_IMAGE_PRELOAD_ERROR\' | oplTranslate"></span></p><div class="opl-title" ng-if="$ctrl.oplData.type === \'text\'"><p ng-bind="$ctrl.oplData.title"></p></div><div class="opl-info"><i class="opl-icon opl-access-time-icon">access_time</i> <span class="opl-access-time" ng-bind="$ctrl.oplData.time | oplMillisecondsToTime"></span> <span class="opl-more-button"><opl-button opl-icon="more_horiz" opl-label="{{\'TILE_MORE_INFO_BUTTON_LABEL\' | oplTranslate}}" opl-no-sequential-focus="true" opl-on-update="handleMoreInfoAction()"></opl-button></span></div></div><div class="opl-full" ng-if="!$ctrl.oplAbstract"><img ng-if="$ctrl.oplData.image && $ctrl.oplData.image.large && !$ctrl.largeImagePreloading && $ctrl.largeImageSize && $ctrl.oplData.type === \'image\'" ng-src="{{$ctrl.oplData.image.large}}"><p ng-if="$ctrl.largeImageError" class="opl-error-message"><span ng-bind="\'TILE_IMAGE_PRELOAD_ERROR\' | oplTranslate"></span></p><div class="opl-close-button" ng-if="$ctrl.oplData.type === \'image\'"><opl-button opl-icon="close" opl-label="{{\'TILE_CLOSE_BUTTON_LABEL\' | oplTranslate}}" opl-no-sequential-focus="true" opl-on-update="handleCloseAction()"></opl-button></div><div class="opl-title-wrapper" ng-if="$ctrl.oplData.type === \'text\' && $ctrl.oplData.title"><div class="opl-title"><p ng-bind="$ctrl.oplData.title"></p></div><div class="opl-close-button"><opl-button opl-icon="close" opl-label="{{\'TILE_CLOSE_BUTTON_LABEL\' | oplTranslate}}" opl-no-sequential-focus="true" opl-on-update="handleCloseAction()"></opl-button></div></div><div class="opl-description" ng-style="{\'height\': descriptionHeight ? descriptionHeight + \'px\' : \'auto\'}" ng-if="$ctrl.oplData.type === \'text\' && $ctrl.oplData.description"><opl-scroller ng-model="scrollerValue" opl-id="opl-tile-{{$ctrl.oplData.id}}-description" opl-orientation="vertical" opl-no-sequential-focus="true" opl-on-ready="handleDescriptionScrollerOnReady()"><div class="opl-tile-description" ng-bind-html="getTrustedHtml($ctrl.oplData.description);"></div></opl-scroller></div><div class="opl-attachment" ng-if="$ctrl.oplData.type === \'text\' && $ctrl.oplData.file"><a ng-href="{{$ctrl.oplData.file.url + \'?filename=\' + $ctrl.oplData.file.originalName}}" download="{{$ctrl.oplData.file.originalName}}" target="_blank"><i class="opl-icon">attachment</i><span ng-bind="$ctrl.fileName"></span></a></div></div></div></div>'),e.put("opl-tiles.html",'<div class="opl-tiles" tabindex="0"><opl-scroller ng-model="scrollerValue" ng-change="handleScrollerChange()" opl-id="opl-tiles" opl-no-sequential-focus="true" opl-orientation="horizontal" opl-on-touch="handleScrollTouch()" opl-deactivated="$ctrl.scrollerDeactivated"><div class="opl-tiles-content"><ul><li ng-repeat="tile in $ctrl.oplData" class="opl-tile-wrapper" data-id="{{tile.id}}"><opl-tile opl-data="tile" opl-abstract="tile.abstract" opl-on-select="handleTileSelect(tile)" opl-on-more="handleTileMoreInfo(tile)" opl-on-close="handleTileClose(tile)" opl-on-ready="handleTileReady(tile)" opl-on-image-preloaded="handleTileImagePreload(tile, size)" opl-on-image-error="handleTileImageError(tile)"></opl-tile></li></ul></div></opl-scroller></div>'),e.put("opl-button.html",'<button class="opl-button" tabindex="{{($ctrl.oplNoSequentialFocus === \'true\' ? \'-1\' : \'0\')}}" aria-label="{{$ctrl.oplLabel}}"><i class="opl-icon" ng-bind="$ctrl.oplIcon"></i></button>'),e.put("opl-scroller.html",'<div class="opl-scroller" ng-class="{\'opl-no-scrollbar\': $ctrl.oplDeactivated, \'opl-horizontal\': $ctrl.oplOrientation === \'horizontal\', \'opl-vertical\': $ctrl.oplOrientation === \'vertical\'}"><div class="opl-scrollbar" tabindex="{{($ctrl.oplNoSequentialFocus === \'true\' ? \'-1\' : \'0\')}}" role="scrollbar" aria-controls="{{$ctrl.oplId}}" aria-value-min="0" aria-value-max="100" aria-orientation="{{$ctrl.oplOrientation}}" aria-valuenow="{{value}}" ng-show="!$ctrl.oplDeactivated"></div><div class="opl-thumb" ng-show="!$ctrl.oplDeactivated"></div><div id="{{$ctrl.oplId}}" class="opl-scroller-content" ng-transclude></div></div>'),e.put("opl-settings.html",'<div class="opl-settings"><opl-button opl-icon="settings" opl-label="{{\'CONTROLS_SETTINGS_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.toggleSettings()" opl-on-focus="handleButtonFocus()"></opl-button><div class="opl-dialog"><div><h1 ng-bind="\'CONTROLS_SETTINGS_QUALITIES_TITLE\' | oplTranslate" ng-if="$ctrl.oplQualities.length"></h1><ul ng-if="$ctrl.oplQualities.length"><li ng-repeat="quality in $ctrl.oplQualities" ng-class="{\'opl-selected\': quality.id === $ctrl.oplQuality, \'opl-hd\': quality.hd}" data-id="{{quality.id}}" data-type="quality" role="button" tabindex="-1" aria-label="{{quality.label}}" aria-hidden="{{!$ctrl.settingsOpened}}"><span ng-if="quality.id === $ctrl.oplQuality" class="opl-icon opl-check">check</span> <span ng-bind="quality.label" class="opl-item-label"></span> <span ng-if="quality.hd" class="opl-icon opl-hd">hd</span></li></ul><h1 ng-bind="\'CONTROLS_SETTINGS_SOURCES_TITLE\' | oplTranslate" ng-if="$ctrl.oplSources.length"></h1><ul ng-if="$ctrl.oplSources.length"><li ng-repeat="source in $ctrl.oplSources" ng-class="{\'opl-selected\': source.id === $ctrl.oplSource}" data-id="{{source.id}}" data-type="source" role="button" tabindex="-1" aria-label="{{source.label}}" aria-hidden="{{!$ctrl.settingsOpened}}"><span ng-if="source.id === $ctrl.oplSource" class="opl-icon opl-check">check</span> <span ng-bind="source.label" class="opl-item-label"></span></li></ul></div></div></div>'),e.put("opl-slider.html",'<div class="opl-slider" tabindex="{{($ctrl.oplNoSequentialFocus === \'true\' ? \'-1\' : \'0\')}}" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="{{value}}" aria-valuetext="{{valueText | oplTranslate:valueTextParameters}}" aria-label="{{label}}"><div class="opl-slider-track-container"><div class="opl-slider-track"></div></div><div class="opl-slider-thumb-container"><svg class="opl-slider-thumb" width="24" height="24"><circle cx="12" cy="12" r="12" stroke-width="0"></circle></svg><div class="opl-slider-focus-ring"></div></div></div>'),e.put("opl-tabs.html",'<div class="opl-tabs" ng-class="{\'opl-no-tabs\': $ctrl.oplNoTabs === \'true\'}"><div class="opl-tabs-wrapper"><ul role="tablist" aria-orientation="vertical" tabindex="0"><li ng-repeat="view in $ctrl.views" ng-class="{\'opl-selected\': view.selected}" role="tab" aria-selected="{{view.selected}}" aria-controls="{{view.oplViewId}}"><opl-button opl-icon="{{view.oplIcon}}" opl-label="{{view.oplLabel}}" opl-no-sequential-focus="true" opl-on-update="handleButtonAction(view)"></opl-button></li></ul></div><div ng-transclude></div></div>'),e.put("opl-templateSelector.html",'<div class="opl-template-selector" tabindex="0" aria-label="{{$ctrl.oplLabel}}" role="listbox" aria-orientation="horizontal"><button ng-repeat="template in templates" role="option" tabindex="-1" data-id="{{template.id}}" aria-label="{{template.label}}" aria-selected="{{template.id === selectedTemplate}}" aria-hidden="{{template.hidden}}"><i class="opl-icon" ng-bind="template.id"></i></button></div>'),e.put("opl-toggleIconButton.html",'<button class="opl-toggle-icon-button" tabindex="{{($ctrl.oplNoSequentialFocus === \'true\' ? \'-1\' : \'0\')}}" aria-pressed="{{on}}" aria-label="{{label}}"><i class="opl-icon opl-off" ng-show="!on" ng-bind="offIcon"></i> <i class="opl-icon opl-on" ng-show="on" ng-bind="onIcon"></i></button>'),e.put("opl-veoLabsButton.html",'<div class="opl-veo-labs-button"><a href="https://www.veo-labs.com" aria-label="{{$ctrl.oplLabel}}" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><clipPath id="rectangle-clip"><rect x="0" y="0" width="30" height="30"/></clipPath><clipPath id="circle-clip"><circle cx="10" cy="0" r="15"/></clipPath><path id="veo-labs-svg" d="M 17.86808,0.49483222 A 0.38770505,0.38770505 0 0 0 17.518257,0.75800184 L 14.196542,12.565335 12.232397,6.236425 A 0.39479723,0.39479723 0 0 0 11.895412,5.9732553 H 11.876158 5.9580504 A 0.19148847,0.19148847 0 0 0 5.8617681,5.9893098 0.76358985,0.76358985 0 0 0 5.4991075,6.1690354 L 0.06240295,11.560799 c -0.10647975,0.104014 -0.06864,0.192562 0.08023446,0.192562 H 6.2886126 a 0.74467742,0.74467742 0 0 0 0.4717797,-0.198983 l 0.4942456,-0.510292 3.7902871,12.198879 a 0.39479723,0.39479723 0 0 0 0.234284,0.237494 0.39479723,0.39479723 0 0 0 0.0098,0.0033 0.19858064,0.19858064 0 0 0 0.105905,0.02247 0.39479723,0.39479723 0 0 0 0.0033,0 h 5.921317 a 0.18912442,0.18912442 0 0 0 0.0064,0 0.3806129,0.3806129 0 0 0 0.01282,0 0.18912442,0.18912442 0 0 0 0.05777,-0.0098 0.3806129,0.3806129 0 0 0 0.0161,-0.0064 0.18912442,0.18912442 0 0 0 0.01926,-0.0064 0.3806129,0.3806129 0 0 0 0.0033,-0.0033 0.18912442,0.18912442 0 0 0 0.0033,0 0.3806129,0.3806129 0 0 0 0.227867,-0.237494 L 23.98838,0.75800184 A 0.19385254,0.19385254 0 0 0 23.789398,0.49483222 Z"/><use href="#veo-labs-svg" class="opl-veo-labs-logotype"/><use href="#veo-labs-svg" clip-path="url(#rectangle-clip)" class="opl-ripple"/><use href="#veo-labs-svg" clip-path="url(#circle-clip)" class="opl-light"/></svg></a></div>'),e.put("opl-view.html",'<div ng-show="$ctrl.selected" class="{{$ctrl.oplClass}}" role="tabpanel" id="{{$ctrl.oplViewId}}" ng-transclude></div>'),e.put("opl-volume.html",'<div class="opl-volume"><opl-toggle-icon-button opl-on="{{$ctrl.muted}}" opl-off-icon="volume_up" opl-on-icon="volume_off" opl-off-label="{{\'CONTROLS_VOLUME_MUTE_ARIA_LABEL\' | oplTranslate}}" opl-on-label="{{\'CONTROLS_VOLUME_UNMUTE_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.toggleSound(on)" opl-on-focus="handleFocus()" opl-no-sequential-focus="{{$ctrl.oplNoSequentialFocus}}"></opl-toggle-icon-button><div><opl-slider ng-model="sliderValue" ng-change="$ctrl.setLevel(sliderValue);" opl-step="1" opl-label="{{\'CONTROLS_VOLUME_CURSOR_ARIA_LABEL\' | oplTranslate}}" opl-value-text="{{\'CONTROLS_VOLUME_TEXT_ARIA_LABEL\' | oplTranslate}}" opl-on-focus="handleFocus()" opl-no-sequential-focus="{{$ctrl.oplNoSequentialFocus}}"></opl-slider></div></div>')}]);