"use strict";!function(a){var b=a.module("ov.player",["ngCookies"]);b.constant("oplI18nTranslations",{en:{LOADING:"Loading...",MEDIA_ERR_NO_SOURCE:"A network error caused the video download to fail part-way.",MEDIA_ERR_NETWORK:"A network error caused the video download to fail part-way.",MEDIA_ERR_DECODE:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",MEDIA_ERR_SRC_NOT_SUPPORTED:"The video could not be loaded, either because the server or network failed or because the format is not supported.",MEDIA_ERR_PERMISSION:"Video not available or private.",MEDIA_ERR_DEFAULT:"An unknown error occurred.",PREVIEW_IMAGE_PRELOAD_ERROR:"Image not available",TILE_MORE_INFO_BUTTON_LABEL:"More info",TILE_CLOSE_BUTTON_LABEL:"Close",TILE_IMAGE_PRELOAD_ERROR:"Image not available",CONTROLS_VOLUME_MUTE_ARIA_LABEL:"Mute",CONTROLS_VOLUME_UNMUTE_ARIA_LABEL:"Mute",CONTROLS_VOLUME_CURSOR_ARIA_LABEL:"Change volume",CONTROLS_VOLUME_TEXT_ARIA_LABEL:"Volume %value%%",CONTROLS_TEMPLATE_SPLIT_50_50_ARIA_LABEL:"Mode 50/50",CONTROLS_TEMPLATE_FULL_1_ARIA_LABEL:"Mode video only",CONTROLS_TEMPLATE_FULL_2_ARIA_LABEL:"Mode presentation only",CONTROLS_TEMPLATE_SPLIT_25_75_ARIA_LABEL:"Mode with priority on presentation",CONTROLS_SETTINGS_ARIA_LABEL:"Settings",CONTROLS_SETTINGS_QUALITIES_TITLE:"Quality",CONTROLS_SETTINGS_SOURCES_TITLE:"Source",CONTROLS_SETTINGS_SOURCE_LABEL:"Source %source%",CONTROLS_PLAY_ARIA_LABEL:"Play",CONTROLS_PAUSE_ARIA_LABEL:"Pause",CONTROLS_TEMPLATES_SELECTOR_ARIA_LABEL:"Choose player template",CONTROLS_TIME_BAR_ARIA_LABEL:"Navigate in the video",CONTROLS_TIME_BAR_ARIA_VALUE_TEXT:"%value%% seen",CONTROLS_FULLSCREEN_ARIA_LABEL:"Fullscreen",CONTROLS_FULLSCREEN_EXIT_ARIA_LABEL:"Exit fullscreen",CONTROLS_VEO_LABS_ARIA_LABEL:"Go to Veo-Labs web site",TABS_CHAPTERS_ARIA_LABEL:"Display chapters",TABS_TIMECODES_ARIA_LABEL:"Display images",TABS_TAGS_ARIA_LABEL:"Display tags"},fr:{LOADING:"Chargement...",MEDIA_ERR_NO_SOURCE:"Une erreur réseau à causé l'échec du téléchargement de la vidéo.",MEDIA_ERR_NETWORK:"Une erreur réseau à causé l'échec du téléchargement de la vidéo.",MEDIA_ERR_DECODE:"La lecture de la vidéo a été abandonnée en raison d' un problème de corruption ou parce que la vidéo utilise des fonctionnalités que votre navigateur ne supporte pas.",MEDIA_ERR_SRC_NOT_SUPPORTED:"La vidéo ne peut être chargée , soit parce que le serveur ou le réseau à échoué ou parce que le format ne sont pas supportées.",MEDIA_ERR_PERMISSION:"Vidéo indisponible ou privée.",MEDIA_ERR_DEFAULT:"Une erreur inconnue est survenue.",PREVIEW_IMAGE_PRELOAD_ERROR:"Image non disponible",TILE_MORE_INFO_BUTTON_LABEL:"Plus d'info",TILE_CLOSE_BUTTON_LABEL:"Fermer",TILE_IMAGE_PRELOAD_ERROR:"Image non disponible",CONTROLS_VOLUME_MUTE_ARIA_LABEL:"Désactiver le son",CONTROLS_VOLUME_UNMUTE_ARIA_LABEL:"Activer le son",CONTROLS_VOLUME_CURSOR_ARIA_LABEL:"Modifier le volume",CONTROLS_VOLUME_TEXT_ARIA_LABEL:"Volume à %value%%",CONTROLS_TEMPLATE_SPLIT_50_50_ARIA_LABEL:"Mode 50/50",CONTROLS_TEMPLATE_FULL_1_ARIA_LABEL:"Mode vidéo seule",CONTROLS_TEMPLATE_FULL_2_ARIA_LABEL:"Mode présentation seule",CONTROLS_TEMPLATE_SPLIT_25_75_ARIA_LABEL:"Mode avec priorité sur la présentation",CONTROLS_SETTINGS_ARIA_LABEL:"Paramètres",CONTROLS_SETTINGS_QUALITIES_TITLE:"Qualité",CONTROLS_SETTINGS_SOURCES_TITLE:"Source",CONTROLS_SETTINGS_SOURCE_LABEL:"Source %source%",CONTROLS_PLAY_ARIA_LABEL:"Lire",CONTROLS_PAUSE_ARIA_LABEL:"Pause",CONTROLS_TEMPLATES_SELECTOR_ARIA_LABEL:"Choisir un modèle de player",CONTROLS_TIME_BAR_ARIA_LABEL:"Se déplacer dans la vidéo",CONTROLS_TIME_BAR_ARIA_VALUE_TEXT:"%value%% vu",CONTROLS_FULLSCREEN_ARIA_LABEL:"Plein écran",CONTROLS_FULLSCREEN_EXIT_ARIA_LABEL:"Quitter le plein écran",CONTROLS_VEO_LABS_ARIA_LABEL:"Aller sur le site de Veo-Labs",TABS_CHAPTERS_ARIA_LABEL:"Afficher les chapitres",TABS_TIMECODES_ARIA_LABEL:"Afficher les indexes",TABS_TAGS_ARIA_LABEL:"Afficher les tags"}}),b.constant("oplPlayerErrors",{MEDIA_ERR_NO_SOURCE:0,MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4,MEDIA_ERR_PERMISSION:5,MEDIA_ERR_UNKNOWN:6}),b.config(function(){var a=function(a,b){videojs&&videojs.log&&b.getDebug().setLogToBrowserConsole(!1)};"undefined"!=typeof videojs&&videojs.Html5DashJS&&videojs.Html5DashJS.hook&&videojs.Html5DashJS.hook("beforeinitialize",a)})}(angular),function(a,b){function c(a){function b(b){return Object.keys(a).indexOf(b)>=0}function c(a){f=b(a)?a:"en"}function d(){return f}function e(b,c){var d=a[f]&&a[f][b]||b;if(d===b&&(d=a.en[b]||b),c){var e=new RegExp(Object.keys(c).join("|"),"gi");d=d.replace(e,function(a){return c[a]})}return d}var f=navigator.language||navigator.browserLanguage;return{translate:e,isLanguageSupported:b,setLanguage:c,getLanguage:d}}b.service("oplI18nService",c),c.$inject=["oplI18nTranslations"]}(angular,angular.module("ov.player")),function(a){function b(a){function b(a){var b={};return a.targetTouches&&a.targetTouches.length>0?(b.x=a.targetTouches[0].pageX,b.y=a.targetTouches[0].pageY):(b.x=a.pageX,b.y=a.pageY),b}var c={};return a.PointerEvent?(c.UP="pointerup",c.DOWN="pointerdown",c.MOVE="pointermove",c.OVER="pointerover",c.OUT="pointerout"):a.TouchEvent?(c.UP="touchend",c.DOWN="touchstart",c.MOVE="touchmove"):(c.UP="mouseup",c.DOWN="mousedown",c.MOVE="mousemove",c.OVER="mouseover",c.OUT="mouseout"),{EVENTS:c,getUiEventCoordinates:b}}a.factory("oplEventsFactory",b),b.$inject=["$window"]}(angular.module("ov.player")),function(a){function b(a,b){function c(c,d){d||(d=50);var e=a.defer(),f=null,g=function(){if(c())return a.when();var d=a.defer();return f=b(function(){return c()?d.resolve():void g().then(function(){d.resolve()}).catch(function(a){d.reject(a)})},10),d.promise};return a.race([b(function(){return 0},d),g()]).then(function(a){0===a?e.reject("Timed out"):e.resolve()}).catch(function(a){e.reject(a)}).finally(function(){f&&b.cancel(f)}),e.promise}function d(b,d,e){if(e||(e=50),!b)return a.reject("Element not specified");var f=a.defer(),g=null,h=function(){return g=angular.element(b).controller(d),!!g};return c(h,e).then(function(){f.resolve(g)}).catch(function(a){f.reject(a)}),f.promise}function e(b,d,e){if(e||(e=50),!b)return a.reject("Element not specified");var f=a.defer(),g=null,h=function(){var a=b.getBoundingClientRect();g={bottom:a.bottom,height:a.height,left:a.left,right:a.right,top:a.top,width:a.width,clientWidth:b.clientWidth,clientHeight:b.clientHeight};for(var c=0;c<d.length;c++){var e=d[c];if(void 0!==e.notEqual&&g[e.property]===e.notEqual||void 0!==e.equal&&g[e.property]!==e.equal)return!1}return!0};return c(h,e).then(function(){f.resolve(g)}).catch(function(a){f.reject(a)}),f.promise}function f(b,d,e){if(e||(e=50),!b||!d)return a.reject("Parent element or selector not specified");var f=a.defer(),g=function(){return!!b.querySelector(d)};return c(g,e).then(function(){f.resolve()}).catch(function(a){f.reject(a)}),f.promise}return{waitForElement:f,waitForElementDimension:e,waitForController:d}}a.factory("oplDomFactory",b),b.$inject=["$q","$timeout"]}(angular.module("ov.player")),function(a){function b(){function a(){}return a.prototype.init=function(a,b){if(!a)throw new Error("A player JQLite Element is expected as Player argument");this.jPlayerElement=a,this.selectedSourceIndex=0,this.playerId=b},a.prototype.setMediaSource=function(a){this.selectedSourceIndex=a},a.prototype.getSourceIndex=function(){return this.selectedSourceIndex},a.prototype.getMediaIds=function(){return this.media.mediaId},a.prototype.getId=function(){return this.playerId},a.prototype.setMedia=function(a){if(!a)throw new Error("Player needs a valid media");this.media=a},a.prototype.getSourceUrl=function(){return null},a.prototype.getMediaMIME=function(a){return a&&a.mimeType?a.mimeType:"video/mp4"},a.prototype.getAvailableDefinitions=function(){throw new Error("getAvailableDefinitions method not implemented for this player")},a.prototype.getMediaThumbnail=function(){throw new Error("getMediaThumbnail method not implemented for this player")},a.prototype.initialize=function(){throw new Error("initialize method not implemented for this player")},a.prototype.load=function(){throw new Error("load method not implemented for this player")},a.prototype.isPaused=function(){throw new Error("isPaused method not implemented for this player")},a.prototype.isPlaying=function(){throw new Error("isPlaying method not implemented for this player")},a.prototype.playPause=function(){throw new Error("play method not implemented for this player")},a.prototype.setVolume=function(){throw new Error("setVolume method not implemented for this player")},a.prototype.setTime=function(){throw new Error("setTime method not implemented for this player")},a.prototype.getPlayerType=function(){throw new Error("getPlayerType method not implemented for this player")},a.prototype.destroy=function(){throw new Error("destroy method not implemented for this player")},a.prototype.getDefinition=function(){throw new Error("getDefinition method not implemented for this player")},a.prototype.setDefinition=function(a){throw new Error("setDefinition method not implemented for this player")},a.prototype.isOverlayPlayPauseSupported=function(){throw new Error("isOverlayPlayPauseSupported method not implemented for this player")},a}a.factory("OplPlayer",b)}(angular.module("ov.player")),function(a){function b(a,b,c){function d(a){!a||e.preloading||e.preloaded||(e.preloading=!0,c.get(a).then(function(){e.preloading=!1,e.preloaded=!0,f.push(a)}).catch(function(){e.preloading=!1,e.preloaded=!0,e.error=!0}))}var e=this,f=[];a.url=null,a.position={x:0,y:0},Object.defineProperties(e,{preloading:{value:!1,writable:!0},preloaded:{value:!1,writable:!0},error:{value:!1,writable:!0},$onChanges:{value:function(b){b.oplImage&&b.oplImage.currentValue&&(e.error=!1,f.indexOf(e.oplImage.url||e.oplImage)===-1&&(e.preloaded=!1,e.preloading=!1,d(e.oplImage.url||e.oplImage)),a.url=e.oplImage.url||e.oplImage,a.position.x=e.oplImage.x||0,a.position.y=e.oplImage.y||0)}}})}a.controller("OplPreviewController",b),b.$inject=["$scope","$element","$http"]}(angular.module("ov.player")),function(a){function b(a,b,c,d){function e(a){for(var b=0,c=0;c<l.length;c++)if(angular.element(l[c]).controller("oplButton").isFocused()){b=c;break}var d=a?b+1:b-1;d>=l.length&&(d=0),d<0&&(d=l.length-1),angular.element(l[d]).controller("oplButton").focus()}function f(){d(function(){l=angular.element(c[0].querySelectorAll(".opl-tabs opl-button"))})}function g(a){if(("Tab"===a.key||9===a.keyCode)&&a.shiftKey)return void(n=!0);if("ArrowLeft"===a.key||37===a.keyCode||"ArrowUp"===a.key||38===a.keyCode)e(!1);else{if("ArrowRight"!==a.key&&39!==a.keyCode&&"ArrowDown"!==a.key&&40!==a.keyCode)return;e(!0)}a.preventDefault()}function h(a){return k.addClass("opl-focus"),n?void(n=!1):void angular.element(l[0]).controller("oplButton").focus()}function i(a){n=!1,k.removeClass("opl-focus")}var j,k,l,m=this,n=!1;Object.defineProperties(m,{views:{value:[]},selectViewById:{value:function(a){var c=b("filter")(m.views,{oplViewId:a},!0);0!=c.length&&m.select(c[0])}},addView:{value:function(a){m.views.length||m.select(a),m.views.push(a),f()}},removeView:{value:function(a){var b=m.views.indexOf(a);b!==-1&&m.views.splice(b,1),f()}},select:{value:function(a){angular.forEach(m.views,function(a){a.selected=!1}),a.selected=!0}},getSelectedView:{value:function(a){for(var b=0;b<m.views.length;b++)if(m.views[b].selected)return m.views[b];return null}},$onInit:{value:function(){k=angular.element(c[0].querySelector(".opl-tabs-wrapper")),j=angular.element(c[0].querySelector(".opl-tabs ul")),j.on("keydown",g),j.on("focus",h),j.on("blur",i)}},$postLink:{value:function(){f()}},$onDestroy:{value:function(){j.off("keydown focus blur")}}}),a.handleButtonAction=function(a){m.oplOnSelect&&m.oplOnSelect({view:a})}}a.controller("OplTabsController",b),b.$inject=["$scope","$filter","$element","$timeout"]}(angular.module("ov.player")),function(a){function b(a,b){var c=this,d=b.controller("oplTabs");Object.defineProperties(c,{selected:{value:!1,writable:!0}}),d.addView(c),a.$watch("$ctrl.selected",function(a,b){a&&c.oplOnSelect&&c.oplOnSelect({id:c.oplViewId})}),a.$on("$destroy",function(){d.removeView(c)})}a.controller("OplViewController",b),b.$inject=["$scope","$element"]}(angular.module("ov.player")),function(a){function b(a){function b(a){f.addClass("opl-focus"),h.oplOnFocus&&h.oplOnFocus()}function c(a){f.removeClass("opl-focus")}function d(){g.on("focus",b),g.on("blur",c)}function e(){g.off("focus blur")}var f,g,h=this;Object.defineProperties(h,{$onInit:{value:function(){f=angular.element(a[0].querySelector(".opl-veo-labs-button")),g=angular.element(a[0].querySelector("a")),d()}},$onDestroy:{value:function(){e()}}})}a.controller("OplVeoLabsButtonController",b),b.$inject=["$element"]}(angular.module("ov.player")),function(a){function b(){return function(a){if(a<0||isNaN(a))return"";a=parseInt(a);var b=parseInt(a/1e3%60),c=parseInt(a/6e4%60),d=parseInt(a/36e5%24);return d=d<10?"0"+d:d,c=c<10?"0"+c:c,b=b<10?"0"+b:b,("00"!==d?d+":":"")+c+":"+b}}a.filter("oplMillisecondsToTime",b)}(angular.module("ov.player")),function(a){function b(){this.media=null,this.cutStart=0,this.cutEnd=null,this.realDuration=null,this.cutsActivated=!1}function c(a,b){a.sort(function(a,c){return a[b]-c[b]})}b.prototype.setMedia=function(a){if(this.media=a,this.cutsActivated=!1,this.cutStart=0,this.cutEnd=null,this.hasCuts()){this.cutsActivated=!0;for(var b=0;b<this.media.cut.length;b++)"begin"===this.media.cut[b].type?this.cutStart=this.media.cut[b].value:"end"===this.media.cut[b].type&&(this.cutEnd=this.media.cut[b].value);this.cutStart<0&&(this.cutStart=0),null!==this.cutEnd&&this.cutStart>=this.cutEnd&&(this.cutStart=0,this.cutEnd=null)}this.media.timecodes&&c(this.media.timecodes,"timecode"),this.media.chapters&&c(this.media.chapters,"value"),this.media.tags&&c(this.media.tags,"value")},b.prototype.getMediaTimecodesByTime=function(){var a={},b=this.getMediaPointsOfInterest("timecodes");if(b)for(var c=0;c<b.length;c++){var d=b[c];a[d.timecode]={image:{small:d.image.small,large:d.image.large}}}return a},b.prototype.getMediaPointsOfInterest=function(a){var b="timecodes"===a?"timecode":"value";if(!this.media[a])return[];if(this.cutsActivated&&this.getRealDuration()){for(var c,d=[],e=this.getCutStart(),f=this.getCutEnd(),g=0;g<this.media[a].length;g++){var h=this.media[a][g][b],i=angular.copy(this.media[a][g]);if(i[b]=i[b]-this.cutStart,h<e)c=i;else{if(h>f)break;d.push(i)}}return void 0===c||0!==d.length&&0==d[0][b]||(c[b]=0,d.unshift(c)),d}return angular.copy(this.media[a])},b.prototype.getCutStart=function(){return this.cutsActivated&&this.cutStart?this.cutStart:0},b.prototype.getCutEnd=function(){return this.cutsActivated?this.cutEnd?this.cutEnd:this.getRealDuration():0},b.prototype.getRealTime=function(a){return a+this.getCutStart()},b.prototype.getCutTime=function(a){return Math.max(a-this.getCutStart(),0)},b.prototype.getCutDuration=function(){if(this.getRealDuration()){var a=this.getCutEnd(),b=this.getCutStart();return a-b}return 0},b.prototype.getCutPercent=function(a){if(this.getRealDuration()){var b=this.getRealDuration()*(a/100);return Math.min(Math.max((b-this.getCutStart())/this.getCutDuration()*100,0),100)}return a},b.prototype.getCutDurationPercent=function(a){if(this.getRealDuration()){var b=this.getRealDuration()*(a/100);return Math.min(b/this.getCutDuration()*100,100)}return a},b.prototype.setRealDuration=function(a){(this.cutStart>=a||this.cutEnd>a)&&(this.cutStart=0,this.cutEnd=null),this.realDuration=a},b.prototype.getRealDuration=function(){return this.realDuration},b.prototype.getDuration=function(){return this.cutsActivated?this.getCutDuration():this.getRealDuration()},b.prototype.getTime=function(a){return this.cutsActivated?this.getCutTime(a):a},b.prototype.setCutsStatus=function(a){this.cutsActivated=a},b.prototype.hasCuts=function(){return this.media&&this.media.cut&&this.media.cut.length},b.prototype.getPercent=function(a){var b=a/this.getRealDuration()*100;return this.cutsActivated?this.getCutPercent(b):b},b.prototype.getTimeFromPercent=function(a){return this.getDuration()*(a/100)},b.prototype.getDurationPercent=function(a){return this.cutsActivated?this.getCutDurationPercent(a):a},b.prototype.findPointOfInterest=function(a,b){var c=this.getMediaPointsOfInterest(a),d="timecodes"===a?"timecode":"value";if(!c.length)return null;if(b<c[0][d])return null;for(var e=0;e<c.length;e++)if(b>=c[e][d]&&c[e+1]&&b<c[e+1][d])return c[e];return c[c.length-1]},a.value("oplPlayerService",b)}(angular.module("ov.player")),function(a){function b(a){return function(b,c){return a.translate(b,c)}}a.filter("oplTranslate",b),b.$inject=["oplI18nService"]}(angular.module("ov.player")),function(a,b){function c(b,c,d,e,f,g,h,i,j,k,l,m){function n(){return ka.requestFullScreen||ka.mozRequestFullScreen||ka.webkitRequestFullScreen||ka.msRequestFullscreen}function o(){return 1==("ontouchstart"in window||window.DocumentTouch&&ja instanceof DocumentTouch)}function p(a,b){return"undefined"==typeof ia[a]?b:JSON.parse(ia[a])}function q(b){return!!b&&(b=a.element(b),!!b.hasClass("opl-media-wrapper")||q(b.parent()[0]))}function r(a){e(function(){var b=g.$root.$$phase;"$apply"===b||"$digest"===b?a():g.$apply(a)},1)}function s(b){var c;return"chapters"===b?c=h[0].querySelector(".opl-chapters-view opl-tiles"):"timecodes"===b?c=h[0].querySelector(".opl-timecodes-view opl-tiles"):"tags"===b&&(c=h[0].querySelector(".opl-tags-view opl-tiles")),a.element(c).controller("oplTiles")}function t(){if(_)return i.when();var a=i.defer();return X.addClass("opl-masking"),_=e(function(){_=null,X.addClass("opl-masked"),X.removeClass("opl-masking"),a.resolve()},225),a.promise}function u(){if(_)return i.when();var a=i.defer();return X.removeClass("opl-masked"),X.addClass("opl-posting"),_=e(function(){_=null,X.removeClass("opl-posting"),a.resolve()},525),a.promise}function v(){if(aa)return i.when();var a=i.defer();return Y.removeClass("opl-light-controls-posted"),Y.addClass("opl-light-controls-masking"),aa=e(function(){aa=null,Y.removeClass("opl-light-controls-masking"),a.resolve()},150),a.promise}function w(){if(aa)return i.when();var a=i.defer();return Y.addClass("opl-light-controls-posting"),aa=e(function(){aa=null,Y.addClass("opl-light-controls-posted"),Y.removeClass("opl-light-controls-posting"),a.resolve()},150),a.promise}function x(){if(X.hasClass("opl-masked"))return i.when();var a=i.defer();return requestAnimationFrame(function(){t().then(function(){a.resolve()}).catch(function(b){a.reject(b)})}),a.promise}function y(){if(!X.hasClass("opl-masking")&&!X.hasClass("opl-masked"))return i.when();var a=i.defer();return requestAnimationFrame(function(){u().then(function(){a.resolve()}).catch(function(b){a.reject(b)})}),a.promise}function z(){if(!Y.hasClass("opl-light-controls-posting")&&!Y.hasClass("opl-light-controls-posted"))return i.when();var a=i.defer();return requestAnimationFrame(function(){v().then(function(){a.resolve()}).catch(function(b){a.reject(b)})}),a.promise}function A(){if(Y.hasClass("opl-light-controls-posted"))return i.when();var a=i.defer();return requestAnimationFrame(function(){w().then(function(){a.resolve()}).catch(function(b){a.reject(b)})}),a.promise}function B(){g.indexesDisplayed=ia.timecodes.length&&p("oplIndexes",!0),g.chaptersDisplayed=ia.chapters.length&&p("oplChapters",!0),g.tagsDisplayed=ia.tags.length&&p("oplTags",!0);var a=g.chaptersDisplayed+g.tagsDisplayed+g.indexesDisplayed;g.tabsHidden=1===a||0===a,g.hidePoi=0===a}function C(a){a&&(a.mediaId&&!Array.isArray(a.mediaId)&&(a.mediaId=[a.mediaId]),a.sources&&!Array.isArray(a.sources)&&(a.sources=[a.sources]))}function D(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d=a[c],e=d.hasOwnProperty("timecode")?d.timecode:d.value,f={id:c,type:d.hasOwnProperty("image")?"image":"text",title:d.name,time:e,description:d.description,file:d.file,abstract:!0};d.image&&(f.image={small:{url:d.image.small.url||d.image.small,x:d.image.small.x||0,y:d.image.small.y||0},large:d.image.large}),b.push(f)}return b}function E(){if(ca){if(ia.chapters=D(ca.getMediaPointsOfInterest("chapters")),ia.tags=D(ca.getMediaPointsOfInterest("tags")),ia.timecodes=D(ca.getMediaPointsOfInterest("timecodes")),ia.timecodes.length){var a=ca.findPointOfInterest("timecodes",ia.time);ia.area2ImageUrl=a?a.image.large:null}B()}}function F(){if(na.mediaId&&na.mediaId.length){var a=ia.oplPlayerType||"html",c="player_"+(new Date).getUTCMilliseconds();switch(g.mediaTemplate="opl-"+a+".html",na.language=ia.language,a.toLowerCase()){case"youtube":var d=b.get("OplYoutubePlayer");ia.player=new d(h,na,c);break;case"vimeo":var e=b.get("OplVimeoPlayer");ia.player=new e(h,na,c);break;case"html":var f=b.get("OplHtmlPlayer");ia.player=new f(h,na,c);break;default:throw new Error("Player "+a+" is not supported")}}}function G(){if(ia.player){var a=ia.player&&ia.player.getAvailableDefinitions()||null;g.settingsIconDisplayed=!!(a||ia.mediaSources&&ia.mediaSources.length>1)&&g.settingsIconDisplayed,g.volumeIconDisplayed=g.volumeIconDisplayed&&!o(),g.templateSelectorDisplayed=p("oplTemplateIcon",!0)&&g.indexesDisplayed}}function H(a,b){if(ia.timecodes.length){var c=ca.findPointOfInterest("timecodes",a);g.previewTime=a,g.previewImage=c.image&&c.image.small,Z.attr("style","transform: translateX("+(b-71)+"px);")}}function I(a){for(var b=[],c=0;c<a.length;c++)b.push({id:a[c],label:d("oplTranslate")("CONTROLS_SETTINGS_SOURCE_LABEL",{"%source%":c+1})});return b}function J(){if(ca){var b=!1;if(na=a.copy(ia.oplData)||{},C(na),ca.setMedia(na),ia.player?ia.player.setMedia(na):(b=!0,F()),ia.player){if(ia.timecodes=[],ia.chapters=[],ia.tags=[],ia.area2ImageUrl=null,ia.playerId=ia.player.getId(),ia.selectedTemplate=ha.FULL_1,ia.playing=!1,ia.fullscreenEnabled=!1,ia.loading=!0,ia.initializing=!0,ia.error=null,ia.volume=100,ia.loadedStart=0,ia.loadedPercent=0,ia.seenPercent=0,ia.time=0,ia.duration=0,g.lightVolume=100,g.overlayPlayPauseSupported=ia.player.isOverlayPlayPauseSupported(),ma){var c=f.getObject("videoStopped_"+na.mediaId);c&&(ia.seenPercent=c.percent,ia.time=c.time,$=ia.time)}ia.mediaDefinitions=ia.player.getAvailableDefinitions(),ia.sourceUrl=ia.player.getSourceUrl(),ia.mediaSources=I(na.mediaId),ia.mediaQualities=a.copy(ia.mediaDefinitions),ia.selectedSource=ia.mediaSources[ia.player.getSourceIndex()].id,ia.selectedDefinition=ia.player.getDefinition(),B(),G(),g.fullViewportActivated&&!n()&&(ia.fullscreenEnabled=!0,ba=!0),k.setLanguage(ia.language),b||($=0,ia.player.load())}}}function K(a){return a.stopImmediatePropagation(),r(function(){ia.player.setVolume(ia.volume),ia.error=null,ia.loading=!1,ia.initializing=!1,ia.setTime($),ia.selectedDefinition=ia.player.getDefinition(),h.triggerHandler("ready"),!la&&!da||ia.player.isPlaying()||(da=!1,ia.playPause())}),!1}function L(a){return a.stopImmediatePropagation(),r(function(){ia.loading=!0,h.triggerHandler("waiting")}),!1}function M(a){return a.stopImmediatePropagation(),r(function(){ia.loading=!1,ia.playing=!0,h.triggerHandler("playing")}),!1}function N(a,b){a.stopImmediatePropagation(),r(function(){ca.setRealDuration(b),ia.duration=ca.getDuration(),na.needPointsOfInterestUnitConversion===!0?h.triggerHandler("needPoiConversion",b):(ia.setTime($),E(),ia.selectTemplate(ia.oplTemplate),G(),ea.reset(),h.triggerHandler("durationChange",ia.duration))})}function O(b){return b.stopImmediatePropagation(),r(function(){ia.mediaDefinitions=ia.player.getAvailableDefinitions(),ia.selectedDefinition=ia.player.getDefinition(),ia.mediaQualities=a.copy(ia.mediaDefinitions),G(),ia.loading=!1,ia.playing=!0,h.triggerHandler("play")}),!1}function P(a){return a.stopImmediatePropagation(),r(function(){ia.playing=!1,h.triggerHandler("pause")}),!1}function Q(a,b){return a.stopImmediatePropagation(),r(function(){ia.loadedStart=ca.getTime(b.loadedStart),ia.loadedPercent=ca.getDurationPercent(b.loadedPercent),h.triggerHandler("loadProgress",{loadedStart:ia.loadedStart,loadedPercent:ia.loadedPercent})}),!1}function R(a,b){if(a.stopImmediatePropagation(),!ia.initializing)return ia.loading=!1,ia.duration&&ca.getTime(b.time)>=ca.getDuration()?(ia.setTime(0),ma&&f.remove("videoStopped_"+na.mediaId),$=0,ia.player.playPause(),h.triggerHandler("end")):r(function(){ia.time=ca.getTime(b.time),ia.seenPercent=ca.getPercent(b.time);var a=ca.findPointOfInterest("timecodes",ia.time);ia.area2ImageUrl=a?a.image.large:null;var c={time:ia.time,percent:ia.seenPercent};h.triggerHandler("playProgress",c);var d=new Date;d.setDate(d.getDate()+1),ma&&f.putObject("videoStopped_"+na.mediaId,c,{expires:d})}),!1}function S(a){return a.stopImmediatePropagation(),r(function(){ma&&f.remove("videoStopped_"+na.mediaId),ia.time=ia.seenPercent=0,$=0,ia.playing=!1;var a=ca.findPointOfInterest("timecodes",ia.time);ia.area2ImageUrl=a?a.image.large:null,ca.hasCuts()&&ia.setTime(0),h.triggerHandler("end")}),!1}function T(a,b){r(function(){switch(ia.loading=!1,ia.initializing=!1,Number(b)){case l.MEDIA_ERR_NO_SOURCE:ia.error=d("oplTranslate")("MEDIA_ERR_NO_SOURCE");break;case l.MEDIA_ERR_NETWORK:ia.error=d("oplTranslate")("MEDIA_ERR_NETWORK");break;case l.MEDIA_ERR_DECODE:ia.error=d("oplTranslate")("MEDIA_ERR_DECODE");break;case l.MEDIA_ERR_SRC_NOT_SUPPORTED:ia.error=d("oplTranslate")("MEDIA_ERR_SRC_NOT_SUPPORTED");break;case l.MEDIA_ERR_PERMISSION:ia.error=d("oplTranslate")("MEDIA_ERR_PERMISSION");break;default:ia.error=d("oplTranslate")("MEDIA_ERR_DEFAULT")}h.triggerHandler("error",{code:b,message:ia.error})})}function U(a){ia.controlsDisplayed&&!q(a.relatedTarget)&&r(function(){ia.controlsDisplayed=!1})}function V(a){W&&e.cancel(W),ia.controlsDisplayed||r(function(){ia.controlsDisplayed=!0}),W=e(function(){r(function(){ia.controlsDisplayed=!1})},5e3)}var W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia=this,ja=c[0],ka=h.children()[0],la=!1,ma=!1,na=null;g.volumeIconDisplayed=!0,g.timeDisplayed=!0,g.indexesDisplayed=!1,g.chaptersDisplayed=!1,g.tagsDisplayed=!1,g.mediaTemplate=null,g.settingsIconDisplayed=!0,g.veoLabsIconDisplayed=!0,g.fullViewportActivated=!1,g.templateSelectorDisplayed=!0,g.fullscreenIconDisplayed=!0,g.overlayPlayPauseSupported=!1,Object.defineProperties(ia,{language:{value:null,writable:!0},timecodes:{value:[],writable:!0},chapters:{value:[],writable:!0},tags:{value:[],writable:!0},volume:{value:100,writable:!0},player:{value:null,writable:!0},duration:{value:0,writable:!0},time:{value:0,writable:!0},seenPercent:{value:0,writable:!0},loadedStart:{value:0,writable:!0},loadedPercent:{value:0,writable:!0},selectedTemplate:{value:"split_50_50",writable:!0},area2ImageUrl:{value:null,writable:!0},fullscreenEnabled:{value:!1,writable:!0},playing:{value:!1,writable:!0},playerId:{value:null,writable:!0},mediaDefinitions:{value:[],writable:!0},selectedDefinition:{value:null,writable:!0},selectedSource:{value:null,writable:!0},sourceUrl:{value:null,writable:!0},loading:{value:!1,writable:!0},initializing:{value:!1,writable:!0},error:{value:null,writable:!0},mediaSources:{value:[],writable:!0},mediaQualities:{value:[],writable:!0},controlsDisplayed:{value:!0,writable:!0},$onInit:{value:function(){X=a.element(h[0].querySelector(".opl-media-wrapper")),Z=a.element(h[0].querySelector(".opl-index-preview")),$=0,ba=!1,g.previewDisplayed=!1,g.touchDevice=o(),X.on("mousemove "+m.EVENTS.DOWN,V),X.on("mouseout",U),h.on("oplReady",K),h.on("oplWaiting",L),h.on("oplPlaying",M),h.on("oplDurationChange",N),h.on("oplPlay",O),h.on("oplPause",P),h.on("oplLoadProgress",Q),h.on("oplPlayProgress",R),h.on("oplEnd",S),h.on("oplError",T)}},$postLink:{value:function(){e(function(){ca=new j,Y=a.element(h[0].querySelector(".opl-light-controls")),ga=a.element(h[0].querySelector(".opl-tabs")).controller("oplTabs");var b=a.element(h[0].querySelector(".opl-template-selector")),c=a.element(h[0].querySelector(".opl-controls .opl-time-bar .opl-slider")),d=a.element(Y[0].querySelector(".opl-time-bar .opl-slider"));ea=c.controller("oplSlider"),fa=d.controller("oplSlider"),ha=b.controller("oplTemplateSelector").TEMPLATES,J()})}},$onDestroy:{value:function(){ia.player&&ia.player.destroy(),X.off(m.EVENTS.OUT+" "+m.EVENTS.MOVE+" "+m.EVENTS.DOWN),h.off("oplReady oplWaiting oplPlaying oplDurationChange oplPlay oplPause oplLoadProgress oplPlayProgress oplEnd oplError")}},$onChanges:{value:function(a){var b;if((a.oplFullscreenIcon&&a.oplFullscreenIcon.currentValue||a.oplVolumeIcon&&a.oplVolumeIcon.currentValue||a.oplTemplateIcon&&a.oplTemplateIcon.currentValue||a.oplSettingsIcon&&a.oplSettingsIcon.currentValue||a.oplVeoLabsIcon&&a.oplVeoLabsIcon.currentValue||a.oplFullViewport&&a.oplFullViewport.currentValue)&&(a.oplFullscreenIcon&&a.oplFullscreenIcon.currentValue&&(g.fullscreenIconDisplayed=n()&&p("oplFullscreenIcon",!0)),a.oplVolumeIcon&&a.oplVolumeIcon.currentValue&&(g.volumeIconDisplayed=p("oplVolumeIcon",!0)),a.oplTemplateIcon&&a.oplTemplateIcon.currentValue&&(g.templateSelectorDisplayed=p("oplTemplateIcon",!0)),a.oplSettingsIcon&&a.oplSettingsIcon.currentValue&&(g.settingsIconDisplayed=p("oplSettingsIcon",!0)),a.oplVeoLabsIcon&&a.oplVeoLabsIcon.currentValue&&(g.veoLabsIconDisplayed=p("oplVeoLabsIcon",!0)),a.oplFullViewport&&a.oplFullViewport.currentValue&&(g.fullViewportActivated=p("oplFullViewport",!1),g.fullViewportActivated&&!n()&&(ia.fullscreenEnabled=!0,ba=!0)),G()),a.oplTime&&a.oplTime.currentValue&&(g.timeDisplayed=p("oplTime",!0)),a.oplRememberPosition&&a.oplRememberPosition.currentValue&&(ma=p("oplRememberPosition",!1)),a.oplLanguage&&a.oplLanguage.currentValue&&(b=a.oplLanguage.currentValue,ia.language="undefined"==typeof b?"en":b,k.setLanguage(ia.language)),a.oplAutoPlay&&a.oplAutoPlay.currentValue&&(la=p("oplAutoPlay",!1)),a.oplData&&a.oplData.currentValue){var c=a.oplData;J(),c.previousValue&&c.previousValue.needPointsOfInterestUnitConversion===!0&&!c.currentValue.needPointsOfInterestUnitConversion&&(ia.setTime($),E(),ia.selectTemplate(ia.oplTemplate),G(),h.triggerHandler("durationChange",ia.duration))}else if(a.oplCuts&&a.oplCuts.currentValue){if(!ca)return;var d=p("oplCuts",!0);ca.setCutsStatus(d),ia.duration&&(J(),ca.setCutsStatus(d),ia.duration=ca.getDuration(),E(),ia.selectTemplate(ia.oplTemplate),G(),h.triggerHandler("durationChange",ia.duration),ia.setTime(0))}else(a.oplChapters&&a.oplChapters.currentValue||a.oplIndexes&&a.oplIndexes.currentValue||a.oplTags&&a.oplTags.currentValue||a.oplTemplate&&a.oplTemplate.currentValue)&&(a.oplChapters&&a.oplChapters.currentValue&&E(),a.oplIndexes&&a.oplIndexes.currentValue&&E(),a.oplTags&&a.oplTags.currentValue&&E(),a.oplTemplate&&a.oplTemplate.currentValue&&ia.selectTemplate(a.oplTemplate.currentValue))}},selectTemplate:{value:function(a){ha&&(g.indexesDisplayed?ia.selectedTemplate=a&&Object.values(ha).indexOf(a)>-1?a:ha.SPLIT_50_50:ia.selectedTemplate=ha.FULL_1)}},playPause:{value:function(a){ia.loading||ia.error||!ia.player||ia.player.playPause()}},setVolume:{value:function(a){ia.player&&ia.volume===a&&ia.player.setVolume(ia.volume)}},setTime:{value:function(a){ia.player.setTime(ca.getRealTime(a))}},setDefinition:{value:function(a){a&&a!==ia.selectedDefinition&&($=ia.time,da=!ia.player.isPaused(),ia.loading=!0,ia.initializing=!0,r(function(){ia.player.setDefinition(a)}))}},setSource:{value:function(b){b!=ia.player.getSourceIndex()&&($=ia.time,da=!ia.player.isPaused(),ia.player.setMediaSource(b),ia.selectedSource=ia.mediaSources[b].id,ia.mediaDefinitions=ia.player.getAvailableDefinitions(),ia.selectedDefinition=ia.player.getDefinition(),ia.mediaQualities=a.copy(ia.mediaDefinitions),ia.loading=!0,ia.initializing=!0,r(function(){ia.sourceUrl=ia.player.getSourceUrl(),ia.player.load()}))}}}),g.handleTimeBarUpdate=function(a){ia.setTime(a*ia.duration/100)},g.toggleFullscreen=function(){n()?"undefined"!==ja.fullScreenElement&&null===ja.fullScreenElement||"undefined"!==ja.msFullscreenElement&&null===ja.msFullscreenElement||"undefined"!==ja.mozFullScreen&&ja.mozFullScreen===!1||"undefined"!==ja.webkitFullscreenElement&&null===ja.webkitFullscreenElement?(ka.requestFullScreen?ka.requestFullScreen():ka.mozRequestFullScreen?ka.mozRequestFullScreen():ka.webkitRequestFullScreen?ka.webkitRequestFullScreen():ka.msRequestFullscreen&&ka.msRequestFullscreen(),
ia.fullscreenEnabled=!0):(ja.exitFullscreen?ja.exitFullscreen():ja.mozCancelFullScreen?ja.mozCancelFullScreen():ja.webkitExitFullscreen?ja.webkitExitFullscreen():ja.msExitFullscreen&&ja.msExitFullscreen(),ia.fullscreenEnabled=!1):(ba=g.fullViewportActivated=!ba,ia.fullscreenEnabled=ba)},g.handleSettingsUpdate=function(a,b){var c;if(a)return ia.setDefinition(a);if(b)for(c=0;c<ia.mediaSources.length;c++)if(ia.mediaSources[c].id===b)return ia.setSource(c)},g.handleViewSelect=function(a){var b=ga.getSelectedView();if(!b)return ga.selectViewById(a.oplViewId);var c=b.oplViewId,d=s(c);d.reduceTile().then(function(){return z(),y()}).then(function(){ga.selectViewById(a.oplViewId)})},g.handleViewSelected=function(a){e(function(){var b=s(a);b.reset()})},g.handleControlFocus=function(){r(function(){ia.controlsDisplayed=!0})},g.handleTimeBarOver=function(){ia.timecodes.length&&r(function(){g.previewDisplayed=!0})},g.handleTimeBarOut=function(){ia.timecodes.length&&r(function(){g.previewDisplayed=!1})},g.handleTimeBarMove=function(a,b,c){if(ia.timecodes.length){var d=Math.max(c.width*(a/100),0);r(function(){H(ca.getTimeFromPercent(a),d)})}},g.handleTileSelect=function(a){ia.setTime(a.time)},g.handleTileInfo=function(a,b){var c=s(b);x().then(function(){A()}),c.enlargeTile(a.id)},g.handleTileClose=function(a,b){var c=s(b);c.reduceTile(a.id),z(),y()},g.handleLightVolumeToggle=function(){fa.reset()},g.$on("$includeContentLoaded",function(){e(function(){ia.player.initialize()},1)})}b.controller("OplPlayerController",c),c.$inject=["$injector","$document","$filter","$timeout","$cookies","$scope","$element","$q","oplPlayerService","oplI18nService","oplPlayerErrors","oplEventsFactory"]}(angular,angular.module("ov.player")),function(a){function b(a,b,d,e,f,g,h){function i(a){if(!K)return null;for(var b=0;b<K.length;b++)if(angular.element(K[b]).attr("data-id")===a)return K[b];return null}function j(a){V.forEach(function(b){b.id===a&&(b.hidden=!1)})}function k(a){V.forEach(function(b){b.id===a&&(b.hidden=!0)})}function l(){U.forEach(function(a){var c=i(a);c&&(c=angular.element(c),angular.element(c[0]).attr("data-id")===b.selectedTemplate?(c.addClass("opl-selected"),c.attr("style","opacity: 1;transform: translateX(0px);"),j(angular.element(c).attr("data-id"))):(c.removeClass("opl-selected"),c.attr("style","opacity: 0;transform: translateX(0px);"),k(angular.element(c).attr("data-id"))))})}function m(){U.splice(0,U.length),V.forEach(function(a){a.id!==b.selectedTemplate&&U.push(a.id)}),U.unshift(b.selectedTemplate)}function n(a,b,c){return"transition-property: "+a+";-moz-transition-property: "+a+";-o-transition-property: "+a+";-webkit-transition-property: "+a+";transition-timing-function: "+b+";-moz-transition-timing-function: "+b+";-o-transition-timing-function: "+b+";-webkit-transition-timing-function: "+b+";transition-duration: "+c+";-moz-transition-duration: "+c+";-o-transition-duration: "+c+";-webkit-transition-duration: "+c+";"}function o(a){var b=i(a);if(!b.deactivationAnimationRequested||b.activationTimer)return f.when();var c=f.defer();return b.deactivationAnimationRequested=!1,b.activated=!1,angular.element(b).removeClass("opl-template-activation"),angular.element(b).addClass("opl-template-deactivation"),b.deactivationTimer=d(function(){angular.element(b).removeClass("opl-template-deactivation"),c.resolve()},150),c.promise}function p(a){var b=f.defer(),c=i(a);return angular.element(c).removeClass("opl-template-deactivation"),c.activationTimer&&d.cancel(c.activationTimer),c.deactivationTimer&&d.cancel(c.deactivationTimer),angular.element(c).addClass("opl-template-activation"),c.activationTimer=d(function(){c.activationTimer=null,requestAnimationFrame(function(){o(angular.element(c).attr("data-id")).then(function(){b.resolve()})})},225),b.promise}function q(){if(O||J.hasClass("opl-posted"))return f.when();var a=f.defer(),c=0,d=0;return O=!0,U.forEach(function(e){var f=i(e);f&&(f=angular.element(f),f.attr("data-id")!==b.selectedTemplate&&(f.attr("style",n("transform, opacity","cubic-bezier(0.4, 0, 0.2, 1), cubic-bezier(0.4, 0, 0.2, 1)","150ms, 150ms")+"opacity: 0.60;transform: translateX(-"+32*++c+"px);"),f.on("transitionend",function(){f.off("transitionend"),j(f.attr("data-id")),++d===U.length-1&&(J.addClass("opl-posted"),O=!1,b.$apply(),a.resolve())})))}),a.promise}function r(){if(P||!J.hasClass("opl-posted"))return f.when();var a=f.defer(),c=0;return P=!0,U.forEach(function(d){var e=i(d);e&&(e=angular.element(e),e.attr("data-id")!==b.selectedTemplate&&(e.attr("style",n("transform, opacity","linear, linear","75ms, 75ms")+"opacity: 0;transform: translateX(0);"),e.on("transitionend",function(){e.off("transitionend"),k(e.attr("data-id")),++c===U.length-1&&(J.removeClass("opl-posted"),P=!1,b.$apply(),a.resolve())})))}),a.promise}function s(a,c){if(N||!J.hasClass("opl-posted"))return f.when();var d=f.defer(),e=0,g=0;return N=!0,U.forEach(function(a){var f=i(a);f&&(f=angular.element(f),f.attr("data-id")===c?(f.addClass("opl-selected"),f.attr("style",n("transform, opacity","linear, linear","150ms, 150ms")+"opacity: 1;transform: translateX(0);")):(f.removeClass("opl-selected"),f.attr("style",n("transform, opacity","linear, linear","50ms, 50ms")+"opacity: 0;transform: translateX(-"+32*e+"px) translateY(32px);")),e++,f.on("transitionend",function(){f.off("transitionend"),f.attr("data-id")===c?j(f.attr("data-id")):k(f.attr("data-id")),++g===U.length&&(J.removeClass("opl-posted"),N=!1,b.$apply(),d.resolve())}))}),d.promise}function t(a){for(var b=0;b<K.length;b++)if(angular.element(K[b]).attr("data-id")===a){K[b].focus();break}}function u(){K.forEach(function(a){angular.element(a).removeClass("opl-template-focus")})}function v(a){for(var b,c=0;c<K.length;c++)if(angular.element(K[c]).hasClass("opl-template-focus")){b=angular.element(K[c]).attr("data-id");break}var d=U.indexOf(b),e=a?d+1:d-1;e>=U.length&&(e=0),e<0&&(e=U.length-1),t(U[e])}function w(){J.addClass("opl-focus"),t(b.selectedTemplate),requestAnimationFrame(function(){q()}),M.oplOnFocus&&M.oplOnFocus()}function x(){J.removeClass("opl-focus"),u(),requestAnimationFrame(function(){r()})}function y(a){M.oplOnUpdate&&a!==b.selectedTemplate&&M.oplOnUpdate({template:a})}function z(){N||(L&&d.cancel(L),requestAnimationFrame(function(){r()}))}function A(){N||requestAnimationFrame(function(){q().then(function(){L=d(function(){z()},5e3)})})}function B(a){if("ArrowLeft"!==a.key&&37!==a.keyCode&&"ArrowDown"!==a.key&&40!==a.keyCode||N)if("ArrowUp"!==a.key&&38!==a.keyCode&&"ArrowRight"!==a.key&&39!==a.keyCode||N){if("Enter"!==a.key&&13!==a.keyCode)return"Tab"===a.key||9===a.keyCode?(Q=!1,R=!0,T=!!a.shiftKey,void(T&&S&&(Q=!0))):void 0;b.$apply(function(){y(angular.element(a.target).attr("data-id"))})}else requestAnimationFrame(function(){q()}),v(!1);else requestAnimationFrame(function(){q()}),v(!0);a.preventDefault()}function C(a){Q?Q=!1:(Q=!0,w())}function D(a){Q||(x(),R=!1)}function E(a){angular.element(a.target).addClass("opl-template-focus"),S=!0}function F(a){T===!1&&R&&(Q=!1,R=!1,x()),S=!1,angular.element(a.target).removeClass("opl-template-focus")}function G(a){if(!N){var b=angular.element(a.target).attr("data-id")?a.target:a.target.parentNode;I.off(h.EVENTS.UP,G),K.forEach(function(a){requestAnimationFrame(function(){a.deactivationAnimationRequested=!0,o(angular.element(a).attr("data-id"))}),a.activated=!1}),y(angular.element(b).attr("data-id"))}}function H(a){if(!N){var b=angular.element(a.target).attr("data-id")?a.target:a.target.parentNode;b.activated||(J.hasClass("opl-posted")||A(),I.on(h.EVENTS.UP,G),b.activated=!0,requestAnimationFrame(function(){p(angular.element(b).attr("data-id"))}))}}var I,J,K,L,M=this,N=!1,O=!1,P=!1,Q=!1,R=!1,S=!1,T=!1,U=[],V=[{id:c.SPLIT_50_50,label:e("oplTranslate")("CONTROLS_TEMPLATE_SPLIT_50_50_ARIA_LABEL"),hidden:!0},{id:c.FULL_1,label:e("oplTranslate")("CONTROLS_TEMPLATE_FULL_1_ARIA_LABEL"),hidden:!0},{id:c.FULL_2,label:e("oplTranslate")("CONTROLS_TEMPLATE_FULL_2_ARIA_LABEL"),hidden:!0},{id:c.SPLIT_25_75,label:e("oplTranslate")("CONTROLS_TEMPLATE_SPLIT_25_75_ARIA_LABEL"),hidden:!0}];b.selectedTemplate=c.SPLIT_50_50,b.templates=V,Object.defineProperties(M,{TEMPLATES:{value:c},$onInit:{value:function(){I=angular.element(g.document.body),J=angular.element(a[0].querySelector(".opl-template-selector")),d(function(){K=a[0].querySelectorAll("button"),l(),angular.element(K).on("focus",E),angular.element(K).on("blur",F)}),J.on("keydown",B),J.on("focus",C),J.on("blur",D),J.on(h.EVENTS.DOWN,H)}},$onDestroy:{value:function(){J.off(h.EVENTS.DOWN+" focus blur keydown"),K&&angular.element(K).off("focus blur transitionend"),I.off(h.EVENTS.UP,G)}},$onChanges:{value:function(a){if(a.oplTemplate&&a.oplTemplate.currentValue){var c,e=b.selectedTemplate;for(c=0;c<V.length&&a.oplTemplate.currentValue!==V[c].id;c++);b.selectedTemplate=c===-1?V[0].id:a.oplTemplate.currentValue,J&&J.hasClass("opl-posted")?(L&&d.cancel(L),requestAnimationFrame(function(){s(e,b.selectedTemplate).then(function(){l(),m(),t(b.selectedTemplate)})})):(m(),l())}}}})}var c={FULL_1:"split_1",SPLIT_50_50:"split_50_50",SPLIT_25_75:"split_25_75",FULL_2:"split_2"};a.controller("OplTemplateSelectorController",b),b.$inject=["$element","$scope","$timeout","$filter","$q","$window","oplEventsFactory"]}(angular.module("ov.player")),function(a){a.component("oplPlayer",{templateUrl:"opl-player.html",controller:"OplPlayerController",bindings:{oplData:"<",oplFullscreenIcon:"@?",oplVolumeIcon:"@?",oplTemplate:"@?",oplTemplateIcon:"@?",oplSettingsIcon:"@?",oplVeoLabsIcon:"@?",oplTime:"@?",oplFullViewport:"@?",oplLanguage:"@?",oplPlayerType:"@?",oplAutoPlay:"@?",oplRememberPosition:"@?",oplChapters:"@?",oplIndexes:"@?",oplTags:"@?",oplCuts:"@?"}})}(angular.module("ov.player")),function(a){a.component("oplTemplateSelector",{templateUrl:"opl-templateSelector.html",controller:"OplTemplateSelectorController",bindings:{oplTemplate:"@?",oplLabel:"@?",oplOnUpdate:"&",oplOnFocus:"&"}})}(angular.module("ov.player")),function(a){function b(a,b,c,d,e,f){function g(){q.addClass("opl-focus"),w.oplOnFocus&&w.oplOnFocus()}function h(){q.removeClass("opl-focus")}function i(){if(!u||s)return d.when();var a=d.defer();return u=!1,v=!1,q.removeClass("opl-activation"),q.addClass("opl-deactivation"),t=b(function(){q.removeClass("opl-deactivation"),a.resolve()},150),a.promise}function j(){var a=d.defer();return q.removeClass("opl-deactivation"),s&&b.cancel(s),t&&b.cancel(t),q.addClass("opl-activation"),s=b(function(){s=null,requestAnimationFrame(function(){i().then(function(){a.resolve()})})},225),a.promise}function k(){w.oplOnUpdate&&w.oplOnUpdate()}function l(a){"Enter"!==a.key&&13!==a.keyCode||(a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),c.$apply(k))}function m(a){a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),r.off(f.EVENTS.UP,m),requestAnimationFrame(function(){u=!0,i()}),v=!1,w.focus(),k()}function n(a){v||(a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),v=!0,requestAnimationFrame(function(){j()}),r.on(f.EVENTS.UP,m))}function o(a){g()}function p(a){h()}var q,r,s,t,u,v,w=this;Object.defineProperties(w,{focus:{value:function(){q[0].focus()}},isFocused:{value:function(){return q.hasClass("opl-focus")}},$onInit:{value:function(){r=angular.element(e.document.body),q=angular.element(a[0].querySelector(".opl-button")),q.on("keydown",l),q.on("focus",o),q.on("blur",p),q.on(f.EVENTS.DOWN,n)}},$onDestroy:{value:function(){q.off(f.EVENTS.DOWN+" keydown focus blur"),r.off(f.EVENTS.UP,m),s&&b.cancel(s),t&&b.cancel(t)}}})}a.controller("OplButtonController",b),b.$inject=["$element","$timeout","$scope","$q","$window","oplEventsFactory"]}(angular.module("ov.player")),function(a){function b(a,b,c,d,e,f,g,h,i){function j(){da.oplAbstract?(M=angular.element(b[0].querySelector(".opl-abstract .opl-title")),O=angular.element(b[0].querySelector(".opl-abstract .opl-access-time")),L=angular.element(b[0].querySelector(".opl-abstract opl-button")),N=angular.element(b[0].querySelector(".opl-abstract .opl-access-time-icon"))):(da.oplData.title&&(P=angular.element(b[0].querySelector(".opl-full .opl-title"))),da.oplData.description&&(Q=angular.element(b[0].querySelector(".opl-full opl-scroller"))),da.oplData.file&&(S=angular.element(b[0].querySelector(".opl-full .opl-attachment")),T=angular.element(S[0].querySelector("a"))),U=angular.element(b[0].querySelector(".opl-close-button opl-button")))}function k(){da.oplData.image&&da.oplData.image.small&&!da.smallImagePreloading&&(da.smallImagePreloading=!0,d.get(da.oplData.image.small.url).then(function(){da.smallImagePreloading=!1,da.smallImageError=!1,da.smallImagePreloaded=!0}).catch(function(){da.smallImagePreloading=!1,da.smallImagePreloaded=!0,da.smallImageError=!0}))}function l(){if(da.oplData.image&&da.oplData.image.large&&!da.largeImagePreloading){da.largeImagePreloading=!0;var a=new Image;a.onload=function(){da.largeImagePreloading=!1,da.largeImageError=!1,da.largeImageSize={width:this.naturalWidth,height:this.naturalHeight},da.oplOnImagePreloaded&&da.oplOnImagePreloaded({tile:da.oplData,size:da.largeImageSize})},a.onerror=function(){da.largeImagePreloading=!1,da.largeImageError=!0,da.oplOnImageError&&da.oplOnImageError({tile:da.oplData})},a.src=da.oplData.image.large}}function m(){if(!aa||Y)return f.when();var a=f.defer();return aa=!1,W=!1,K.removeClass("opl-activation"),K.addClass("opl-deactivation"),$=c(function(){K.removeClass("opl-deactivation"),a.resolve()},150),a.promise}function n(){var a=f.defer();return K.removeClass("opl-deactivation"),Y&&c.cancel(Y),$&&c.cancel($),K.addClass("opl-activation"),Y=c(function(){Y=null,requestAnimationFrame(function(){m().then(function(){a.resolve()})})},225),a.promise}function o(){if(!ba||Z)return f.when();var a=f.defer();return ba=!1,X=!1,T.removeClass("opl-attachment-activation"),T.addClass("opl-attachment-deactivation"),_=c(function(){T.removeClass("opl-attachment-deactivation"),a.resolve()},150),a.promise}function p(){var a=f.defer();return T.removeClass("opl-attachment-deactivation"),Z&&c.cancel(Z),_&&c.cancel(_),T.addClass("opl-attachment-activation"),Z=c(function(){Z=null,requestAnimationFrame(function(){o().then(function(){a.resolve()})})},225),a.promise}function q(){return P&&P.length?P[0].clientHeight:0}function r(){return S&&S.length?S[0].clientHeight:0}function s(){return ca&&da.oplData.description?ca-q()-r()-16:0}function t(){var a=f.defer();return h.waitForElementDimension(K[0],[{property:"clientHeight",notEqual:0}]).then(function(b){a.resolve(b.clientHeight)},function(){a.resolve(K[0].clientHeight)}),a.promise}function u(a){J.off(i.EVENTS.UP,u),requestAnimationFrame(function(){aa=!0,m()}),W=!1,da.oplOnSelect&&da.oplOnSelect({tile:da.oplData})}function v(a){W||(W=!0,requestAnimationFrame(function(){n()}),J.on(i.EVENTS.UP,u))}function w(a){J.off(i.EVENTS.UP,w),requestAnimationFrame(function(){ba=!0,o()}),X=!1}function x(a){X||(X=!0,requestAnimationFrame(function(){p()}),J.on(i.EVENTS.UP,w))}function y(a){if("Enter"===a.key||13===a.keyCode)da.oplOnSelect&&da.oplOnSelect({tile:da.oplData});else{if("ArrowUp"!==a.key&&38!==a.keyCode&&"ArrowDown"!==a.key&&40!==a.keyCode)return;var b=L.controller("oplButton");b.isFocused()?da.focus():b.focus()}a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault()}function z(a){if("ArrowUp"===a.key||38===a.keyCode||"ArrowLeft"===a.key||37===a.keyCode)if(V.isFocused())T?T[0].focus():R&&R.focus();else if(R&&R.isFocused())V.focus();else{if(!T||!T.hasClass("opl-focus"))return;R?R.focus():V.focus()}else if("ArrowDown"===a.key||40===a.keyCode||"ArrowRight"===a.key||39===a.keyCode)if(V.isFocused())R?R.focus():T&&T[0].focus();else if(R&&R.isFocused())T?T[0].focus():V.focus();else{if(!T||!T.hasClass("opl-focus"))return;V.focus()}else{if(("Enter"!==a.key&&13!==a.keyCode||!V.isFocused())&&"Escape"!==a.key&&27!==a.keyCode)return;da.oplOnClose&&da.oplOnClose()}a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault()}function A(a){da.oplAbstract?y(a):z(a)}function B(a){K.addClass("opl-focus")}function C(a){K.removeClass("opl-focus")}function D(a){T.addClass("opl-focus")}function E(a){T.removeClass("opl-focus")}function F(a){K.hasClass("opl-over")||K.addClass("opl-over")}function G(a){K.hasClass("opl-over")&&K.removeClass("opl-over")}function H(){da.oplAbstract?(i.EVENTS.OVER&&(M.on(i.EVENTS.OVER,F),M.on(i.EVENTS.OUT,G),N.on(i.EVENTS.OVER,F),N.on(i.EVENTS.OUT,G),O.on(i.EVENTS.OVER,F),O.on(i.EVENTS.OUT,G)),K.on(i.EVENTS.DOWN,v)):T&&(T.on(i.EVENTS.DOWN,x),T.on("focus",D),T.on("blur",E)),K.on("focus",B),K.on("blur",C),K.on("keydown",A)}function I(){K.off(i.EVENTS.DOWN+" focus blur keydown"),i.EVENTS.OVER&&(M&&M.off(i.EVENTS.OVER+" "+i.EVENTS.OUT),N&&N.off(i.EVENTS.OVER+" "+i.EVENTS.OUT),O&&O.off(i.EVENTS.OVER+" "+i.EVENTS.OUT)),T&&T.off(i.EVENTS.DOWN+" focus blur"),J.off(i.EVENTS.UP,u),J.off(i.EVENTS.UP,w)}var J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da=this,ea=!1,fa=!1,ga=!1,ha=!1,ia=!1;Object.defineProperties(da,{smallImagePreloading:{value:!1,writable:!0},smallImageError:{value:!1,writable:!0},largeImagePreloading:{value:!1,writable:!0},smallImagePreloaded:{value:!1,writable:!0},largeImageSize:{value:null,writable:!0},largeImageError:{value:!1,writable:!0},fileName:{value:null,writable:!0},focus:{value:function(){K&&K.length&&(da.oplAbstract?K[0].focus():V&&V.focus())}},isFocused:{value:function(){return K.hasClass("opl-focus")}},preload:{value:function(){"image"!==da.oplData.type||da.smallImagePreloaded||k()}},getTileHeight:{value:function(){return q()+a.descriptionHeight+r()+16}},reset:{value:function(){if(ia){if(ga)return void(ha=!0);var c=[];ea=!1,ga=!0,fa=!da.oplData.description,K=angular.element(b[0].querySelector(".opl-tile")),da.oplAbstract?c.push(h.waitForElement(b[0],".opl-abstract")):c.push(h.waitForElement(b[0],".opl-full")),f.all(c).then(function(){if(j(),I(),H(),da.oplData.file){var a=da.oplData.file.url.match(/.*\/([^#?]*)/);da.fileName=a[1]}return t()}).then(function(b){ca=b;var c=[];if(da.oplAbstract)da.oplOnReady&&(ea=!0,ga=!1,da.oplOnReady&&da.oplOnReady(),ha&&(ha=!1,da.reset()));else{if(a.descriptionHeight=s(),da.oplData.description){var d=h.waitForController(Q[0],"oplScroller");c.push(d),d.then(function(a){R=a,R.reset()})}da.oplData.image&&l();var e=h.waitForController(U[0],"oplButton");c.push(e),e.then(function(a){V=a}),f.all(c).then(function(){ea=!0,ga=!1,da.oplOnReady&&fa&&da.oplOnReady(),ha&&(ha=!1,da.reset())})}})}}},$onInit:{value:function(){J=angular.element(g.document.body),a.descriptionHeight=0}},$postLink:{value:function(){ia=!0,da.reset()}},$onChanges:{value:function(a){a.oplAbstract&&void 0!==a.oplAbstract.currentValue?c(function(){da.reset()}):a.oplData&&a.oplData.currentValue&&da.reset()}},$onDestroy:{value:function(){I()}}}),a.getTrustedHtml=function(a){return e.trustAsHtml(a)},a.handleMoreInfoAction=function(){da.oplOnMore&&da.oplOnMore({tile:da.oplData})},a.handleCloseAction=function(){da.oplOnClose&&da.oplOnClose({tile:da.oplData})},a.handleDescriptionScrollerOnReady=function(){fa=!0,ea&&da.oplOnReady&&da.oplOnReady()}}a.controller("OplTileController",b),b.$inject=["$scope","$element","$timeout","$http","$sce","$q","$window","oplDomFactory","oplEventsFactory"]}(angular.module("ov.player")),function(a){function b(a,b,c,d,e){function f(a){return!!a&&(a=angular.element(a),!!a.hasClass("opl-volume")||f(a.parent()[0]))}function g(){var a=d.defer();o.addClass("opl-over");var b=function(){r.off("transitionend"),a.resolve()};return r.on("transitionend",b),a.promise}function h(){var a=d.defer();o.removeClass("opl-over");var b=function(){r.off("transitionend"),a.resolve()};return r.on("transitionend",b),a.promise}function i(){v.$setViewValue(u.muted?0:a.level),v.$validate()}function j(b,c){b===a.level&&c===u.muted||(a.level=Math.min(100,Math.max(0,b||0)),u.muted=!a.level||c||!1,a.sliderValue=u.muted?0:a.level,i())}function k(a){o.addClass("opl-volume-focus")}function l(a){o.removeClass("opl-volume-focus")}function m(a){s||t||w||f(a.relatedTarget)||(s=!0,requestAnimationFrame(function(){g().then(function(){s=!1,w=!0,u.oplOnOpen&&u.oplOnOpen()})}))}function n(a){t||s||!w||f(a.relatedTarget)||(t=!0,requestAnimationFrame(function(){h().then(function(){w=!1,t=!1,u.oplOnClose&&u.oplOnClose()})}))}var o,p,q,r,s,t,u=this,v=b.controller("ngModel"),w=!1;a.level=50,a.sliderValue=0,Object.defineProperties(u,{muted:{value:!1,writable:!0},$onInit:{value:function(){o=angular.element(b[0].querySelector(".opl-volume"))}},$postLink:{value:function(){c(function(){r=angular.element(b[0].querySelector(".opl-volume > div")),p=angular.element(b[0].querySelector(".opl-slider")),q=angular.element(b[0].querySelector(".opl-toggle-icon-button")),e.EVENTS.OVER&&(o.on(e.EVENTS.OVER,m),o.on(e.EVENTS.OUT,n)),p.on("focus",k),p.on("blur",l),q.on("focus",k),q.on("blur",l),r.on("transitionend",function(a){a.target===r[0]&&"width"===a.propertyName&&p.controller("oplSlider").reset()})})}},$onDestroy:{value:function(){e.EVENTS.OVER&&o.off(e.EVENTS.OVER+" "+e.EVENTS.OUT),p&&p.off("focus blur"),q&&q.off("focus blur"),r&&r.off("transitionend")}},toggleSound:{value:function(b){j(a.level,b)}},setLevel:{value:function(a){j(a,!1)}}}),v.$render=function(){j(v.$viewValue||0)},v.$isEmpty=function(a){return!1},a.handleFocus=function(){u.oplOnFocus&&u.oplOnFocus()}}a.controller("OplVolumeController",b),b.$inject=["$scope","$element","$timeout","$q","oplEventsFactory"]}(angular.module("ov.player")),function(a){function b(a,b,c,d,e,f,g){function h(){return 1==("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}function i(){var a,b,c,d,g=e.defer();return f.waitForElementDimension(I[0],[{property:"clientWidth",notEqual:I[0].clientWidth},{property:"clientHeight",notEqual:I[0].clientHeight}]).then(function(e){a=e.left,b=e.top,c=e.clientWidth,d=e.clientHeight,g.resolve({size:"horizontal"===T.oplOrientation?c:d,position:"horizontal"===T.oplOrientation?a:b})},function(){var e=I[0].getBoundingClientRect();a=e.left,b=e.top,c=I[0].clientWidth,d=I[0].clientHeight,g.resolve({size:"horizontal"===T.oplOrientation?c:d,position:"horizontal"===T.oplOrientation?a:b})}),g.promise}function j(){var a,b,c=e.defer();return f.waitForElementDimension(H[0],[{property:"clientWidth",notEqual:H[0].clientWidth},{property:"clientHeight",notEqual:H[0].clientHeight}]).then(function(d){a=d.clientWidth,b=d.clientHeight,c.resolve("horizontal"===T.oplOrientation?a:b)},function(){a=H[0].clientWidth,b=H[0].clientHeight,c.resolve("horizontal"===T.oplOrientation?a:b)}),c.promise}function k(){U.$setViewValue(b.value),U.$validate()}function l(){if(R&&Q){var a=b.value/100,c="horizontal"===T.oplOrientation?"scaleY":"scaleX",d="horizontal"===T.oplOrientation?"translateX":"translateY",e="horizontal"===T.oplOrientation?"width":"height";O=0,R<Q&&(O=Math.max(R/Q*R,32)),G.attr("style","transform: "+d+"("+a*(R-O)+"px)"+(N||M?" "+c+"(1.5)":"")+"; "+e+": "+O+"px;")}}function m(){if(Q){var a="horizontal"===T.oplOrientation?"scrollLeft":"scrollTop";R<Q&&(I[0][a]=b.value*(Q-R)/100)}}function n(){l(),m()}function o(a){var b=g.getUiEventCoordinates(a);return"horizontal"===T.oplOrientation?b.x:b.y}function p(a){var b=o(a),c=b-S-P;return Math.max(0,Math.min(100,c/(R-O)*100))}function q(a){var c=o(a),d=b.value*(R-O)/100;return c-S-d}function r(a,c){(a!==b.value||c)&&(b.value=Math.min(100,Math.max(0,a||0)),k(),n())}function s(a){J.hasClass("opl-scroller-over")||J.addClass("opl-scroller-over")}function t(a){J.hasClass("opl-scroller-over")&&J.removeClass("opl-scroller-over")}function u(a){G.hasClass("opl-thumb-over")||(G.addClass("opl-thumb-over"),M=!0,l())}function v(a){G.hasClass("opl-thumb-over")&&(G.removeClass("opl-thumb-over"),M=!1,l())}function w(a){a.preventDefault(),r(p(a))}function x(a){a.preventDefault(),L.off(g.EVENTS.UP,x),L.off(g.EVENTS.MOVE,w),G.removeClass("opl-thumb-active"),N=!1,l()}function y(a){h()||(a.preventDefault(),G.addClass("opl-thumb-active"),N=!0,T.oplOnTouch&&T.oplOnTouch(),P=q(a),l(),L.on(g.EVENTS.UP,x),L.on(g.EVENTS.MOVE,w))}function z(a){T.reset()}function A(a){J.addClass("opl-scroller-focus")}function B(a){J.removeClass("opl-scroller-focus")}function C(a){var c=b.value;if("horizontal"===T.oplOrientation&&("ArrowLeft"===a.key||37===a.keyCode)||"vertical"===T.oplOrientation&&("ArrowUp"===a.key||38===a.keyCode))c=Math.max(0,c-(Number(T.oplStep)||1));else if("horizontal"===T.oplOrientation&&("ArrowRight"===a.key||39===a.keyCode)||"vertical"===T.oplOrientation&&("ArrowDown"===a.key||40===a.keyCode))c=Math.min(100,c+(Number(T.oplStep)||1));else if("Home"===a.key||36===a.keyCode)c=0;else{if("End"!==a.key&&35!==a.keyCode)return;c=100}a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),T.oplOnTouch&&T.oplOnTouch(),r(c)}function D(a){var b=T.getScrollValue();b+=a.deltaY,a.preventDefault(),T.oplOnTouch&&T.oplOnTouch(),T.setScrollValue(b)}function E(){K.on("keydown",C),K.on("focus",A),K.on("blur",B),g.EVENTS.OVER&&(J.on(g.EVENTS.OVER,s),J.on(g.EVENTS.OUT,t)),J.on("wheel",D),G.on(g.EVENTS.DOWN,y),g.EVENTS.OVER&&(G.on(g.EVENTS.OVER,u),G.on(g.EVENTS.OUT,v)),angular.element(a).on("resize",z)}function F(){K.off("keydown focus blur"),g.EVENTS.OVER&&J.off(g.EVENTS.OVER+" "+g.EVENTS.OUT),J.off("wheel"),G.off(g.EVENTS.DOWN),g.EVENTS.OVER&&G.off(g.EVENTS.OVER+" "+g.EVENTS.OUT),L.off(g.EVENTS.UP+" "+g.EVENTS.MOVE),angular.element(a).off("resize",z)}var G,H,I,J,K,L,M,N,O,P,Q,R,S,T=this,U=c.controller("ngModel"),V=!1,W=!1,X=!1,Y=!1;b.value=0,Object.defineProperties(T,{focus:{value:function(){K[0].focus()}},isFocused:{value:function(){return J.hasClass("opl-scroller-focus")}},getScrollValue:{value:function(){var a="horizontal"===T.oplOrientation?"scrollLeft":"scrollTop";return I[0][a]}},setScrollValue:{value:function(a){Q&&R&&r(a/(Q-R)*100)}},getContentSize:{value:function(){return Q}},$onInit:{value:function(){if(I=angular.element(c[0].querySelector(".opl-scroller-content")),L=angular.element(a.document.body),J=angular.element(c[0].querySelector(".opl-scroller")),K=angular.element(c[0].querySelector(".opl-scrollbar")),G=angular.element(c[0].querySelector(".opl-thumb")),h()){var b="horizontal"===T.oplOrientation?"overflow-x":"overflow-y";I.attr("style",b+": scroll;"),V=!0,T.oplOnReady&&T.oplOnReady()}}},$postLink:{value:function(){Y=!0,d(function(){T.reset()})}},$onChanges:{value:function(a){a.oplDeactivated&&T.reset()}},$onDestroy:{value:function(){F()}},reset:{value:function(){if(!h()&&Y){if(W)return void(X=!0);W=!0,H=angular.element(c[0].querySelector(".opl-scroller-content > div")),e.all([j(),i()]).then(function(a){Q=a[0],R=a[1].size,S=a[1].position,F(),T.oplDeactivated||(E(),l(),r(b.value,!0)),W=!1,V||(V=!0,T.oplOnReady&&T.oplOnReady()),X&&(X=!1,T.reset())})}}}}),U.$render=function(){r(U.$viewValue,!0)},U.$isEmpty=function(a){return!1}}a.controller("OplScrollerController",b),b.$inject=["$window","$scope","$element","$timeout","$q","oplDomFactory","oplEventsFactory"]}(angular.module("ov.player")),function(a){function b(a,b,c,d,e,f,g){function h(a){if(!E)return null;for(var b=0;b<E.length;b++)if(angular.element(E[b]).attr("data-id")===a)return E[b];return null}function i(a){for(var b=0;b<E.length;b++)if(angular.element(E[b]).attr("data-id")===a){E[b].focus();break}}function j(a){var b;for(b=0;b<E.length&&!angular.element(E[b]).hasClass("opl-focus");b++);var c=a?b+1:b-1;c>=E.length&&(c=0),c<0&&(c=E.length-1),i(angular.element(E[c]).attr("data-id"))}function k(){D.attr("style","--opl-settings-dialog-height: "+C[0].clientHeight+"px;")}function l(a){var b=h(a);if(!b||!b.deactivationAnimationRequested||b.activationTimer)return d.when();var e=d.defer();return b.deactivationAnimationRequested=!1,b.activated=!1,angular.element(b).removeClass("opl-item-activation"),angular.element(b).addClass("opl-item-deactivation"),b.deactivationTimer=c(function(){angular.element(b).removeClass("opl-item-deactivation"),e.resolve()},150),e.promise}function m(a){var b=d.defer(),e=h(a);return e?(angular.element(e).removeClass("opl-item-deactivation"),e.activationTimer&&c.cancel(e.activationTimer),e.deactivationTimer&&c.cancel(e.deactivationTimer),angular.element(e).addClass("opl-item-activation"),e.activationTimer=c(function(){e.activationTimer=null,requestAnimationFrame(function(){l(a).then(function(){b.resolve()})})},225),b.promise):d.when()}function n(){if(F||!G.settingsOpened)return d.when();var a=d.defer();return D.addClass("opl-masking"),D.removeClass("opl-posted"),F=c(function(){F=null,D.removeClass("opl-masking"),a.resolve()},150),a.promise}function o(){if(F||G.settingsOpened)return d.when();var a=d.defer();return D.addClass("opl-posting"),F=c(function(){F=null,D.addClass("opl-posted"),D.removeClass("opl-posting"),a.resolve()},250),a.promise}function p(a){G.settingsOpened||requestAnimationFrame(function(){o(),G.settingsOpened=!0,a||i(angular.element(E[0]).attr("data-id"))})}function q(a){G.settingsOpened&&requestAnimationFrame(function(){n(),G.settingsOpened=!1,B&&!a&&B[0].focus()})}function r(a,b){G.oplOnUpdate&&(a&&a!==G.oplQuality||b&&b!==G.oplSource)?G.oplOnUpdate({quality:a,source:b}):q()}function s(b){if("ArrowRight"===b.key||39===b.keyCode||"ArrowDown"===b.key||40===b.keyCode)j(!0);else if("ArrowUp"===b.key||38===b.keyCode||"ArrowLeft"===b.key||37===b.keyCode)j(!1);else if("Enter"===b.key||13===b.keyCode)a.$apply(function(){"quality"===angular.element(b.target).attr("data-type")?r(angular.element(b.target).attr("data-id")):r(null,angular.element(b.target).attr("data-id"))});else{if("Tab"===b.key||9===b.keyCode)return void(H=!0);if("Escape"!==b.key&&27!==b.keyCode)return;q()}b.preventDefault()}function t(a){var b=angular.element(a.target).attr("data-id")?a.target:a.target.parentNode;A.off(g.EVENTS.UP,t),E.forEach(function(a){requestAnimationFrame(function(){a.deactivationAnimationRequested=!0,l(angular.element(a).attr("data-id"))}),a.activated=!1}),"quality"===angular.element(b).attr("data-type")?r(angular.element(b).attr("data-id")):r(null,angular.element(b).attr("data-id"))}function u(a){var b=angular.element(a.target).attr("data-id")?a.target:a.target.parentNode;b.activated||(b.activated=!0,A.on(g.EVENTS.UP,t),requestAnimationFrame(function(){m(angular.element(b).attr("data-id"))}))}function v(a){var b=angular.element(a.target).attr("data-id")?a.target:a.target.parentNode;angular.element(b).addClass("opl-focus")}function w(a){var b=angular.element(a.target).attr("data-id")?a.target:a.target.parentNode;angular.element(b).removeClass("opl-focus"),H&&(q(!0),H=!1)}function x(){q(!0)}function y(){angular.element(E).on("keydown",s),angular.element(E).on(g.EVENTS.DOWN,u),angular.element(E).on("focus",v),angular.element(E).on("blur",w),angular.element(A).on(g.EVENTS.UP,x)}function z(){E&&angular.element(E).off(g.EVENTS.DOWN+" keydown focus blur "+g.EVENTS.UP),A.off(g.EVENTS.UP,x),A.off(g.EVENTS.UP,t)}var A,B,C,D,E,F,G=this,H=!1,I=!1,J=!1;Object.defineProperties(G,{settingsOpened:{value:!1,writable:!0},reset:{value:function(){J&&(I=!0,E=D[0].querySelectorAll("li"),B=angular.element(b[0].querySelector(".opl-button")),C=angular.element(D[0].querySelector(".opl-dialog")),c(function(){k(),z(),y(),I=!1},500))}},$onInit:{value:function(){A=angular.element(e.document.body),D=angular.element(b[0].querySelector(".opl-settings"))}},$postLink:{value:function(){J=!0,c(function(){G.reset()})}},$onDestroy:{value:function(){z()}},$onChanges:{value:function(a){(a.oplQuality&&a.oplQuality.currentValue||a.oplSource&&a.oplSource.currentValue)&&q(),(a.oplQualities&&a.oplQualities.currentValue||a.oplSources&&a.oplSources.currentValue)&&G.reset()}},toggleSettings:{value:function(){I||(G.settingsOpened?q():p())}}}),a.handleButtonFocus=function(){G.oplOnFocus&&G.oplOnFocus()}}a.controller("OplSettingsController",b),b.$inject=["$scope","$element","$timeout","$q","$window","oplDomFactory","oplEventsFactory"]}(angular.module("ov.player")),function(a){function b(a,b,c,d,e,f){function g(){s.addClass("opl-focus"),x.oplOnFocus&&x.oplOnFocus()}function h(){s.removeClass("opl-focus")}function i(){if(!v||t)return d.when();
var a=d.defer();return v=!1,w=!1,s.removeClass("opl-activation"),s.addClass("opl-deactivation"),u=b(function(){s.removeClass("opl-deactivation"),a.resolve()},150),a.promise}function j(){var a=d.defer();return s.removeClass("opl-deactivation"),t&&b.cancel(t),u&&b.cancel(u),s.addClass("opl-activation"),t=b(function(){t=null,requestAnimationFrame(function(){i().then(function(){a.resolve()})})},225),a.promise}function k(){x.oplOnUpdate&&x.oplOnUpdate({on:!c.on})}function l(a){"Enter"!==a.key&&13!==a.keyCode||(a.preventDefault(),c.$apply(k))}function m(a){r.off(f.EVENTS.UP,m),x.oplOnIcon&&x.oplOffIcon&&requestAnimationFrame(function(){v=!0,i()}),w=!1,k()}function n(a){w||(w=!0,x.oplOnIcon&&x.oplOffIcon&&requestAnimationFrame(function(){j()}),r.on(f.EVENTS.UP,m))}function o(a){g()}function p(a){h()}function q(){c.label=c.on?x.oplOnLabel:x.oplOffLabel}var r,s,t,u,v,w,x=this;c.on=!1,c.onIcon=null,c.offIcon=null,c.label=null,Object.defineProperties(x,{$onInit:{value:function(){r=angular.element(e.document.body),s=angular.element(a[0].querySelector(".opl-toggle-icon-button")),s.on("keydown",l),s.on("focus",o),s.on("blur",p),s.on(f.EVENTS.DOWN,n)}},$onDestroy:{value:function(){s.off("keydown focus blur "+f.EVENTS.DOWN),r.off(f.EVENTS.UP,m),t&&b.cancel(t),u&&b.cancel(u)}},$onChanges:{value:function(a){var b;a.oplOn&&a.oplOn.currentValue&&(b=a.oplOn.currentValue,c.on=!(!b||"undefined"===b)&&JSON.parse(b),q()),a.oplOnIcon&&a.oplOnIcon.currentValue&&(b=a.oplOnIcon.currentValue,c.onIcon=b&&"undefined"!==b?b:null),a.oplOffIcon&&a.oplOffIcon.currentValue&&(b=a.oplOffIcon.currentValue,c.offIcon=b&&"undefined"!==b?b:null),(a.oplOffLabel&&a.oplOffLabel.currentValue||a.oplOnLabel&&a.oplOnLabel.currentValue)&&q()}}})}a.controller("OplToggleIconButtonController",b),b.$inject=["$element","$timeout","$scope","$q","$window","oplEventsFactory"]}(angular.module("ov.player")),function(a){function b(a,b,c,d,e,f,g){function h(){H.$setViewValue(a.value),H.$validate()}function i(){if(x){var b=a.value/100;if(F){var c=function(){y.removeClass("opl-slider-in-transition"),z.off("transitionend")};z.on("transitionend",c)}requestAnimationFrame(function(){A.attr("style","transform: scaleX("+b+")"),z.attr("style","transform: translateX("+b*x.width+"px) translateX(-50%)")})}}function j(b){b!==a.value&&(b=Math.min(100,Math.max(0,b||0)),I&&(b=Math.round(b/I)*I),a.value=b,a.valueTextParameters={"%value%":a.value},h(),i())}function k(a){var b=g.getUiEventCoordinates(a),c=b.x-x.left;return Math.max(0,Math.min(100,c/x.width*100))}function l(b){var c=a.value;if("ArrowLeft"===b.key||37===b.keyCode||"ArrowDown"===b.key||40===b.keyCode)c=Math.max(0,c-(I||1));else if("ArrowUp"===b.key||38===b.keyCode||"ArrowRight"===b.key||39===b.keyCode)c=Math.min(100,c+(I||1));else if("Home"===b.key||36===b.keyCode)c=0;else{if("End"!==b.key&&35!==b.keyCode)return;c=100}b.preventDefault(),E=!1,y[0].focus(),j(c)}function m(a){E||(y.addClass("opl-slider-focus"),G.oplOnFocus&&G.oplOnFocus())}function n(a){E=!1,y.removeClass("opl-slider-focus")}function o(a){G.reset()}function p(a){a.preventDefault(),j(k(a))}function q(a){D.off(g.EVENTS.UP,q),D.off(g.EVENTS.MOVE,p),y.removeClass("opl-slider-active")}function r(a){E=!0,F=!0,y.addClass("opl-slider-active"),y.addClass("opl-slider-in-transition"),D.on(g.EVENTS.UP,q),D.on(g.EVENTS.MOVE,p),j(k(a))}function s(a){if(G.oplOnMove){a.preventDefault();var b=g.getUiEventCoordinates(a);G.oplOnMove({value:k(a),coordinates:b,sliderBoundingRectangle:x})}}function t(a){a.relatedTarget===y[0]||a.relatedTarget===z[0]||a.relatedTarget===A[0]||a.relatedTarget===B[0]||a.relatedTarget===C[0]||y.hasClass("opl-over")||(y.addClass("opl-over"),G.oplOnOver&&G.oplOnOver(),D.off(g.EVENTS.MOVE,s),D.on(g.EVENTS.MOVE,s))}function u(a){a.relatedTarget!==y[0]&&a.relatedTarget!==z[0]&&a.relatedTarget!==A[0]&&a.relatedTarget!==B[0]&&a.relatedTarget!==C[0]&&y.hasClass("opl-over")&&(y.removeClass("opl-over"),G.oplOnOut&&G.oplOnOut(),D.off(g.EVENTS.MOVE,s))}function v(){y.on("keydown",l),y.on("focus",m),y.on("blur",n),y.on(g.EVENTS.DOWN,r),g.EVENTS.OVER&&(y.on(g.EVENTS.OVER,t),y.on(g.EVENTS.OUT,u)),angular.element(c).on("resize",o)}function w(){y.off("keydown focus blur "+g.EVENTS.DOWN),g.EVENTS.OVER&&y.off(g.EVENTS.OVER+" "+g.EVENTS.OUT),z.off("transitionend"),D.off(g.EVENTS.UP,q),D.off(g.EVENTS.MOVE,p),D.off(g.EVENTS.MOVE,s),angular.element(c).off("resize",o)}var x,y,z,A,B,C,D,E,F,G=this,H=b.controller("ngModel"),I=0;a.label="Select a value",a.valueText="",a.valueTextParameters=null,a.value=0,Object.defineProperties(G,{$onInit:{value:function(){D=angular.element(c.document.body),E=!1,F=!1,y=angular.element(b[0].querySelector(".opl-slider")),z=angular.element(b[0].querySelector(".opl-slider-thumb-container")),A=angular.element(b[0].querySelector(".opl-slider-track")),C=angular.element(b[0].querySelector(".opl-slider-track-container")),B=angular.element(b[0].querySelector(".opl-slider-focus-ring")),G.reset()}},$onDestroy:{value:function(){w()}},$onChanges:{value:function(b){var c;b.oplStep&&b.oplStep.currentValue&&(c=b.oplStep.currentValue,I=c&&"undefined"!==c?parseInt(c):0),b.oplLabel&&b.oplLabel.currentValue&&(c=b.oplLabel.currentValue,a.label="undefined"==typeof c?"Select a value":c),b.oplValueText&&b.oplValueText.currentValue&&(c=b.oplValueText.currentValue,a.valueText="undefined"==typeof c?"":c)}},reset:{value:function(){if(F)return e.when();var a=e.defer();return w(),v(),f.waitForElementDimension(y[0],[{property:"width",notEqual:0},{property:"width",notEqual:x?x.width:0}],50).then(function(b){x=b,i(),a.resolve()}).catch(function(b){x=y[0].getBoundingClientRect(),i(),a.resolve()}),a.promise}}}),H.$render=function(){G.reset().then(function(){j(H.$viewValue)})},H.$isEmpty=function(a){return!1}}a.controller("OplSliderController",b),b.$inject=["$scope","$element","$window","$timeout","$q","oplDomFactory","oplEventsFactory"]}(angular.module("ov.player")),function(a){a.component("oplButton",{templateUrl:"opl-button.html",controller:"OplButtonController",bindings:{oplIcon:"@?",oplLabel:"@?",oplNoSequentialFocus:"@?",oplOnUpdate:"&",oplOnFocus:"&"}})}(angular.module("ov.player")),function(a){a.component("oplTile",{templateUrl:"opl-tile.html",controller:"OplTileController",bindings:{oplData:"<",oplAbstract:"<",oplOnSelect:"&",oplOnMore:"&",oplOnClose:"&",oplOnReady:"&",oplOnImagePreloaded:"&",oplOnImageError:"&"}})}(angular.module("ov.player")),function(a){a.component("oplVolume",{templateUrl:"opl-volume.html",controller:"OplVolumeController",require:["?ngModel"],bindings:{oplNoSequentialFocus:"@?",oplOnFocus:"&",oplOnOpen:"&",oplOnClose:"&"}})}(angular.module("ov.player")),function(a){a.component("oplScroller",{templateUrl:"opl-scroller.html",controller:"OplScrollerController",require:["?ngModel"],transclude:!0,bindings:{oplId:"@?",oplStep:"@?",oplNoSequentialFocus:"@?",oplDeactivated:"<",oplOrientation:"@?",oplOnTouch:"&",oplOnReady:"&"}})}(angular.module("ov.player")),function(a){a.component("oplSettings",{templateUrl:"opl-settings.html",controller:"OplSettingsController",bindings:{oplQualities:"<",oplSources:"<",oplQuality:"@?",oplSource:"@?",oplOnUpdate:"&",oplOnFocus:"&"}})}(angular.module("ov.player")),function(a){a.component("oplToggleIconButton",{templateUrl:"opl-toggleIconButton.html",controller:"OplToggleIconButtonController",bindings:{oplOn:"@?",oplOffIcon:"@?",oplOnIcon:"@?",oplOffLabel:"@?",oplOnLabel:"@?",oplNoSequentialFocus:"@?",oplOnUpdate:"&",oplOnFocus:"&"}})}(angular.module("ov.player")),function(a){a.component("oplSlider",{templateUrl:"opl-slider.html",controller:"OplSliderController",require:["?ngModel"],bindings:{oplStep:"@?",oplLabel:"@?",oplValueText:"@?",oplNoSequentialFocus:"@?",oplOnFocus:"&",oplOnOver:"&",oplOnOut:"&",oplOnMove:"&"}})}(angular.module("ov.player")),function(a){function b(a,b,c,d,e,f,g,h,i){function j(a,b){a=a||0,b=b||0;var c=Q.controller("oplScroller").getScrollValue(),d=R&&R.height||0,e=R&&R.width||0,f=S.height-2*aa-ba,g=S.width-2*aa,h=f-d,i=g-e,j=c+aa+i/2,k=-h/2,l=f-b,m=g-a,n=c+aa+m/2,o=-l/2;L.attr("style","--opl-tiles-enlarged-height: "+d+"px;--opl-tiles-enlarged-width: "+e+"px;--opl-tiles-enlarged-xpos: "+j+"px;--opl-tiles-enlarged-ypos: "+k+"px;--opl-tiles-resized-height: "+b+"px;--opl-tiles-resized-width: "+a+"px;--opl-tiles-resized-xpos: "+n+"px;--opl-tiles-resized-ypos: "+o+"px;")}function k(){var a=h.defer();return i.waitForElementDimension(L[0],[{property:"clientWidth",notEqual:0},{property:"clientHeight",notEqual:0}]).then(function(b){a.resolve({width:b.clientWidth,height:b.clientHeight})},function(){a.resolve({width:L[0].clientWidth,height:L[0].clientHeight})}),a.promise}function l(){if(!N.length)return h.when({width:0,height:0});var a=h.defer();return i.waitForElementDimension(N[0],[{property:"clientWidth",notEqual:0}]).then(function(b){a.resolve({width:b.clientWidth,height:b.clientHeight})},function(){a.resolve({width:N[0].clientWidth,height:N[0].clientHeight})}),a.promise}function m(){if(S&&T){var a=Q.controller("oplScroller").getScrollValue(),b=Math.round(N.length-(U-a)/(aa+T.width)),c=Math.round(S.width/(aa+T.width));return N.slice(b,b+c).map(function(a){return a.querySelector("opl-tile")})}}function n(a){N&&N.length&&Z.automaticScrollActivated&&Q.controller("oplScroller").setScrollValue((aa+T.width)*a)}function o(a){angular.element(M[a]).controller("oplTile").focus()}function p(a){for(var b=0,c=0;c<M.length;c++)if(angular.element(M[c]).controller("oplTile").isFocused()){b=c;break}var d=a?b+1:b-1;d>=M.length&&(d=0),d<0&&(d=M.length-1),o(d)}function q(){M&&M.length&&M.forEach(function(a){var b=angular.element(a).controller("oplTile");b&&b.reset()})}function r(a){if(N&&N.length){var b=T.width,c=N[a],d=(a+1)*aa+a*b,e=0;angular.element(c).attr("style","transform: translateX("+($===a?"var(--opl-tiles-enlarged-xpos)":d+"px")+") translateY("+($===a?"var(--opl-tiles-enlarged-ypos)":"0")+");--opl-tiles-reduced-xpos: "+d+"px;--opl-tiles-reduced-ypos: "+e+"px;")}}function s(){if(N&&N.length){for(var a=T.width,b=0;b<N.length;b++)r(b);U=a*N.length+N.length*aa+aa,O.attr("style","width: "+U+"px;")}}function t(){var a=m();a&&a.forEach(function(a){var b=angular.element(a).controller("oplTile");b&&angular.element(a).controller("oplTile").preload()})}function u(a){if(!S)return h.reject();var b=S.height-ba-2*aa,c=S.width-2*aa,d=angular.element(M[a]);if("image"===Z.oplData[a].type){var e=d.controller("oplTile").largeImageSize;return h.when({width:e?e.width:c,height:e?e.height:b})}var j,k=h.defer(),l=g.$new(!0),m=Math.max(S.width+aa,U+aa);l.ghostTile=angular.copy(Z.oplData[a]),l.ghostTile.abstract=!1,l.handleReady=function(){var a=j.find("opl-tile").controller("oplTile").getTileHeight(b);i.waitForElementDimension(j[0],[{property:"height",notEqual:0}]).then(function(c){c.height=Math.min(b,a),c.width=S.width-2*aa,j.remove(),k.resolve(c)})};var n=angular.element(ca.createElement("opl-tile"));return j=angular.element(ca.createElement("li")),j.addClass("opl-tile-wrapper opl-ghost-tile"),j.attr("style","transform: translateX("+m+"px);width: var(--opl-tiles-enlarged-width);height: auto;"),n.attr("opl-data","ghostTile"),n.attr("opl-abstract","ghostTile.abstract"),n.attr("opl-on-ready","handleReady()"),j.append(n),P.append(j),f(n)(l),k.promise}function v(a){for(var b=0,c=0;c<M.length;c++){var d=angular.element(M[c]).controller("oplTile");if(d&&d.oplData.time>a)break;b=c}return b}function w(a){for(var b=0;b<N.length;b++)if(angular.element(N[b]).attr("data-id")===String(a))return b;return null}function x(a){if(Z.oplData&&M)for(var b=v(a),c=0;c<N.length;c++){var d=angular.element(N[c]);c<b?(d.removeClass("opl-selected"),d.addClass("opl-past")):c===b?(d.removeClass("opl-past"),d.addClass("opl-selected"),n(c)):d.removeClass("opl-past opl-selected")}}function y(a){if(("Tab"===a.key||9===a.keyCode)&&a.shiftKey)return void(V=!0);if("ArrowLeft"===a.key||37===a.keyCode||"ArrowUp"===a.key||38===a.keyCode)null!==$?o($):(p(!1),t());else if("ArrowRight"===a.key||39===a.keyCode||"ArrowDown"===a.key||40===a.keyCode)null!==$?o($):(p(!0),t());else if("Home"===a.key||36===a.keyCode)o(null!==$?$:0);else{if("End"!==a.key&&35!==a.keyCode)return;null!==$?o($):(o(M.length-1),t())}a.preventDefault()}function z(a){return L.addClass("opl-focus"),V?void(V=!1):void o(null!==$?$:0)}function A(a){V=!1,L.removeClass("opl-focus")}function B(a){Z.reset()}function C(){L.on("focus",z),L.on("blur",A),L.on("keydown",y),angular.element(d).on("resize",B)}function D(){L&&L.off("focus blur keydown"),angular.element(d).off("resize",B)}function E(a){if(X)return h.when();for(var b=h.defer(),d=0;d<N.length;d++)if(d!==a){var e=angular.element(N[d]);e.addClass("opl-masking")}return X=c(function(){X=null;for(var c=0;c<N.length;c++)if(c!==a){var d=angular.element(N[c]);d.addClass("opl-masked"),d.removeClass("opl-masking")}b.resolve()},50),b.promise}function F(a){if(X)return h.when();for(var b=h.defer(),d=0;d<N.length;d++)if(d!==a){var e=angular.element(N[d]);e.removeClass("opl-masked"),e.addClass("opl-posting")}return X=c(function(){X=null;for(var c=0;c<N.length;c++)if(c!==a){var d=angular.element(N[c]);d.removeClass("opl-posting")}b.resolve()},50),b.promise}function G(){if(Y)return h.when();var a=h.defer(),b=angular.element(N[$]);return b.removeClass("opl-enlarged"),b.addClass("opl-resizing"),Y=c(function(){Y=null,b.removeClass("opl-resizing"),b.addClass("opl-resized"),a.resolve()},50),a.promise}function H(a){if(Y)return h.when();var b=h.defer(),d=angular.element(N[a]);return d.addClass("opl-enlarging"),Y=c(function(){Y=null,d.addClass("opl-enlarged"),d.removeClass("opl-enlarging"),b.resolve()},600),b.promise}function I(a){if(Y)return h.when();var b=h.defer(),d=angular.element(N[a]);return d.addClass("opl-reducing"),d.removeClass("opl-enlarged opl-resized"),Y=c(function(){Y=null,d.removeClass("opl-reducing"),b.resolve()},500),b.promise}function J(a){if(!N||!N.length)return h.reject("Component not initialized");var b=h.defer();return j(),requestAnimationFrame(function(){E(a).then(function(){return H(a)}).then(function(){Z.oplData[a].abstract=!1,$=a,r(a),_=$,Z.scrollerDeactivated=!0,b.resolve()}).catch(function(a){b.reject(a)})}),b.promise}function K(){if(!N||!N.length)return h.reject("Component is not initialized");var a=h.defer();return requestAnimationFrame(function(){F($).then(function(){return I($)}).then(function(){Z.oplData[$].abstract=!0,_=$,$=null,r(_),Z.scrollerDeactivated=!1,a.resolve()}).catch(function(b){a.reject(b)})}),a.promise}var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z=this,$=null,_=null,aa=8,ba=40,ca=e[0],da=0,ea=!1,fa=!1,ga=!1,ha=!1;a.scrollerValue=0,Object.defineProperties(Z,{automaticScrollActivated:{value:!1,writable:!0},scrollerDeactivated:{value:!1,writable:!0},enlargeTile:{value:function(a){if(!N||!N.length)return h.reject("Component not initialized");var b=h.defer();Z.automaticScrollActivated=!1;var c=w(a);return u(c).then(function(a){R=a,J(c).then(function(){b.resolve()}).catch(function(a){b.reject(a)})}),b.promise}},reduceTile:{value:function(){return N&&N.length?null===$?h.when():K():h.reject("Component not initialized or no enlarged tile")}},reset:{value:function(){if(ga){if(ea)return void(fa=!0);ea=!0,L=angular.element(b[0].querySelector(".opl-tiles")),P=angular.element(b[0].querySelector("ul")),M=b[0].querySelectorAll("opl-tile"),N=Array.prototype.slice.call(b[0].querySelectorAll("li")),Q=angular.element(b[0].querySelector("opl-scroller")),O=angular.element(b[0].querySelector(".opl-tiles-content")),h.all([k(),l(),i.waitForController(Q[0],"oplScroller")]).then(function(a){S=a[0],T=a[1],D(),C(),q(),s(),Q.controller("oplScroller").reset(),t(),x(Z.oplTime),ea=!1,fa&&(fa=!1,Z.reset())})}}},$postLink:{value:function(){ga=!0,c(function(){Z.reset()})}},$onChanges:{value:function(a){a.oplData&&a.oplData.currentValue?Z.reset():a.oplTime&&a.oplTime.currentValue&&Math.abs(da-a.oplTime.currentValue)>=1e3&&(da=a.oplTime.currentValue,x(Z.oplTime))}},$onDestroy:{value:function(){D()}}}),a.handleTileSelect=function(a){Z.oplOnTileSelect&&Z.oplOnTileSelect({tile:a})},a.handleTileMoreInfo=function(a){Z.oplOnTileInfo&&Z.oplOnTileInfo({tile:a})},a.handleTileClose=function(a){Z.oplOnTileClose&&Z.oplOnTileClose({tile:a})},a.handleScrollerChange=function(){W?ha=!0:(ha=!1,t(),W=c(function(){W=null,ha&&a.handleScrollerChange()},100))},a.handleScrollTouch=function(){Z.automaticScrollActivated=!1},a.handleTileReady=function(a){null!==_&&a.id===Z.oplData[_].id&&(o(_),_=null)},a.handleTileImageError=function(a){o($)},a.handleTileImagePreload=function(a,b){var c,d,e=S.height-ba-2*aa,f=S.width-2*aa,g=f/e,h=b.width/b.height;h>1&&g>1?(c=Math.min(f,b.width),d=c/h,d>e&&(d=Math.min(e,b.height),c=d*h)):(d=Math.min(e,b.height),c=d*h,c>f&&(c=Math.min(f,b.width),d=c/h)),j(c,d),requestAnimationFrame(function(){G().then(function(){R.height=d,R.width=c,j(c,d),r($),o($)})})}}a.controller("OplTilesController",b),b.$inject=["$scope","$element","$timeout","$window","$document","$compile","$rootScope","$q","oplDomFactory"]}(angular.module("ov.player")),function(a){a.component("oplTiles",{templateUrl:"opl-tiles.html",controller:"OplTilesController",bindings:{oplData:"<",oplTime:"<",oplOnTileSelect:"&",oplOnTileInfo:"&",oplOnTileClose:"&"}})}(angular.module("ov.player")),function(a,b){function c(b,c,d){function e(a,b){switch(b=a.data?JSON.parse(a.data):b,b.event){case"infoDelivery":void 0!==b.info.currentTime&&this.duration&&this.jPlayerElement.triggerHandler("oplPlayProgress",{time:1e3*b.info.currentTime,percent:b.info.currentTime/this.duration*100}),b.info.videoLoadedFraction&&this.jPlayerElement.triggerHandler("oplLoadProgress",{loadedStart:0,loadedPercent:100*b.info.videoLoadedFraction});break;case"onStateChange":if(b.info!=YT.PlayerState.PLAYING)this.playing=0,this.jPlayerElement.triggerHandler("oplPause"),b.info==YT.PlayerState.ENDED?this.jPlayerElement.triggerHandler("oplEnd"):b.info==-1&&this.jPlayerElement.triggerHandler("oplReady");else{this.playing=1,this.jPlayerElement.triggerHandler("oplPlay"),this.requestPause&&(this.requestPause=!1,this.player.pauseVideo());var c=this.player.getDuration();!this.duration&&c&&(this.duration=c,this.jPlayerElement.triggerHandler("oplDurationChange",1e3*this.duration))}}}function f(){if(this.ressourceLoaded&&this.apiLoaded){var b=this;this.loaded=!1,this.player=new YT.Player(this.playerId,{playerVars:{fs:0,rel:0,autoplay:0,html5:1,theme:"light",modestbranding:1,color:"white",iv_load_policy:3,showinfo:0,controls:0,hl:this.media.language,enablejsapi:1},events:{onReady:function(){b.handlePlayerEventsFn=a.bind(b,e),a.element(c).on("message",b.handlePlayerEventsFn);for(var d=a.element(b.player),f=0;f<h.length;f++)d.on(h[f],b.handlePlayerEventsFn);b.loaded=!0,b.playing=0,b.load()},onError:function(a){switch(a.data){case 100:case 101:case 150:b.jPlayerElement.triggerHandler("oplError",d.MEDIA_ERR_PERMISSION);break;default:b.jPlayerElement.triggerHandler("oplError",d.MEDIA_ERR_UNKNOWN)}}},videoId:this.media.mediaId[this.selectedSourceIndex]})}}function g(a,d,e){var g=this,h="youtube-iframe-api";b.prototype.init.call(this,a,e),this.setMedia(d),this.requestPause=!1;var i=document.createElement("script");if(i.setAttribute("id",h),i.src="https://www.youtube.com/iframe_api",c.onYouTubeIframeAPIReady=function(){g.apiLoaded=!0,f.call(g)},document.getElementById(h))this.apiLoaded=!0,f.call(g);else{var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(i,j)}}var h=["onStateChange","infoDelivery","infoDelivery","onPlaybackQualityChange","loadeddata","progress","playing","ended","timeupdate","error"];return g.prototype=new b,g.prototype.constructor=g,g.prototype.getMediaThumbnail=function(){return null},g.prototype.initialize=function(){this.ressourceLoaded=!0,f.call(this)},g.prototype.playPause=function(){this.player.getPlayerState()===YT.PlayerState.PLAYING?this.player.pauseVideo():(this.requestPause=!1,this.player.playVideo())},g.prototype.setVolume=function(a){this.player.setVolume(a)},g.prototype.setTime=function(a){var b=this.player.getPlayerState();a=parseInt(a)||0,this.playing||b!==YT.PlayerState.CUED||(this.requestPause=!0),this.player.seekTo(a/1e3,!0),this.playing||this.jPlayerElement.triggerHandler("oplPlayProgress",{time:a,percent:a/this.duration*100})},g.prototype.getPlayerType=function(){return"youtube"},g.prototype.isPaused=function(){return this.player.getPlayerState()===YT.PlayerState.PAUSED},g.prototype.isPlaying=function(){return this.player.getPlayerState()===YT.PlayerState.PLAYING},g.prototype.load=function(){this.player.cueVideoById(this.media.mediaId[this.selectedSourceIndex])},g.prototype.getAvailableDefinitions=function(){var a=[];if(!this.player)return a;var b=this.player.getAvailableQualityLevels();return b.forEach(function(b){a.push({id:b,label:b,hd:"hd720"===b||"hd1080"===b||"highres"===b})}),a},g.prototype.setMedia=function(a){b.prototype.setMedia.call(this,a),this.duration=null},g.prototype.getDefinition=function(){return this.player?this.player.getPlaybackQuality():null},g.prototype.setDefinition=function(a){this.player.setPlaybackQuality(a),this.jPlayerElement.triggerHandler("oplReady")},g.prototype.isOverlayPlayPauseSupported=function(){return!0},g.prototype.destroy=function(){a.element(c).off("message",this.handlePlayerEventsFn),this.player.destroy(),this.loaded=!1,this.playing=0,this.player=null,this.duration=null},g}b.factory("OplYoutubePlayer",c),c.$inject=["OplPlayer","$window","oplPlayerErrors"]}(angular,angular.module("ov.player")),function(a,b){function c(b,c,d,e){function f(a){switch(a.type){case"progress":var b=this.player.buffered();if(b.length>=1){var c=this.player.currentTime()/this.player.duration()||0;this.jPlayerElement.triggerHandler("oplLoadProgress",{loadedStart:100*Math.max(0,Math.min(c,1)),loadedPercent:100*this.player.bufferedPercent()})}break;case"durationchange":var d=this.player.duration()||this.media.metadata&&this.media.metadata.duration;this.jPlayerElement.triggerHandler("oplDurationChange",1e3*d);break;case"loadedmetadata":this.loaded=!0,this.jPlayerElement.triggerHandler("oplReady");break;case"play":this.jPlayerElement.triggerHandler("oplPlay");break;case"pause":this.jPlayerElement.triggerHandler("oplPause");break;case"ended":this.jPlayerElement.triggerHandler("oplEnd");break;case"waiting":this.jPlayerElement.triggerHandler("oplWaiting");break;case"playing":this.jPlayerElement.triggerHandler("oplPlaying");break;case"timeupdate":var e=this.player.currentTime(),f=e/this.player.duration()*100;this.jPlayerElement.triggerHandler("oplPlayProgress",{time:1e3*e,percent:f});break;case"error":this.player.networkState()==this.player.NETWORK_NO_SOURCE&&(a.target.error={code:"NO_SOURCE",MEDIA_NO_SOURCE:"NO_SOURCE"}),this.jPlayerElement.triggerHandler("error",a.target.error&&a.target.error.code)}}function g(){var a,b=this.media.sources[this.selectedSourceIndex].files,c=this.definition||b&&b[0]||null;a=c?[{src:c.link,type:"video/mp4"}]:this.media.sources[this.selectedSourceIndex].adaptive.map(function(a){var b={};return b.src=a.link,b.type=a.mimeType,b}),this.player.src(a),this.player.poster(this.media.thumbnail),this.player.load()}function h(a,c,d){b.prototype.init.call(this,a,d),this.setMedia(c),Object.defineProperties(this,{definition:{value:null,writable:!0}})}var i=["loadeddata","progress","playing","waiting","ended","durationchange","loadedmetadata","timeupdate","play","pause","error"];return h.prototype=new b,h.prototype.constructor=h,h.prototype.getMediaThumbnail=function(){return this.media.thumbnail},h.prototype.initialize=function(){var b=this;this.loaded=!1,this.player=videojs(this.playerId,{techOrder:["html5"],autoplay:!1,preload:"metadata",playsinline:!0,html5:{nativeControlsForTouch:!1,nativeAudioTracks:!1,nativeVideoTracks:!1}}),this.handlePlayerEventsFn=a.bind(this,f);for(var c=0;c<i.length;c++)this.player.on(i[c],this.handlePlayerEventsFn);this.player.ready(function(){this.error_||b.load()})},h.prototype.load=function(){g.call(this)},h.prototype.getDefinition=function(){if(this.definition)return String(this.definition.height);var a=this.media.sources[this.selectedSourceIndex].files;return a&&a.length?String(a[0].height):void 0},h.prototype.setDefinition=function(a){for(var b=0;b<this.media.sources[this.selectedSourceIndex].files.length;b++)if(String(this.media.sources[this.selectedSourceIndex].files[b].height)===a){this.definition=this.media.sources[this.selectedSourceIndex].files[b],g.call(this);break}},h.prototype.isPaused=function(){return this.player.paused()},h.prototype.isPlaying=function(){return!this.isPaused()},h.prototype.playPause=function(){if(this.player.paused()||this.player.ended()){var a=this.player.play();void 0!==a&&a.then(function(){}).catch(function(){})}else this.player.pause()},h.prototype.setVolume=function(a){this.player.volume(a/100)},h.prototype.setTime=function(a){a=parseInt(a)||.1,this.player.currentTime(a/1e3)},h.prototype.setMedia=function(a){b.prototype.setMedia.call(this,a);for(var c=0;c<this.media.sources.length;c++)this.media.sources[c].files&&this.media.sources[c].files.sort(function(a,b){return a.height<b.height?1:-1})},h.prototype.getPlayerType=function(){return"html"},h.prototype.getAvailableDefinitions=function(){var a=this.media.sources[this.selectedSourceIndex];if(a.adaptive&&a.adaptive.length)return null;var b=[];return a.files.forEach(function(a){b.push({id:String(a.height),label:a.height+"p",hd:a.height>=720})}),b},h.prototype.isOverlayPlayPauseSupported=function(){return!1},h.prototype.destroy=function(){this.handlePlayerEventsFn=a.bind(this,f);for(var b=a.element(this.player),c=0;c<i.length;c++)b.off(i[c],this.handlePlayerEventsFn);this.loaded=!1,this.player.dispose(),this.player=null},h}b.factory("OplHtmlPlayer",c),c.$inject=["OplPlayer","$window","$document","$sce"]}(angular,angular.module("ov.player")),function(a,b){function c(b,c,d,e){function f(a,b){if(this.loaded){var c={method:a};return b&&(c.value=b),this.player.contentWindow.postMessage(JSON.stringify(c),this.postMessageTargetOrigin)}return null}function g(){this.postMessageTargetOrigin="https://player.vimeo.com/video/"+this.media.mediaId[this.selectedSourceIndex],this.player=d[0].getElementById(this.playerId),this.loaded=!0,this.playing=0,f.call(this,"addEventListener","loadProgress"),f.call(this,"addEventListener","playProgress"),f.call(this,"addEventListener","play"),f.call(this,"addEventListener","pause"),f.call(this,"addEventListener","finish")}function h(a,b){if(b=a.data?JSON.parse(a.data):b,b.player_id===this.playerId){switch(b.event){case"ready":g.call(this),f.call(this,"getDuration"),this.jPlayerElement.triggerHandler("oplReady");break;case"loadProgress":this.jPlayerElement.triggerHandler("oplLoadProgress",{loadedStart:0,loadedPercent:100*b.data.percent});break;case"playProgress":b.data.percent<=1&&this.jPlayerElement.triggerHandler("oplPlayProgress",{time:1e3*b.data.seconds,percent:100*b.data.percent});break;case"play":this.playing=1,this.jPlayerElement.triggerHandler("oplPlay");break;case"pause":this.playing=0,this.jPlayerElement.triggerHandler("oplPause");break;case"finish":this.playing=0,this.jPlayerElement.triggerHandler("oplEnd")}switch(b.method){case"getDuration":this.duration=b.value,this.jPlayerElement.triggerHandler("oplDurationChange",1e3*this.duration);break;default:return}}}function i(){this.loaded=!1,this.handlePlayerEventsFn=a.bind(this,h),a.element(c).on("message",this.handlePlayerEventsFn)}function j(a,c,d){b.prototype.init.call(this,a,d),this.setMedia(c)}return j.prototype=new b,j.prototype.constructor=j,j.prototype.getSourceUrl=function(){return e.trustAsResourceUrl("//player.vimeo.com/video/"+this.media.mediaId[this.selectedSourceIndex]+"?api=1&player_id="+this.playerId)},j.prototype.getMediaThumbnail=function(){return null},j.prototype.initialize=function(){i.call(this)},j.prototype.load=function(){},j.prototype.isPaused=function(){return!this.playing},j.prototype.isPlaying=function(){return this.playing},j.prototype.playPause=function(){f.call(this,this.playing?"pause":"play")},j.prototype.setVolume=function(a){f.call(this,"setVolume",a/100)},j.prototype.setTime=function(a){a=parseInt(a)||0,f.call(this,"seekTo",String(a/1e3)),this.playing||this.jPlayerElement.triggerHandler("oplPlayProgress",{time:a,percent:a/this.duration*100})},j.prototype.getPlayerType=function(){return"vimeo"},j.prototype.getAvailableDefinitions=function(){return null},j.prototype.getDefinition=function(){},j.prototype.setDefinition=function(a){},j.prototype.isOverlayPlayPauseSupported=function(){return!0},j.prototype.destroy=function(){a.element(c).off("message",this.handlePlayerEventsFn),this.loaded=!1,this.playing=0,this.player=null},j}b.factory("OplVimeoPlayer",c),c.$inject=["OplPlayer","$window","$document","$sce"]}(angular,angular.module("ov.player")),function(a){a.component("oplPreview",{templateUrl:"opl-preview.html",controller:"OplPreviewController",bindings:{oplTime:"<",oplImage:"<"}})}(angular.module("ov.player")),function(a){a.component("oplTabs",{templateUrl:"opl-tabs.html",controller:"OplTabsController",transclude:!0,bindings:{oplNoTabs:"@?",oplOnSelect:"&"}})}(angular.module("ov.player")),function(a){a.component("oplView",{templateUrl:"opl-view.html",controller:"OplViewController",require:["^oplTabs"],transclude:!0,bindings:{oplLabel:"@?",oplClass:"@?",oplViewId:"@",oplIcon:"@",oplOnSelect:"&"}})}(angular.module("ov.player")),function(a){a.component("oplVeoLabsButton",{templateUrl:"opl-veoLabsButton.html",controller:"OplVeoLabsButtonController",bindings:{oplLabel:"@?",oplOnFocus:"&"}})}(angular.module("ov.player")),angular.module("ov.player").run(["$templateCache",function(a){a.put("opl-html.html",'<div class="opl-error" ng-if="$ctrl.error"><div><div ng-bind="$ctrl.error"></div></div></div><video id="{{$ctrl.playerId}}" class="opl-media-player video-js vjs-default-skin"><p>Your user agent does not support the HTML5 Video element.</p></video>'),a.put("opl-player.html",'<div ng-class="{\'opl-fullscreen\': fullViewportActivated}"><div class="opl-player" ng-class="{\'opl-no-poi\': hidePoi}"><div class="opl-media-wrapper opl-template-{{$ctrl.selectedTemplate}}"><div class="opl-overlay-play-button" ng-class="{\'opl-overlay-supported\': overlayPlayPauseSupported}"><opl-toggle-icon-button opl-on-update="$ctrl.playPause(on)"></opl-toggle-icon-button></div><div class="opl-media"><div class="opl-loader" ng-show="$ctrl.loading" ng-bind="\'LOADING\' | oplTranslate"></div><ng-include src="mediaTemplate"></ng-include></div><div class="opl-area-2"><div ng-style="{\'background-image\': $ctrl.area2ImageUrl ? \'url(\' + $ctrl.area2ImageUrl + \')\' : \'none\'}"></div></div><div class="opl-controls" ng-class="{\'opl-hidden\': !$ctrl.controlsDisplayed}"><div><div class="opl-time-bar"><div class="opl-index-preview" ng-show="previewDisplayed && !touchDevice"><opl-preview opl-time="previewTime" opl-image="previewImage"></opl-preview></div><opl-slider ng-model="$ctrl.seenPercent" ng-change="handleTimeBarUpdate($ctrl.seenPercent);" opl-label="{{\'CONTROLS_TIME_BAR_ARIA_LABEL\' | oplTranslate}}" opl-value-text="{{\'CONTROLS_TIME_BAR_ARIA_VALUE_TEXT\' | oplTranslate}}" opl-on-focus="handleControlFocus()" opl-on-over="handleTimeBarOver()" opl-on-out="handleTimeBarOut()" opl-on-move="handleTimeBarMove(value, coordinates, sliderBoundingRectangle)"></opl-slider></div><div class="opl-left-controls"><opl-toggle-icon-button opl-on="{{$ctrl.playing}}" opl-off-icon="play_arrow" opl-on-icon="pause" opl-off-label="{{\'CONTROLS_PLAY_ARIA_LABEL\' | oplTranslate}}" opl-on-label="{{\'CONTROLS_PAUSE_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.playPause(on)" opl-on-focus="handleControlFocus()"></opl-toggle-icon-button><opl-volume ng-model="$ctrl.volume" ng-change="$ctrl.setVolume($ctrl.volume)" ng-show="volumeIconDisplayed" opl-on-focus="handleControlFocus()"></opl-volume><div class="opl-current-time" ng-show="timeDisplayed"><span>{{$ctrl.time | oplMillisecondsToTime}} / {{$ctrl.duration | oplMillisecondsToTime}}</span></div></div><div class="opl-right-controls"><opl-template-selector opl-template="{{$ctrl.selectedTemplate}}" opl-label="{{\'CONTROLS_TEMPLATES_SELECTOR_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.selectTemplate(template)" ng-show="templateSelectorDisplayed" opl-on-focus="handleControlFocus()"></opl-template-selector><opl-settings opl-qualities="$ctrl.mediaQualities" opl-sources="$ctrl.mediaSources" opl-quality="{{$ctrl.selectedDefinition}}" opl-source="{{$ctrl.selectedSource}}" opl-on-update="handleSettingsUpdate(quality, source)" opl-on-focus="handleControlFocus()" ng-show="settingsIconDisplayed"></opl-settings><opl-toggle-icon-button ng-show="fullscreenIconDisplayed" opl-on="{{$ctrl.fullscreenEnabled}}" opl-off-icon="fullscreen" opl-on-icon="fullscreen_exit" opl-off-label="{{\'CONTROLS_FULLSCREEN_ARIA_LABEL\' | oplTranslate}}" opl-on-label="{{\'CONTROLS_FULLSCREEN_EXIT_ARIA_LABEL\' | oplTranslate}}" opl-on-update="toggleFullscreen(on)" opl-on-focus="handleControlFocus()"></opl-toggle-icon-button><opl-veo-labs-button ng-show="veoLabsIconDisplayed" opl-label="{{\'CONTROLS_VEO_LABS_ARIA_LABEL\' | oplTranslate}}" opl-on-focus="handleControlFocus()"></opl-veo-labs-button></div></div></div></div><div class="opl-light-controls"><div><opl-toggle-icon-button opl-on="{{$ctrl.playing}}" opl-off-icon="play_arrow" opl-on-icon="pause" opl-off-label="{{\'CONTROLS_PLAY_ARIA_LABEL\' | oplTranslate}}" opl-on-label="{{\'CONTROLS_PAUSE_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.playPause(on)" opl-no-sequential-focus="true"></opl-toggle-icon-button><opl-volume ng-model="$ctrl.volume" ng-change="$ctrl.setVolume($ctrl.volume)" ng-show="volumeIconDisplayed" opl-on-open="handleLightVolumeToggle()" opl-on-close="handleLightVolumeToggle()" opl-no-sequential-focus="true"></opl-volume><div class="opl-current-time" ng-show="timeDisplayed"><span>{{$ctrl.time | oplMillisecondsToTime}}</span></div><div class="opl-time-bar"><opl-slider ng-model="$ctrl.seenPercent" ng-change="handleTimeBarUpdate($ctrl.seenPercent);" opl-label="{{\'CONTROLS_TIME_BAR_ARIA_LABEL\' | oplTranslate}}" opl-value-text="{{\'CONTROLS_TIME_BAR_ARIA_VALUE_TEXT\' | oplTranslate}}" opl-no-sequential-focus="true"></opl-slider></div></div></div><opl-tabs opl-on-select="handleViewSelect(view)" opl-no-tabs="{{tabsHidden}}"><opl-view opl-label="{{\'TABS_CHAPTERS_ARIA_LABEL\' | oplTranslate}}" opl-class="opl-chapters-view" opl-view-id="chapters" opl-icon="book" opl-on-select="handleViewSelected(id)" ng-if="chaptersDisplayed"><opl-tiles opl-data="$ctrl.chapters" opl-time="$ctrl.time" opl-on-tile-select="handleTileSelect(tile)" opl-on-tile-info="handleTileInfo(tile, \'chapters\')" opl-on-tile-close="handleTileClose(tile, \'chapters\')"></opl-tiles></opl-view><opl-view opl-label="{{\'TABS_TIMECODES_ARIA_LABEL\' | oplTranslate}}" opl-class="opl-timecodes-view" opl-view-id="timecodes" opl-icon="image" opl-on-select="handleViewSelected(id)" ng-if="indexesDisplayed"><opl-tiles opl-data="$ctrl.timecodes" opl-time="$ctrl.time" opl-on-tile-select="handleTileSelect(tile)" opl-on-tile-info="handleTileInfo(tile, \'timecodes\')" opl-on-tile-close="handleTileClose(tile, \'timecodes\')"></opl-tiles></opl-view><opl-view opl-label="{{\'TABS_TAGS_ARIA_LABEL\' | oplTranslate}}" opl-class="opl-tags-view" opl-view-id="tags" opl-icon="note" opl-on-select="handleViewSelected(id)" ng-if="tagsDisplayed"><opl-tiles opl-data="$ctrl.tags" opl-time="$ctrl.time" opl-on-tile-select="handleTileSelect(tile)" opl-on-tile-info="handleTileInfo(tile, \'tags\')" opl-on-tile-close="handleTileClose(tile, \'tags\')"></opl-tiles></opl-view></opl-tabs></div></div>'),
a.put("opl-preview.html","<div class=\"opl-preview\" ng-style=\"{'background-image': (url && $ctrl.preloaded && !$ctrl.error) ? 'url(' + url + ')' : 'none', 'background-position': (url) ? '-' + position.x + 'px -' + position.y + 'px' : '0px 0px'}\"><div ng-if=\"$ctrl.preloading\" class=\"opl-loader\"></div><div class=\"opl-time\"><div ng-bind=\"$ctrl.oplTime | oplMillisecondsToTime\"></div></div><p ng-if=\"$ctrl.error\" class=\"opl-error-message\"><span ng-bind=\"'PREVIEW_IMAGE_PRELOAD_ERROR' | oplTranslate\"></span></p></div>"),a.put("opl-button.html",'<button class="opl-button" tabindex="{{($ctrl.oplNoSequentialFocus === \'true\' ? \'-1\' : \'0\')}}" aria-label="{{$ctrl.oplLabel}}"><i class="opl-icon" ng-bind="$ctrl.oplIcon"></i></button>'),a.put("opl-scroller.html",'<div class="opl-scroller" ng-class="{\'opl-no-scrollbar\': $ctrl.oplDeactivated, \'opl-horizontal\': $ctrl.oplOrientation === \'horizontal\', \'opl-vertical\': $ctrl.oplOrientation === \'vertical\'}"><div class="opl-scrollbar" tabindex="{{($ctrl.oplNoSequentialFocus === \'true\' ? \'-1\' : \'0\')}}" role="scrollbar" aria-controls="{{$ctrl.oplId}}" aria-value-min="0" aria-value-max="100" aria-orientation="{{$ctrl.oplOrientation}}" aria-valuenow="{{value}}" ng-show="!$ctrl.oplDeactivated"></div><div class="opl-thumb" ng-show="!$ctrl.oplDeactivated"></div><div id="{{$ctrl.oplId}}" class="opl-scroller-content" ng-transclude></div></div>'),a.put("opl-settings.html",'<div class="opl-settings"><opl-button opl-icon="settings" opl-label="{{\'CONTROLS_SETTINGS_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.toggleSettings()" opl-on-focus="handleButtonFocus()"></opl-button><div class="opl-dialog"><div><h1 ng-bind="\'CONTROLS_SETTINGS_QUALITIES_TITLE\' | oplTranslate" ng-if="$ctrl.oplQualities.length"></h1><ul ng-if="$ctrl.oplQualities.length"><li ng-repeat="quality in $ctrl.oplQualities" ng-class="{\'opl-selected\': quality.id === $ctrl.oplQuality, \'opl-hd\': quality.hd}" data-id="{{quality.id}}" data-type="quality" role="button" tabindex="-1" aria-label="{{quality.label}}" aria-hidden="{{!$ctrl.settingsOpened}}"><span ng-if="quality.id === $ctrl.oplQuality" class="opl-icon opl-check">check</span> <span ng-bind="quality.label" class="opl-item-label"></span> <span ng-if="quality.hd" class="opl-icon opl-hd">hd</span></li></ul><h1 ng-bind="\'CONTROLS_SETTINGS_SOURCES_TITLE\' | oplTranslate" ng-if="$ctrl.oplSources.length"></h1><ul ng-if="$ctrl.oplSources.length"><li ng-repeat="source in $ctrl.oplSources" ng-class="{\'opl-selected\': source.id === $ctrl.oplSource}" data-id="{{source.id}}" data-type="source" role="button" tabindex="-1" aria-label="{{source.label}}" aria-hidden="{{!$ctrl.settingsOpened}}"><span ng-if="source.id === $ctrl.oplSource" class="opl-icon opl-check">check</span> <span ng-bind="source.label" class="opl-item-label"></span></li></ul></div></div></div>'),a.put("opl-slider.html",'<div class="opl-slider" tabindex="{{($ctrl.oplNoSequentialFocus === \'true\' ? \'-1\' : \'0\')}}" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="{{value}}" aria-valuetext="{{valueText | oplTranslate:valueTextParameters}}" aria-label="{{label}}"><div class="opl-slider-track-container"><div class="opl-slider-track"></div></div><div class="opl-slider-thumb-container"><svg class="opl-slider-thumb" width="24" height="24"><circle cx="12" cy="12" r="12" stroke-width="0"></circle></svg><div class="opl-slider-focus-ring"></div></div></div>'),a.put("opl-tabs.html",'<div class="opl-tabs" ng-class="{\'opl-no-tabs\': $ctrl.oplNoTabs === \'true\'}"><div class="opl-tabs-wrapper"><ul role="tablist" aria-orientation="vertical" tabindex="0"><li ng-repeat="view in $ctrl.views" ng-class="{\'opl-selected\': view.selected}" role="tab" aria-selected="{{view.selected}}" aria-controls="{{view.oplViewId}}"><opl-button opl-icon="{{view.oplIcon}}" opl-label="{{view.oplLabel}}" opl-no-sequential-focus="true" opl-on-update="handleButtonAction(view)"></opl-button></li></ul></div><div ng-transclude></div></div>'),a.put("opl-templateSelector.html",'<div class="opl-template-selector" tabindex="0" aria-label="{{$ctrl.oplLabel}}" role="listbox" aria-orientation="horizontal"><button ng-repeat="template in templates" role="option" tabindex="-1" data-id="{{template.id}}" aria-label="{{template.label}}" aria-selected="{{template.id === selectedTemplate}}" aria-hidden="{{template.hidden}}"><i class="opl-icon" ng-bind="template.id"></i></button></div>'),a.put("opl-toggleIconButton.html",'<button class="opl-toggle-icon-button" tabindex="{{($ctrl.oplNoSequentialFocus === \'true\' ? \'-1\' : \'0\')}}" aria-pressed="{{on}}" aria-label="{{label}}"><i class="opl-icon opl-off" ng-show="!on" ng-bind="offIcon"></i> <i class="opl-icon opl-on" ng-show="on" ng-bind="onIcon"></i></button>'),a.put("opl-veoLabsButton.html",'<div class="opl-veo-labs-button"><a href="https://www.veo-labs.com" aria-label="{{$ctrl.oplLabel}}" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><clipPath id="rectangle-clip"><rect x="0" y="0" width="30" height="30"/></clipPath><clipPath id="circle-clip"><circle cx="10" cy="0" r="15"/></clipPath><path id="veo-labs-svg" d="M 17.86808,0.49483222 A 0.38770505,0.38770505 0 0 0 17.518257,0.75800184 L 14.196542,12.565335 12.232397,6.236425 A 0.39479723,0.39479723 0 0 0 11.895412,5.9732553 H 11.876158 5.9580504 A 0.19148847,0.19148847 0 0 0 5.8617681,5.9893098 0.76358985,0.76358985 0 0 0 5.4991075,6.1690354 L 0.06240295,11.560799 c -0.10647975,0.104014 -0.06864,0.192562 0.08023446,0.192562 H 6.2886126 a 0.74467742,0.74467742 0 0 0 0.4717797,-0.198983 l 0.4942456,-0.510292 3.7902871,12.198879 a 0.39479723,0.39479723 0 0 0 0.234284,0.237494 0.39479723,0.39479723 0 0 0 0.0098,0.0033 0.19858064,0.19858064 0 0 0 0.105905,0.02247 0.39479723,0.39479723 0 0 0 0.0033,0 h 5.921317 a 0.18912442,0.18912442 0 0 0 0.0064,0 0.3806129,0.3806129 0 0 0 0.01282,0 0.18912442,0.18912442 0 0 0 0.05777,-0.0098 0.3806129,0.3806129 0 0 0 0.0161,-0.0064 0.18912442,0.18912442 0 0 0 0.01926,-0.0064 0.3806129,0.3806129 0 0 0 0.0033,-0.0033 0.18912442,0.18912442 0 0 0 0.0033,0 0.3806129,0.3806129 0 0 0 0.227867,-0.237494 L 23.98838,0.75800184 A 0.19385254,0.19385254 0 0 0 23.789398,0.49483222 Z"/><use href="#veo-labs-svg" class="opl-veo-labs-logotype"/><use href="#veo-labs-svg" clip-path="url(#rectangle-clip)" class="opl-ripple"/><use href="#veo-labs-svg" clip-path="url(#circle-clip)" class="opl-light"/></svg></a></div>'),a.put("opl-view.html",'<div ng-show="$ctrl.selected" class="{{$ctrl.oplClass}}" role="tabpanel" id="{{$ctrl.oplViewId}}" ng-transclude></div>'),a.put("opl-volume.html",'<div class="opl-volume"><opl-toggle-icon-button opl-on="{{$ctrl.muted}}" opl-off-icon="volume_up" opl-on-icon="volume_off" opl-off-label="{{\'CONTROLS_VOLUME_MUTE_ARIA_LABEL\' | oplTranslate}}" opl-on-label="{{\'CONTROLS_VOLUME_UNMUTE_ARIA_LABEL\' | oplTranslate}}" opl-on-update="$ctrl.toggleSound(on)" opl-on-focus="handleFocus()" opl-no-sequential-focus="{{$ctrl.oplNoSequentialFocus}}"></opl-toggle-icon-button><div><opl-slider ng-model="sliderValue" ng-change="$ctrl.setLevel(sliderValue);" opl-step="1" opl-label="{{\'CONTROLS_VOLUME_CURSOR_ARIA_LABEL\' | oplTranslate}}" opl-value-text="{{\'CONTROLS_VOLUME_TEXT_ARIA_LABEL\' | oplTranslate}}" opl-on-focus="handleFocus()" opl-no-sequential-focus="{{$ctrl.oplNoSequentialFocus}}"></opl-slider></div></div>'),a.put("opl-tile.html",'<div ng-class="{\'opl-type-image\': $ctrl.oplData.type === \'image\', \'opl-tile-abstract\': $ctrl.oplAbstract}" class="opl-tile" tabindex="-1"><div ng-if="$ctrl.smallImagePreloading || $ctrl.largeImagePreloading" class="opl-loader"></div><div class="opl-content" ng-style="{\'background-image\': ($ctrl.oplData.image && $ctrl.oplData.image.small && $ctrl.smallImagePreloaded && !$ctrl.smallImageError && $ctrl.oplAbstract) ? \'url(\' + $ctrl.oplData.image.small.url + \')\' : \'none\', \'background-position\': $ctrl.oplData.image.small ? \'-\' + $ctrl.oplData.image.small.x + \'px -\' + $ctrl.oplData.image.small.y + \'px\' : \'0px 0px\' }"><div class="opl-abstract" ng-if="$ctrl.oplAbstract"><p ng-if="$ctrl.smallImageError && $ctrl.oplData.type === \'image\'" class="opl-error-message"><span ng-bind="\'TILE_IMAGE_PRELOAD_ERROR\' | oplTranslate"></span></p><div class="opl-title" ng-if="$ctrl.oplData.type === \'text\'"><p ng-bind="$ctrl.oplData.title"></p></div><div class="opl-info"><i class="opl-icon opl-access-time-icon">access_time</i> <span class="opl-access-time" ng-bind="$ctrl.oplData.time | oplMillisecondsToTime"></span> <span class="opl-more-button"><opl-button opl-icon="more_horiz" opl-label="{{\'TILE_MORE_INFO_BUTTON_LABEL\' | oplTranslate}}" opl-no-sequential-focus="true" opl-on-update="handleMoreInfoAction()"></opl-button></span></div></div><div class="opl-full" ng-if="!$ctrl.oplAbstract"><img ng-if="$ctrl.oplData.image && $ctrl.oplData.image.large && !$ctrl.largeImagePreloading && $ctrl.largeImageSize && $ctrl.oplData.type === \'image\'" ng-src="{{$ctrl.oplData.image.large}}"><p ng-if="$ctrl.largeImageError" class="opl-error-message"><span ng-bind="\'TILE_IMAGE_PRELOAD_ERROR\' | oplTranslate"></span></p><div class="opl-close-button" ng-if="$ctrl.oplData.type === \'image\'"><opl-button opl-icon="close" opl-label="{{\'TILE_CLOSE_BUTTON_LABEL\' | oplTranslate}}" opl-no-sequential-focus="true" opl-on-update="handleCloseAction()"></opl-button></div><div class="opl-title-wrapper" ng-if="$ctrl.oplData.type === \'text\' && $ctrl.oplData.title"><div class="opl-title"><p ng-bind="$ctrl.oplData.title"></p></div><div class="opl-close-button"><opl-button opl-icon="close" opl-label="{{\'TILE_CLOSE_BUTTON_LABEL\' | oplTranslate}}" opl-no-sequential-focus="true" opl-on-update="handleCloseAction()"></opl-button></div></div><div class="opl-description" ng-style="{\'height\': descriptionHeight ? descriptionHeight + \'px\' : \'auto\'}" ng-if="$ctrl.oplData.type === \'text\' && $ctrl.oplData.description"><opl-scroller ng-model="scrollerValue" opl-id="opl-tile-{{$ctrl.oplData.id}}-description" opl-orientation="vertical" opl-no-sequential-focus="true" opl-on-ready="handleDescriptionScrollerOnReady()"><div class="opl-tile-description" ng-bind-html="getTrustedHtml($ctrl.oplData.description);"></div></opl-scroller></div><div class="opl-attachment" ng-if="$ctrl.oplData.type === \'text\' && $ctrl.oplData.file"><a ng-href="{{$ctrl.oplData.file.url + \'?filename=\' + $ctrl.oplData.file.originalName}}" download="{{$ctrl.oplData.file.originalName}}" target="_blank"><i class="opl-icon">attachment</i><span ng-bind="$ctrl.fileName"></span></a></div></div></div></div>'),a.put("opl-tiles.html",'<div class="opl-tiles" tabindex="0"><opl-scroller ng-model="scrollerValue" ng-change="handleScrollerChange()" opl-id="opl-tiles" opl-no-sequential-focus="true" opl-orientation="horizontal" opl-on-touch="handleScrollTouch()" opl-deactivated="$ctrl.scrollerDeactivated"><div class="opl-tiles-content"><ul><li ng-repeat="tile in $ctrl.oplData" class="opl-tile-wrapper" data-id="{{tile.id}}"><opl-tile opl-data="tile" opl-abstract="tile.abstract" opl-on-select="handleTileSelect(tile)" opl-on-more="handleTileMoreInfo(tile)" opl-on-close="handleTileClose(tile)" opl-on-ready="handleTileReady(tile)" opl-on-image-preloaded="handleTileImagePreload(tile, size)" opl-on-image-error="handleTileImageError(tile)"></opl-tile></li></ul></div></opl-scroller></div>'),a.put("opl-vimeo.html",'<iframe ng-src="{{$ctrl.sourceUrl}}" id="{{$ctrl.playerId}}" class="opl-media-player" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),a.put("opl-youtube.html",'<div id="{{$ctrl.playerId}}" class="opl-media-player" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></div>')}]);